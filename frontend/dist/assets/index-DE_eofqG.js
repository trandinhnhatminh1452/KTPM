var ny=Object.defineProperty;var ry=(e,t,n)=>t in e?ny(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var J=(e,t,n)=>ry(e,typeof t!="symbol"?t+"":t,n);function sy(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function iy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lg={exports:{}},Bo={},cg={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $i=Symbol.for("react.element"),ay=Symbol.for("react.portal"),oy=Symbol.for("react.fragment"),ly=Symbol.for("react.strict_mode"),cy=Symbol.for("react.profiler"),uy=Symbol.for("react.provider"),dy=Symbol.for("react.context"),hy=Symbol.for("react.forward_ref"),fy=Symbol.for("react.suspense"),my=Symbol.for("react.memo"),gy=Symbol.for("react.lazy"),Xd=Symbol.iterator;function py(e){return e===null||typeof e!="object"?null:(e=Xd&&e[Xd]||e["@@iterator"],typeof e=="function"?e:null)}var ug={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dg=Object.assign,hg={};function gs(e,t,n){this.props=e,this.context=t,this.refs=hg,this.updater=n||ug}gs.prototype.isReactComponent={};gs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fg(){}fg.prototype=gs.prototype;function ku(e,t,n){this.props=e,this.context=t,this.refs=hg,this.updater=n||ug}var Eu=ku.prototype=new fg;Eu.constructor=ku;dg(Eu,gs.prototype);Eu.isPureReactComponent=!0;var Qd=Array.isArray,mg=Object.prototype.hasOwnProperty,_u={current:null},gg={key:!0,ref:!0,__self:!0,__source:!0};function pg(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)mg.call(t,r)&&!gg.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:$i,type:e,key:i,ref:a,props:s,_owner:_u.current}}function xy(e,t){return{$$typeof:$i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Tu(e){return typeof e=="object"&&e!==null&&e.$$typeof===$i}function yy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Gd=/\/+/g;function xl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yy(""+e.key):t.toString(36)}function _a(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case $i:case ay:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+xl(a,0):r,Qd(s)?(n="",e!=null&&(n=e.replace(Gd,"$&/")+"/"),_a(s,t,n,"",function(u){return u})):s!=null&&(Tu(s)&&(s=xy(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Gd,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Qd(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+xl(i,l);a+=_a(i,t,n,c,s)}else if(c=py(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+xl(i,l++),a+=_a(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Qi(e,t,n){if(e==null)return e;var r=[],s=0;return _a(e,r,"","",function(i){return t.call(n,i,s++)}),r}function vy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ge={current:null},Ta={transition:null},by={ReactCurrentDispatcher:Ge,ReactCurrentBatchConfig:Ta,ReactCurrentOwner:_u};function xg(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:Qi,forEach:function(e,t,n){Qi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Qi(e,function(){t++}),t},toArray:function(e){return Qi(e,function(t){return t})||[]},only:function(e){if(!Tu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};te.Component=gs;te.Fragment=oy;te.Profiler=cy;te.PureComponent=ku;te.StrictMode=ly;te.Suspense=fy;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=by;te.act=xg;te.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=dg({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=_u.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)mg.call(t,c)&&!gg.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:$i,type:e.type,key:s,ref:i,props:r,_owner:a}};te.createContext=function(e){return e={$$typeof:dy,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:uy,_context:e},e.Consumer=e};te.createElement=pg;te.createFactory=function(e){var t=pg.bind(null,e);return t.type=e,t};te.createRef=function(){return{current:null}};te.forwardRef=function(e){return{$$typeof:hy,render:e}};te.isValidElement=Tu;te.lazy=function(e){return{$$typeof:gy,_payload:{_status:-1,_result:e},_init:vy}};te.memo=function(e,t){return{$$typeof:my,type:e,compare:t===void 0?null:t}};te.startTransition=function(e){var t=Ta.transition;Ta.transition={};try{e()}finally{Ta.transition=t}};te.unstable_act=xg;te.useCallback=function(e,t){return Ge.current.useCallback(e,t)};te.useContext=function(e){return Ge.current.useContext(e)};te.useDebugValue=function(){};te.useDeferredValue=function(e){return Ge.current.useDeferredValue(e)};te.useEffect=function(e,t){return Ge.current.useEffect(e,t)};te.useId=function(){return Ge.current.useId()};te.useImperativeHandle=function(e,t,n){return Ge.current.useImperativeHandle(e,t,n)};te.useInsertionEffect=function(e,t){return Ge.current.useInsertionEffect(e,t)};te.useLayoutEffect=function(e,t){return Ge.current.useLayoutEffect(e,t)};te.useMemo=function(e,t){return Ge.current.useMemo(e,t)};te.useReducer=function(e,t,n){return Ge.current.useReducer(e,t,n)};te.useRef=function(e){return Ge.current.useRef(e)};te.useState=function(e){return Ge.current.useState(e)};te.useSyncExternalStore=function(e,t,n){return Ge.current.useSyncExternalStore(e,t,n)};te.useTransition=function(){return Ge.current.useTransition()};te.version="18.3.1";cg.exports=te;var v=cg.exports;const Fi=iy(v),wy=sy({__proto__:null,default:Fi},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy=v,Ny=Symbol.for("react.element"),Sy=Symbol.for("react.fragment"),Cy=Object.prototype.hasOwnProperty,ky=jy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ey={key:!0,ref:!0,__self:!0,__source:!0};function yg(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Cy.call(t,r)&&!Ey.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Ny,type:e,key:i,ref:a,props:s,_owner:ky.current}}Bo.Fragment=Sy;Bo.jsx=yg;Bo.jsxs=yg;lg.exports=Bo;var o=lg.exports,lc={},vg={exports:{}},yt={},bg={exports:{}},wg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,B){var z=L.length;L.push(B);e:for(;0<z;){var G=z-1>>>1,X=L[G];if(0<s(X,B))L[G]=B,L[z]=X,z=G;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var B=L[0],z=L.pop();if(z!==B){L[0]=z;e:for(var G=0,X=L.length,Be=X>>>1;G<Be;){var I=2*(G+1)-1,q=L[I],Z=I+1,ie=L[Z];if(0>s(q,z))Z<X&&0>s(ie,q)?(L[G]=ie,L[Z]=z,G=Z):(L[G]=q,L[I]=z,G=I);else if(Z<X&&0>s(ie,z))L[G]=ie,L[Z]=z,G=Z;else break e}}return B}function s(L,B){var z=L.sortIndex-B.sortIndex;return z!==0?z:L.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,m=3,x=!1,f=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(L){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=L)r(u),B.sortIndex=B.expirationTime,t(c,B);else break;B=n(u)}}function j(L){if(w=!1,p(L),!f)if(n(c)!==null)f=!0,R(N);else{var B=n(u);B!==null&&H(j,B.startTime-L)}}function N(L,B){f=!1,w&&(w=!1,g(S),S=-1),x=!0;var z=m;try{for(p(B),h=n(c);h!==null&&(!(h.expirationTime>B)||L&&!T());){var G=h.callback;if(typeof G=="function"){h.callback=null,m=h.priorityLevel;var X=G(h.expirationTime<=B);B=e.unstable_now(),typeof X=="function"?h.callback=X:h===n(c)&&r(c),p(B)}else r(c);h=n(c)}if(h!==null)var Be=!0;else{var I=n(u);I!==null&&H(j,I.startTime-B),Be=!1}return Be}finally{h=null,m=z,x=!1}}var C=!1,E=null,S=-1,k=5,_=-1;function T(){return!(e.unstable_now()-_<k)}function O(){if(E!==null){var L=e.unstable_now();_=L;var B=!0;try{B=E(!0,L)}finally{B?$():(C=!1,E=null)}}else C=!1}var $;if(typeof y=="function")$=function(){y(O)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,A=Y.port2;Y.port1.onmessage=O,$=function(){A.postMessage(null)}}else $=function(){b(O,0)};function R(L){E=L,C||(C=!0,$())}function H(L,B){S=b(function(){L(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){f||x||(f=!0,R(N))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(L){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var z=m;m=B;try{return L()}finally{m=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,B){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=m;m=L;try{return B()}finally{m=z}},e.unstable_scheduleCallback=function(L,B,z){var G=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?G+z:G):z=G,L){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=z+X,L={id:d++,callback:B,priorityLevel:L,startTime:z,expirationTime:X,sortIndex:-1},z>G?(L.sortIndex=z,t(u,L),n(c)===null&&L===n(u)&&(w?(g(S),S=-1):w=!0,H(j,z-G))):(L.sortIndex=X,t(c,L),f||x||(f=!0,R(N))),L},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(L){var B=m;return function(){var z=m;m=B;try{return L.apply(this,arguments)}finally{m=z}}}})(wg);bg.exports=wg;var _y=bg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ty=v,xt=_y;function F(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jg=new Set,fi={};function Mr(e,t){as(e,t),as(e+"Capture",t)}function as(e,t){for(fi[e]=t,e=0;e<t.length;e++)jg.add(t[e])}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cc=Object.prototype.hasOwnProperty,Py=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zd={},Jd={};function My(e){return cc.call(Jd,e)?!0:cc.call(Zd,e)?!1:Py.test(e)?Jd[e]=!0:(Zd[e]=!0,!1)}function Iy(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ry(e,t,n,r){if(t===null||typeof t>"u"||Iy(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ze(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fe[e]=new Ze(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fe[t]=new Ze(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fe[e]=new Ze(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fe[e]=new Ze(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fe[e]=new Ze(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fe[e]=new Ze(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fe[e]=new Ze(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fe[e]=new Ze(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fe[e]=new Ze(e,5,!1,e.toLowerCase(),null,!1,!1)});var Pu=/[\-:]([a-z])/g;function Mu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Pu,Mu);Fe[t]=new Ze(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Pu,Mu);Fe[t]=new Ze(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Pu,Mu);Fe[t]=new Ze(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fe[e]=new Ze(e,1,!1,e.toLowerCase(),null,!1,!1)});Fe.xlinkHref=new Ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fe[e]=new Ze(e,1,!1,e.toLowerCase(),null,!0,!0)});function Iu(e,t,n,r){var s=Fe.hasOwnProperty(t)?Fe[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ry(t,n,s,r)&&(n=null),r||s===null?My(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var jn=Ty.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gi=Symbol.for("react.element"),Fr=Symbol.for("react.portal"),Br=Symbol.for("react.fragment"),Ru=Symbol.for("react.strict_mode"),uc=Symbol.for("react.profiler"),Ng=Symbol.for("react.provider"),Sg=Symbol.for("react.context"),Du=Symbol.for("react.forward_ref"),dc=Symbol.for("react.suspense"),hc=Symbol.for("react.suspense_list"),Au=Symbol.for("react.memo"),_n=Symbol.for("react.lazy"),Cg=Symbol.for("react.offscreen"),eh=Symbol.iterator;function Ns(e){return e===null||typeof e!="object"?null:(e=eh&&e[eh]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Object.assign,yl;function zs(e){if(yl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);yl=t&&t[1]||""}return`
`+yl+e}var vl=!1;function bl(e,t){if(!e||vl)return"";vl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{vl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?zs(e):""}function Dy(e){switch(e.tag){case 5:return zs(e.type);case 16:return zs("Lazy");case 13:return zs("Suspense");case 19:return zs("SuspenseList");case 0:case 2:case 15:return e=bl(e.type,!1),e;case 11:return e=bl(e.type.render,!1),e;case 1:return e=bl(e.type,!0),e;default:return""}}function fc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Br:return"Fragment";case Fr:return"Portal";case uc:return"Profiler";case Ru:return"StrictMode";case dc:return"Suspense";case hc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Sg:return(e.displayName||"Context")+".Consumer";case Ng:return(e._context.displayName||"Context")+".Provider";case Du:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Au:return t=e.displayName||null,t!==null?t:fc(e.type)||"Memo";case _n:t=e._payload,e=e._init;try{return fc(e(t))}catch{}}return null}function Ay(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fc(t);case 8:return t===Ru?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Xn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ly(e){var t=kg(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zi(e){e._valueTracker||(e._valueTracker=Ly(e))}function Eg(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=kg(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ka(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function mc(e,t){var n=t.checked;return ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function th(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Xn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _g(e,t){t=t.checked,t!=null&&Iu(e,"checked",t,!1)}function gc(e,t){_g(e,t);var n=Xn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?pc(e,t.type,n):t.hasOwnProperty("defaultValue")&&pc(e,t.type,Xn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function nh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function pc(e,t,n){(t!=="number"||Ka(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Us=Array.isArray;function Gr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Xn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function xc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(F(91));return ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function rh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(F(92));if(Us(n)){if(1<n.length)throw Error(F(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Xn(n)}}function Tg(e,t){var n=Xn(t.value),r=Xn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function sh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Pg(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Pg(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ji,Mg=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ji=Ji||document.createElement("div"),Ji.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ji.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function mi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Zs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Oy=["Webkit","ms","Moz","O"];Object.keys(Zs).forEach(function(e){Oy.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zs[t]=Zs[e]})});function Ig(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Zs.hasOwnProperty(e)&&Zs[e]?(""+t).trim():t+"px"}function Rg(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ig(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var $y=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vc(e,t){if(t){if($y[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(F(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(F(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(F(61))}if(t.style!=null&&typeof t.style!="object")throw Error(F(62))}}function bc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wc=null;function Lu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var jc=null,Zr=null,Jr=null;function ih(e){if(e=Ui(e)){if(typeof jc!="function")throw Error(F(280));var t=e.stateNode;t&&(t=Vo(t),jc(e.stateNode,e.type,t))}}function Dg(e){Zr?Jr?Jr.push(e):Jr=[e]:Zr=e}function Ag(){if(Zr){var e=Zr,t=Jr;if(Jr=Zr=null,ih(e),t)for(e=0;e<t.length;e++)ih(t[e])}}function Lg(e,t){return e(t)}function Og(){}var wl=!1;function $g(e,t,n){if(wl)return e(t,n);wl=!0;try{return Lg(e,t,n)}finally{wl=!1,(Zr!==null||Jr!==null)&&(Og(),Ag())}}function gi(e,t){var n=e.stateNode;if(n===null)return null;var r=Vo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(F(231,t,typeof n));return n}var Nc=!1;if(pn)try{var Ss={};Object.defineProperty(Ss,"passive",{get:function(){Nc=!0}}),window.addEventListener("test",Ss,Ss),window.removeEventListener("test",Ss,Ss)}catch{Nc=!1}function Fy(e,t,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Js=!1,Xa=null,Qa=!1,Sc=null,By={onError:function(e){Js=!0,Xa=e}};function zy(e,t,n,r,s,i,a,l,c){Js=!1,Xa=null,Fy.apply(By,arguments)}function Uy(e,t,n,r,s,i,a,l,c){if(zy.apply(this,arguments),Js){if(Js){var u=Xa;Js=!1,Xa=null}else throw Error(F(198));Qa||(Qa=!0,Sc=u)}}function Ir(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Fg(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ah(e){if(Ir(e)!==e)throw Error(F(188))}function Hy(e){var t=e.alternate;if(!t){if(t=Ir(e),t===null)throw Error(F(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ah(s),e;if(i===r)return ah(s),t;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?e:t}function Bg(e){return e=Hy(e),e!==null?zg(e):null}function zg(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=zg(e);if(t!==null)return t;e=e.sibling}return null}var Ug=xt.unstable_scheduleCallback,oh=xt.unstable_cancelCallback,Wy=xt.unstable_shouldYield,Vy=xt.unstable_requestPaint,be=xt.unstable_now,Yy=xt.unstable_getCurrentPriorityLevel,Ou=xt.unstable_ImmediatePriority,Hg=xt.unstable_UserBlockingPriority,Ga=xt.unstable_NormalPriority,qy=xt.unstable_LowPriority,Wg=xt.unstable_IdlePriority,zo=null,Jt=null;function Ky(e){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(zo,e,void 0,(e.current.flags&128)===128)}catch{}}var Lt=Math.clz32?Math.clz32:Gy,Xy=Math.log,Qy=Math.LN2;function Gy(e){return e>>>=0,e===0?32:31-(Xy(e)/Qy|0)|0}var ea=64,ta=4194304;function Hs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Za(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Hs(l):(i&=a,i!==0&&(r=Hs(i)))}else a=n&~s,a!==0?r=Hs(a):i!==0&&(r=Hs(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Lt(t),s=1<<n,r|=e[n],t&=~s;return r}function Zy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jy(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Lt(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=Zy(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Cc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Vg(){var e=ea;return ea<<=1,!(ea&4194240)&&(ea=64),e}function jl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Lt(t),e[t]=n}function ev(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Lt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function $u(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Lt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ue=0;function Yg(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var qg,Fu,Kg,Xg,Qg,kc=!1,na=[],$n=null,Fn=null,Bn=null,pi=new Map,xi=new Map,Pn=[],tv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lh(e,t){switch(e){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":pi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xi.delete(t.pointerId)}}function Cs(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ui(t),t!==null&&Fu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function nv(e,t,n,r,s){switch(t){case"focusin":return $n=Cs($n,e,t,n,r,s),!0;case"dragenter":return Fn=Cs(Fn,e,t,n,r,s),!0;case"mouseover":return Bn=Cs(Bn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return pi.set(i,Cs(pi.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,xi.set(i,Cs(xi.get(i)||null,e,t,n,r,s)),!0}return!1}function Gg(e){var t=mr(e.target);if(t!==null){var n=Ir(t);if(n!==null){if(t=n.tag,t===13){if(t=Fg(n),t!==null){e.blockedOn=t,Qg(e.priority,function(){Kg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Pa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ec(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);wc=r,n.target.dispatchEvent(r),wc=null}else return t=Ui(n),t!==null&&Fu(t),e.blockedOn=n,!1;t.shift()}return!0}function ch(e,t,n){Pa(e)&&n.delete(t)}function rv(){kc=!1,$n!==null&&Pa($n)&&($n=null),Fn!==null&&Pa(Fn)&&(Fn=null),Bn!==null&&Pa(Bn)&&(Bn=null),pi.forEach(ch),xi.forEach(ch)}function ks(e,t){e.blockedOn===t&&(e.blockedOn=null,kc||(kc=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,rv)))}function yi(e){function t(s){return ks(s,e)}if(0<na.length){ks(na[0],e);for(var n=1;n<na.length;n++){var r=na[n];r.blockedOn===e&&(r.blockedOn=null)}}for($n!==null&&ks($n,e),Fn!==null&&ks(Fn,e),Bn!==null&&ks(Bn,e),pi.forEach(t),xi.forEach(t),n=0;n<Pn.length;n++)r=Pn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Pn.length&&(n=Pn[0],n.blockedOn===null);)Gg(n),n.blockedOn===null&&Pn.shift()}var es=jn.ReactCurrentBatchConfig,Ja=!0;function sv(e,t,n,r){var s=ue,i=es.transition;es.transition=null;try{ue=1,Bu(e,t,n,r)}finally{ue=s,es.transition=i}}function iv(e,t,n,r){var s=ue,i=es.transition;es.transition=null;try{ue=4,Bu(e,t,n,r)}finally{ue=s,es.transition=i}}function Bu(e,t,n,r){if(Ja){var s=Ec(e,t,n,r);if(s===null)Il(e,t,r,eo,n),lh(e,r);else if(nv(s,e,t,n,r))r.stopPropagation();else if(lh(e,r),t&4&&-1<tv.indexOf(e)){for(;s!==null;){var i=Ui(s);if(i!==null&&qg(i),i=Ec(e,t,n,r),i===null&&Il(e,t,r,eo,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Il(e,t,r,null,n)}}var eo=null;function Ec(e,t,n,r){if(eo=null,e=Lu(r),e=mr(e),e!==null)if(t=Ir(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Fg(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return eo=e,null}function Zg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yy()){case Ou:return 1;case Hg:return 4;case Ga:case qy:return 16;case Wg:return 536870912;default:return 16}default:return 16}}var Rn=null,zu=null,Ma=null;function Jg(){if(Ma)return Ma;var e,t=zu,n=t.length,r,s="value"in Rn?Rn.value:Rn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return Ma=s.slice(e,1<r?1-r:void 0)}function Ia(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ra(){return!0}function uh(){return!1}function vt(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ra:uh,this.isPropagationStopped=uh,this}return ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),t}var ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uu=vt(ps),zi=ye({},ps,{view:0,detail:0}),av=vt(zi),Nl,Sl,Es,Uo=ye({},zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Es&&(Es&&e.type==="mousemove"?(Nl=e.screenX-Es.screenX,Sl=e.screenY-Es.screenY):Sl=Nl=0,Es=e),Nl)},movementY:function(e){return"movementY"in e?e.movementY:Sl}}),dh=vt(Uo),ov=ye({},Uo,{dataTransfer:0}),lv=vt(ov),cv=ye({},zi,{relatedTarget:0}),Cl=vt(cv),uv=ye({},ps,{animationName:0,elapsedTime:0,pseudoElement:0}),dv=vt(uv),hv=ye({},ps,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fv=vt(hv),mv=ye({},ps,{data:0}),hh=vt(mv),gv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xv[e])?!!t[e]:!1}function Hu(){return yv}var vv=ye({},zi,{key:function(e){if(e.key){var t=gv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ia(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hu,charCode:function(e){return e.type==="keypress"?Ia(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ia(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bv=vt(vv),wv=ye({},Uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fh=vt(wv),jv=ye({},zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hu}),Nv=vt(jv),Sv=ye({},ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cv=vt(Sv),kv=ye({},Uo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ev=vt(kv),_v=[9,13,27,32],Wu=pn&&"CompositionEvent"in window,ei=null;pn&&"documentMode"in document&&(ei=document.documentMode);var Tv=pn&&"TextEvent"in window&&!ei,ep=pn&&(!Wu||ei&&8<ei&&11>=ei),mh=" ",gh=!1;function tp(e,t){switch(e){case"keyup":return _v.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function np(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zr=!1;function Pv(e,t){switch(e){case"compositionend":return np(t);case"keypress":return t.which!==32?null:(gh=!0,mh);case"textInput":return e=t.data,e===mh&&gh?null:e;default:return null}}function Mv(e,t){if(zr)return e==="compositionend"||!Wu&&tp(e,t)?(e=Jg(),Ma=zu=Rn=null,zr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ep&&t.locale!=="ko"?null:t.data;default:return null}}var Iv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ph(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Iv[e.type]:t==="textarea"}function rp(e,t,n,r){Dg(r),t=to(t,"onChange"),0<t.length&&(n=new Uu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ti=null,vi=null;function Rv(e){mp(e,0)}function Ho(e){var t=Wr(e);if(Eg(t))return e}function Dv(e,t){if(e==="change")return t}var sp=!1;if(pn){var kl;if(pn){var El="oninput"in document;if(!El){var xh=document.createElement("div");xh.setAttribute("oninput","return;"),El=typeof xh.oninput=="function"}kl=El}else kl=!1;sp=kl&&(!document.documentMode||9<document.documentMode)}function yh(){ti&&(ti.detachEvent("onpropertychange",ip),vi=ti=null)}function ip(e){if(e.propertyName==="value"&&Ho(vi)){var t=[];rp(t,vi,e,Lu(e)),$g(Rv,t)}}function Av(e,t,n){e==="focusin"?(yh(),ti=t,vi=n,ti.attachEvent("onpropertychange",ip)):e==="focusout"&&yh()}function Lv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ho(vi)}function Ov(e,t){if(e==="click")return Ho(t)}function $v(e,t){if(e==="input"||e==="change")return Ho(t)}function Fv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ft=typeof Object.is=="function"?Object.is:Fv;function bi(e,t){if(Ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!cc.call(t,s)||!Ft(e[s],t[s]))return!1}return!0}function vh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bh(e,t){var n=vh(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vh(n)}}function ap(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ap(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function op(){for(var e=window,t=Ka();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ka(e.document)}return t}function Vu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Bv(e){var t=op(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ap(n.ownerDocument.documentElement,n)){if(r!==null&&Vu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=bh(n,i);var a=bh(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zv=pn&&"documentMode"in document&&11>=document.documentMode,Ur=null,_c=null,ni=null,Tc=!1;function wh(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tc||Ur==null||Ur!==Ka(r)||(r=Ur,"selectionStart"in r&&Vu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ni&&bi(ni,r)||(ni=r,r=to(_c,"onSelect"),0<r.length&&(t=new Uu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ur)))}function sa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Hr={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionend:sa("Transition","TransitionEnd")},_l={},lp={};pn&&(lp=document.createElement("div").style,"AnimationEvent"in window||(delete Hr.animationend.animation,delete Hr.animationiteration.animation,delete Hr.animationstart.animation),"TransitionEvent"in window||delete Hr.transitionend.transition);function Wo(e){if(_l[e])return _l[e];if(!Hr[e])return e;var t=Hr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in lp)return _l[e]=t[n];return e}var cp=Wo("animationend"),up=Wo("animationiteration"),dp=Wo("animationstart"),hp=Wo("transitionend"),fp=new Map,jh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jn(e,t){fp.set(e,t),Mr(t,[e])}for(var Tl=0;Tl<jh.length;Tl++){var Pl=jh[Tl],Uv=Pl.toLowerCase(),Hv=Pl[0].toUpperCase()+Pl.slice(1);Jn(Uv,"on"+Hv)}Jn(cp,"onAnimationEnd");Jn(up,"onAnimationIteration");Jn(dp,"onAnimationStart");Jn("dblclick","onDoubleClick");Jn("focusin","onFocus");Jn("focusout","onBlur");Jn(hp,"onTransitionEnd");as("onMouseEnter",["mouseout","mouseover"]);as("onMouseLeave",["mouseout","mouseover"]);as("onPointerEnter",["pointerout","pointerover"]);as("onPointerLeave",["pointerout","pointerover"]);Mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ws="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ws));function Nh(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Uy(r,t,void 0,e),e.currentTarget=null}function mp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Nh(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Nh(s,l,u),i=c}}}if(Qa)throw e=Sc,Qa=!1,Sc=null,e}function he(e,t){var n=t[Dc];n===void 0&&(n=t[Dc]=new Set);var r=e+"__bubble";n.has(r)||(gp(t,e,2,!1),n.add(r))}function Ml(e,t,n){var r=0;t&&(r|=4),gp(n,e,r,t)}var ia="_reactListening"+Math.random().toString(36).slice(2);function wi(e){if(!e[ia]){e[ia]=!0,jg.forEach(function(n){n!=="selectionchange"&&(Wv.has(n)||Ml(n,!1,e),Ml(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ia]||(t[ia]=!0,Ml("selectionchange",!1,t))}}function gp(e,t,n,r){switch(Zg(t)){case 1:var s=sv;break;case 4:s=iv;break;default:s=Bu}n=s.bind(null,t,n,e),s=void 0,!Nc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Il(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=mr(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}$g(function(){var u=i,d=Lu(n),h=[];e:{var m=fp.get(e);if(m!==void 0){var x=Uu,f=e;switch(e){case"keypress":if(Ia(n)===0)break e;case"keydown":case"keyup":x=bv;break;case"focusin":f="focus",x=Cl;break;case"focusout":f="blur",x=Cl;break;case"beforeblur":case"afterblur":x=Cl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=dh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=lv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Nv;break;case cp:case up:case dp:x=dv;break;case hp:x=Cv;break;case"scroll":x=av;break;case"wheel":x=Ev;break;case"copy":case"cut":case"paste":x=fv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=fh}var w=(t&4)!==0,b=!w&&e==="scroll",g=w?m!==null?m+"Capture":null:m;w=[];for(var y=u,p;y!==null;){p=y;var j=p.stateNode;if(p.tag===5&&j!==null&&(p=j,g!==null&&(j=gi(y,g),j!=null&&w.push(ji(y,j,p)))),b)break;y=y.return}0<w.length&&(m=new x(m,f,null,n,d),h.push({event:m,listeners:w}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",m&&n!==wc&&(f=n.relatedTarget||n.fromElement)&&(mr(f)||f[xn]))break e;if((x||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,x?(f=n.relatedTarget||n.toElement,x=u,f=f?mr(f):null,f!==null&&(b=Ir(f),f!==b||f.tag!==5&&f.tag!==6)&&(f=null)):(x=null,f=u),x!==f)){if(w=dh,j="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(w=fh,j="onPointerLeave",g="onPointerEnter",y="pointer"),b=x==null?m:Wr(x),p=f==null?m:Wr(f),m=new w(j,y+"leave",x,n,d),m.target=b,m.relatedTarget=p,j=null,mr(d)===u&&(w=new w(g,y+"enter",f,n,d),w.target=p,w.relatedTarget=b,j=w),b=j,x&&f)t:{for(w=x,g=f,y=0,p=w;p;p=Dr(p))y++;for(p=0,j=g;j;j=Dr(j))p++;for(;0<y-p;)w=Dr(w),y--;for(;0<p-y;)g=Dr(g),p--;for(;y--;){if(w===g||g!==null&&w===g.alternate)break t;w=Dr(w),g=Dr(g)}w=null}else w=null;x!==null&&Sh(h,m,x,w,!1),f!==null&&b!==null&&Sh(h,b,f,w,!0)}}e:{if(m=u?Wr(u):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var N=Dv;else if(ph(m))if(sp)N=$v;else{N=Lv;var C=Av}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=Ov);if(N&&(N=N(e,u))){rp(h,N,n,d);break e}C&&C(e,m,u),e==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&pc(m,"number",m.value)}switch(C=u?Wr(u):window,e){case"focusin":(ph(C)||C.contentEditable==="true")&&(Ur=C,_c=u,ni=null);break;case"focusout":ni=_c=Ur=null;break;case"mousedown":Tc=!0;break;case"contextmenu":case"mouseup":case"dragend":Tc=!1,wh(h,n,d);break;case"selectionchange":if(zv)break;case"keydown":case"keyup":wh(h,n,d)}var E;if(Wu)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else zr?tp(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(ep&&n.locale!=="ko"&&(zr||S!=="onCompositionStart"?S==="onCompositionEnd"&&zr&&(E=Jg()):(Rn=d,zu="value"in Rn?Rn.value:Rn.textContent,zr=!0)),C=to(u,S),0<C.length&&(S=new hh(S,e,null,n,d),h.push({event:S,listeners:C}),E?S.data=E:(E=np(n),E!==null&&(S.data=E)))),(E=Tv?Pv(e,n):Mv(e,n))&&(u=to(u,"onBeforeInput"),0<u.length&&(d=new hh("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=E))}mp(h,t)})}function ji(e,t,n){return{instance:e,listener:t,currentTarget:n}}function to(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=gi(e,n),i!=null&&r.unshift(ji(e,i,s)),i=gi(e,t),i!=null&&r.push(ji(e,i,s))),e=e.return}return r}function Dr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Sh(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=gi(n,i),c!=null&&a.unshift(ji(n,c,l))):s||(c=gi(n,i),c!=null&&a.push(ji(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Vv=/\r\n?/g,Yv=/\u0000|\uFFFD/g;function Ch(e){return(typeof e=="string"?e:""+e).replace(Vv,`
`).replace(Yv,"")}function aa(e,t,n){if(t=Ch(t),Ch(e)!==t&&n)throw Error(F(425))}function no(){}var Pc=null,Mc=null;function Ic(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Rc=typeof setTimeout=="function"?setTimeout:void 0,qv=typeof clearTimeout=="function"?clearTimeout:void 0,kh=typeof Promise=="function"?Promise:void 0,Kv=typeof queueMicrotask=="function"?queueMicrotask:typeof kh<"u"?function(e){return kh.resolve(null).then(e).catch(Xv)}:Rc;function Xv(e){setTimeout(function(){throw e})}function Rl(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),yi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);yi(t)}function zn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Eh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var xs=Math.random().toString(36).slice(2),Xt="__reactFiber$"+xs,Ni="__reactProps$"+xs,xn="__reactContainer$"+xs,Dc="__reactEvents$"+xs,Qv="__reactListeners$"+xs,Gv="__reactHandles$"+xs;function mr(e){var t=e[Xt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[xn]||n[Xt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Eh(e);e!==null;){if(n=e[Xt])return n;e=Eh(e)}return t}e=n,n=e.parentNode}return null}function Ui(e){return e=e[Xt]||e[xn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(F(33))}function Vo(e){return e[Ni]||null}var Ac=[],Vr=-1;function er(e){return{current:e}}function me(e){0>Vr||(e.current=Ac[Vr],Ac[Vr]=null,Vr--)}function de(e,t){Vr++,Ac[Vr]=e.current,e.current=t}var Qn={},Ye=er(Qn),it=er(!1),Nr=Qn;function os(e,t){var n=e.type.contextTypes;if(!n)return Qn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function at(e){return e=e.childContextTypes,e!=null}function ro(){me(it),me(Ye)}function _h(e,t,n){if(Ye.current!==Qn)throw Error(F(168));de(Ye,t),de(it,n)}function pp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(F(108,Ay(e)||"Unknown",s));return ye({},n,r)}function so(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qn,Nr=Ye.current,de(Ye,e),de(it,it.current),!0}function Th(e,t,n){var r=e.stateNode;if(!r)throw Error(F(169));n?(e=pp(e,t,Nr),r.__reactInternalMemoizedMergedChildContext=e,me(it),me(Ye),de(Ye,e)):me(it),de(it,n)}var dn=null,Yo=!1,Dl=!1;function xp(e){dn===null?dn=[e]:dn.push(e)}function Zv(e){Yo=!0,xp(e)}function tr(){if(!Dl&&dn!==null){Dl=!0;var e=0,t=ue;try{var n=dn;for(ue=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}dn=null,Yo=!1}catch(s){throw dn!==null&&(dn=dn.slice(e+1)),Ug(Ou,tr),s}finally{ue=t,Dl=!1}}return null}var Yr=[],qr=0,io=null,ao=0,jt=[],Nt=0,Sr=null,fn=1,mn="";function ur(e,t){Yr[qr++]=ao,Yr[qr++]=io,io=e,ao=t}function yp(e,t,n){jt[Nt++]=fn,jt[Nt++]=mn,jt[Nt++]=Sr,Sr=e;var r=fn;e=mn;var s=32-Lt(r)-1;r&=~(1<<s),n+=1;var i=32-Lt(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,fn=1<<32-Lt(t)+s|n<<s|r,mn=i+e}else fn=1<<i|n<<s|r,mn=e}function Yu(e){e.return!==null&&(ur(e,1),yp(e,1,0))}function qu(e){for(;e===io;)io=Yr[--qr],Yr[qr]=null,ao=Yr[--qr],Yr[qr]=null;for(;e===Sr;)Sr=jt[--Nt],jt[Nt]=null,mn=jt[--Nt],jt[Nt]=null,fn=jt[--Nt],jt[Nt]=null}var gt=null,mt=null,ge=!1,At=null;function vp(e,t){var n=St(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ph(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gt=e,mt=zn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gt=e,mt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Sr!==null?{id:fn,overflow:mn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=St(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,gt=e,mt=null,!0):!1;default:return!1}}function Lc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Oc(e){if(ge){var t=mt;if(t){var n=t;if(!Ph(e,t)){if(Lc(e))throw Error(F(418));t=zn(n.nextSibling);var r=gt;t&&Ph(e,t)?vp(r,n):(e.flags=e.flags&-4097|2,ge=!1,gt=e)}}else{if(Lc(e))throw Error(F(418));e.flags=e.flags&-4097|2,ge=!1,gt=e}}}function Mh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gt=e}function oa(e){if(e!==gt)return!1;if(!ge)return Mh(e),ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ic(e.type,e.memoizedProps)),t&&(t=mt)){if(Lc(e))throw bp(),Error(F(418));for(;t;)vp(e,t),t=zn(t.nextSibling)}if(Mh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(F(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){mt=zn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}mt=null}}else mt=gt?zn(e.stateNode.nextSibling):null;return!0}function bp(){for(var e=mt;e;)e=zn(e.nextSibling)}function ls(){mt=gt=null,ge=!1}function Ku(e){At===null?At=[e]:At.push(e)}var Jv=jn.ReactCurrentBatchConfig;function _s(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,e))}return e}function la(e,t){throw e=Object.prototype.toString.call(t),Error(F(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ih(e){var t=e._init;return t(e._payload)}function wp(e){function t(g,y){if(e){var p=g.deletions;p===null?(g.deletions=[y],g.flags|=16):p.push(y)}}function n(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function s(g,y){return g=Vn(g,y),g.index=0,g.sibling=null,g}function i(g,y,p){return g.index=p,e?(p=g.alternate,p!==null?(p=p.index,p<y?(g.flags|=2,y):p):(g.flags|=2,y)):(g.flags|=1048576,y)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,y,p,j){return y===null||y.tag!==6?(y=zl(p,g.mode,j),y.return=g,y):(y=s(y,p),y.return=g,y)}function c(g,y,p,j){var N=p.type;return N===Br?d(g,y,p.props.children,j,p.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===_n&&Ih(N)===y.type)?(j=s(y,p.props),j.ref=_s(g,y,p),j.return=g,j):(j=Fa(p.type,p.key,p.props,null,g.mode,j),j.ref=_s(g,y,p),j.return=g,j)}function u(g,y,p,j){return y===null||y.tag!==4||y.stateNode.containerInfo!==p.containerInfo||y.stateNode.implementation!==p.implementation?(y=Ul(p,g.mode,j),y.return=g,y):(y=s(y,p.children||[]),y.return=g,y)}function d(g,y,p,j,N){return y===null||y.tag!==7?(y=br(p,g.mode,j,N),y.return=g,y):(y=s(y,p),y.return=g,y)}function h(g,y,p){if(typeof y=="string"&&y!==""||typeof y=="number")return y=zl(""+y,g.mode,p),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Gi:return p=Fa(y.type,y.key,y.props,null,g.mode,p),p.ref=_s(g,null,y),p.return=g,p;case Fr:return y=Ul(y,g.mode,p),y.return=g,y;case _n:var j=y._init;return h(g,j(y._payload),p)}if(Us(y)||Ns(y))return y=br(y,g.mode,p,null),y.return=g,y;la(g,y)}return null}function m(g,y,p,j){var N=y!==null?y.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return N!==null?null:l(g,y,""+p,j);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Gi:return p.key===N?c(g,y,p,j):null;case Fr:return p.key===N?u(g,y,p,j):null;case _n:return N=p._init,m(g,y,N(p._payload),j)}if(Us(p)||Ns(p))return N!==null?null:d(g,y,p,j,null);la(g,p)}return null}function x(g,y,p,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return g=g.get(p)||null,l(y,g,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Gi:return g=g.get(j.key===null?p:j.key)||null,c(y,g,j,N);case Fr:return g=g.get(j.key===null?p:j.key)||null,u(y,g,j,N);case _n:var C=j._init;return x(g,y,p,C(j._payload),N)}if(Us(j)||Ns(j))return g=g.get(p)||null,d(y,g,j,N,null);la(y,j)}return null}function f(g,y,p,j){for(var N=null,C=null,E=y,S=y=0,k=null;E!==null&&S<p.length;S++){E.index>S?(k=E,E=null):k=E.sibling;var _=m(g,E,p[S],j);if(_===null){E===null&&(E=k);break}e&&E&&_.alternate===null&&t(g,E),y=i(_,y,S),C===null?N=_:C.sibling=_,C=_,E=k}if(S===p.length)return n(g,E),ge&&ur(g,S),N;if(E===null){for(;S<p.length;S++)E=h(g,p[S],j),E!==null&&(y=i(E,y,S),C===null?N=E:C.sibling=E,C=E);return ge&&ur(g,S),N}for(E=r(g,E);S<p.length;S++)k=x(E,g,S,p[S],j),k!==null&&(e&&k.alternate!==null&&E.delete(k.key===null?S:k.key),y=i(k,y,S),C===null?N=k:C.sibling=k,C=k);return e&&E.forEach(function(T){return t(g,T)}),ge&&ur(g,S),N}function w(g,y,p,j){var N=Ns(p);if(typeof N!="function")throw Error(F(150));if(p=N.call(p),p==null)throw Error(F(151));for(var C=N=null,E=y,S=y=0,k=null,_=p.next();E!==null&&!_.done;S++,_=p.next()){E.index>S?(k=E,E=null):k=E.sibling;var T=m(g,E,_.value,j);if(T===null){E===null&&(E=k);break}e&&E&&T.alternate===null&&t(g,E),y=i(T,y,S),C===null?N=T:C.sibling=T,C=T,E=k}if(_.done)return n(g,E),ge&&ur(g,S),N;if(E===null){for(;!_.done;S++,_=p.next())_=h(g,_.value,j),_!==null&&(y=i(_,y,S),C===null?N=_:C.sibling=_,C=_);return ge&&ur(g,S),N}for(E=r(g,E);!_.done;S++,_=p.next())_=x(E,g,S,_.value,j),_!==null&&(e&&_.alternate!==null&&E.delete(_.key===null?S:_.key),y=i(_,y,S),C===null?N=_:C.sibling=_,C=_);return e&&E.forEach(function(O){return t(g,O)}),ge&&ur(g,S),N}function b(g,y,p,j){if(typeof p=="object"&&p!==null&&p.type===Br&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Gi:e:{for(var N=p.key,C=y;C!==null;){if(C.key===N){if(N=p.type,N===Br){if(C.tag===7){n(g,C.sibling),y=s(C,p.props.children),y.return=g,g=y;break e}}else if(C.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===_n&&Ih(N)===C.type){n(g,C.sibling),y=s(C,p.props),y.ref=_s(g,C,p),y.return=g,g=y;break e}n(g,C);break}else t(g,C);C=C.sibling}p.type===Br?(y=br(p.props.children,g.mode,j,p.key),y.return=g,g=y):(j=Fa(p.type,p.key,p.props,null,g.mode,j),j.ref=_s(g,y,p),j.return=g,g=j)}return a(g);case Fr:e:{for(C=p.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===p.containerInfo&&y.stateNode.implementation===p.implementation){n(g,y.sibling),y=s(y,p.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else t(g,y);y=y.sibling}y=Ul(p,g.mode,j),y.return=g,g=y}return a(g);case _n:return C=p._init,b(g,y,C(p._payload),j)}if(Us(p))return f(g,y,p,j);if(Ns(p))return w(g,y,p,j);la(g,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,y!==null&&y.tag===6?(n(g,y.sibling),y=s(y,p),y.return=g,g=y):(n(g,y),y=zl(p,g.mode,j),y.return=g,g=y),a(g)):n(g,y)}return b}var cs=wp(!0),jp=wp(!1),oo=er(null),lo=null,Kr=null,Xu=null;function Qu(){Xu=Kr=lo=null}function Gu(e){var t=oo.current;me(oo),e._currentValue=t}function $c(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ts(e,t){lo=e,Xu=Kr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(rt=!0),e.firstContext=null)}function _t(e){var t=e._currentValue;if(Xu!==e)if(e={context:e,memoizedValue:t,next:null},Kr===null){if(lo===null)throw Error(F(308));Kr=e,lo.dependencies={lanes:0,firstContext:e}}else Kr=Kr.next=e;return t}var gr=null;function Zu(e){gr===null?gr=[e]:gr.push(e)}function Np(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Zu(t)):(n.next=s.next,s.next=n),t.interleaved=n,yn(e,r)}function yn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Tn=!1;function Ju(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Un(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ne&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,yn(e,n)}return s=r.interleaved,s===null?(t.next=t,Zu(r)):(t.next=s.next,s.next=t),r.interleaved=t,yn(e,n)}function Ra(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$u(e,n)}}function Rh(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function co(e,t,n,r){var s=e.updateQueue;Tn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;a=0,d=u=c=null,l=i;do{var m=l.lane,x=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var f=e,w=l;switch(m=t,x=n,w.tag){case 1:if(f=w.payload,typeof f=="function"){h=f.call(x,h,m);break e}h=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=w.payload,m=typeof f=="function"?f.call(x,h,m):f,m==null)break e;h=ye({},h,m);break e;case 2:Tn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else x={eventTime:x,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=x,c=h):d=d.next=x,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);kr|=a,e.lanes=a,e.memoizedState=h}}function Dh(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var Hi={},en=er(Hi),Si=er(Hi),Ci=er(Hi);function pr(e){if(e===Hi)throw Error(F(174));return e}function ed(e,t){switch(de(Ci,t),de(Si,e),de(en,Hi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:yc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=yc(t,e)}me(en),de(en,t)}function us(){me(en),me(Si),me(Ci)}function Cp(e){pr(Ci.current);var t=pr(en.current),n=yc(t,e.type);t!==n&&(de(Si,e),de(en,n))}function td(e){Si.current===e&&(me(en),me(Si))}var pe=er(0);function uo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Al=[];function nd(){for(var e=0;e<Al.length;e++)Al[e]._workInProgressVersionPrimary=null;Al.length=0}var Da=jn.ReactCurrentDispatcher,Ll=jn.ReactCurrentBatchConfig,Cr=0,xe=null,_e=null,Me=null,ho=!1,ri=!1,ki=0,e1=0;function ze(){throw Error(F(321))}function rd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ft(e[n],t[n]))return!1;return!0}function sd(e,t,n,r,s,i){if(Cr=i,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Da.current=e===null||e.memoizedState===null?s1:i1,e=n(r,s),ri){i=0;do{if(ri=!1,ki=0,25<=i)throw Error(F(301));i+=1,Me=_e=null,t.updateQueue=null,Da.current=a1,e=n(r,s)}while(ri)}if(Da.current=fo,t=_e!==null&&_e.next!==null,Cr=0,Me=_e=xe=null,ho=!1,t)throw Error(F(300));return e}function id(){var e=ki!==0;return ki=0,e}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?xe.memoizedState=Me=e:Me=Me.next=e,Me}function Tt(){if(_e===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=_e.next;var t=Me===null?xe.memoizedState:Me.next;if(t!==null)Me=t,_e=e;else{if(e===null)throw Error(F(310));_e=e,e={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},Me===null?xe.memoizedState=Me=e:Me=Me.next=e}return Me}function Ei(e,t){return typeof t=="function"?t(e):t}function Ol(e){var t=Tt(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var r=_e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((Cr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=r):c=c.next=h,xe.lanes|=d,kr|=d}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,Ft(r,t.memoizedState)||(rt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,xe.lanes|=i,kr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function $l(e){var t=Tt(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Ft(i,t.memoizedState)||(rt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function kp(){}function Ep(e,t){var n=xe,r=Tt(),s=t(),i=!Ft(r.memoizedState,s);if(i&&(r.memoizedState=s,rt=!0),r=r.queue,ad(Pp.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Me!==null&&Me.memoizedState.tag&1){if(n.flags|=2048,_i(9,Tp.bind(null,n,r,s,t),void 0,null),Ie===null)throw Error(F(349));Cr&30||_p(n,t,s)}return s}function _p(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Tp(e,t,n,r){t.value=n,t.getSnapshot=r,Mp(t)&&Ip(e)}function Pp(e,t,n){return n(function(){Mp(t)&&Ip(e)})}function Mp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ft(e,n)}catch{return!0}}function Ip(e){var t=yn(e,1);t!==null&&Ot(t,e,1,-1)}function Ah(e){var t=qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:e},t.queue=e,e=e.dispatch=r1.bind(null,xe,e),[t.memoizedState,e]}function _i(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Rp(){return Tt().memoizedState}function Aa(e,t,n,r){var s=qt();xe.flags|=e,s.memoizedState=_i(1|t,n,void 0,r===void 0?null:r)}function qo(e,t,n,r){var s=Tt();r=r===void 0?null:r;var i=void 0;if(_e!==null){var a=_e.memoizedState;if(i=a.destroy,r!==null&&rd(r,a.deps)){s.memoizedState=_i(t,n,i,r);return}}xe.flags|=e,s.memoizedState=_i(1|t,n,i,r)}function Lh(e,t){return Aa(8390656,8,e,t)}function ad(e,t){return qo(2048,8,e,t)}function Dp(e,t){return qo(4,2,e,t)}function Ap(e,t){return qo(4,4,e,t)}function Lp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Op(e,t,n){return n=n!=null?n.concat([e]):null,qo(4,4,Lp.bind(null,t,e),n)}function od(){}function $p(e,t){var n=Tt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&rd(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Fp(e,t){var n=Tt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&rd(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Bp(e,t,n){return Cr&21?(Ft(n,t)||(n=Vg(),xe.lanes|=n,kr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,rt=!0),e.memoizedState=n)}function t1(e,t){var n=ue;ue=n!==0&&4>n?n:4,e(!0);var r=Ll.transition;Ll.transition={};try{e(!1),t()}finally{ue=n,Ll.transition=r}}function zp(){return Tt().memoizedState}function n1(e,t,n){var r=Wn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Up(e))Hp(t,n);else if(n=Np(e,t,n,r),n!==null){var s=Xe();Ot(n,e,r,s),Wp(n,t,r)}}function r1(e,t,n){var r=Wn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Up(e))Hp(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Ft(l,a)){var c=t.interleaved;c===null?(s.next=s,Zu(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Np(e,t,s,r),n!==null&&(s=Xe(),Ot(n,e,r,s),Wp(n,t,r))}}function Up(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function Hp(e,t){ri=ho=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$u(e,n)}}var fo={readContext:_t,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useInsertionEffect:ze,useLayoutEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useMutableSource:ze,useSyncExternalStore:ze,useId:ze,unstable_isNewReconciler:!1},s1={readContext:_t,useCallback:function(e,t){return qt().memoizedState=[e,t===void 0?null:t],e},useContext:_t,useEffect:Lh,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Aa(4194308,4,Lp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Aa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Aa(4,2,e,t)},useMemo:function(e,t){var n=qt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=qt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=n1.bind(null,xe,e),[r.memoizedState,e]},useRef:function(e){var t=qt();return e={current:e},t.memoizedState=e},useState:Ah,useDebugValue:od,useDeferredValue:function(e){return qt().memoizedState=e},useTransition:function(){var e=Ah(!1),t=e[0];return e=t1.bind(null,e[1]),qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=xe,s=qt();if(ge){if(n===void 0)throw Error(F(407));n=n()}else{if(n=t(),Ie===null)throw Error(F(349));Cr&30||_p(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Lh(Pp.bind(null,r,i,e),[e]),r.flags|=2048,_i(9,Tp.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=qt(),t=Ie.identifierPrefix;if(ge){var n=mn,r=fn;n=(r&~(1<<32-Lt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ki++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=e1++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},i1={readContext:_t,useCallback:$p,useContext:_t,useEffect:ad,useImperativeHandle:Op,useInsertionEffect:Dp,useLayoutEffect:Ap,useMemo:Fp,useReducer:Ol,useRef:Rp,useState:function(){return Ol(Ei)},useDebugValue:od,useDeferredValue:function(e){var t=Tt();return Bp(t,_e.memoizedState,e)},useTransition:function(){var e=Ol(Ei)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:kp,useSyncExternalStore:Ep,useId:zp,unstable_isNewReconciler:!1},a1={readContext:_t,useCallback:$p,useContext:_t,useEffect:ad,useImperativeHandle:Op,useInsertionEffect:Dp,useLayoutEffect:Ap,useMemo:Fp,useReducer:$l,useRef:Rp,useState:function(){return $l(Ei)},useDebugValue:od,useDeferredValue:function(e){var t=Tt();return _e===null?t.memoizedState=e:Bp(t,_e.memoizedState,e)},useTransition:function(){var e=$l(Ei)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:kp,useSyncExternalStore:Ep,useId:zp,unstable_isNewReconciler:!1};function Rt(e,t){if(e&&e.defaultProps){t=ye({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Fc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ye({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ko={isMounted:function(e){return(e=e._reactInternals)?Ir(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xe(),s=Wn(e),i=gn(r,s);i.payload=t,n!=null&&(i.callback=n),t=Un(e,i,s),t!==null&&(Ot(t,e,s,r),Ra(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xe(),s=Wn(e),i=gn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Un(e,i,s),t!==null&&(Ot(t,e,s,r),Ra(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xe(),r=Wn(e),s=gn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Un(e,s,r),t!==null&&(Ot(t,e,r,n),Ra(t,e,r))}};function Oh(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!bi(n,r)||!bi(s,i):!0}function Vp(e,t,n){var r=!1,s=Qn,i=t.contextType;return typeof i=="object"&&i!==null?i=_t(i):(s=at(t)?Nr:Ye.current,r=t.contextTypes,i=(r=r!=null)?os(e,s):Qn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ko,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function $h(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ko.enqueueReplaceState(t,t.state,null)}function Bc(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Ju(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=_t(i):(i=at(t)?Nr:Ye.current,s.context=os(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Fc(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ko.enqueueReplaceState(s,s.state,null),co(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ds(e,t){try{var n="",r=t;do n+=Dy(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Fl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function zc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var o1=typeof WeakMap=="function"?WeakMap:Map;function Yp(e,t,n){n=gn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){go||(go=!0,Gc=r),zc(e,t)},n}function qp(e,t,n){n=gn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){zc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){zc(e,t),typeof r!="function"&&(Hn===null?Hn=new Set([this]):Hn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Fh(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new o1;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=w1.bind(null,e,t,n),t.then(e,e))}function Bh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function zh(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=gn(-1,1),t.tag=2,Un(n,t,1))),n.lanes|=1),e)}var l1=jn.ReactCurrentOwner,rt=!1;function Ke(e,t,n,r){t.child=e===null?jp(t,null,n,r):cs(t,e.child,n,r)}function Uh(e,t,n,r,s){n=n.render;var i=t.ref;return ts(t,s),r=sd(e,t,n,r,i,s),n=id(),e!==null&&!rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,vn(e,t,s)):(ge&&n&&Yu(t),t.flags|=1,Ke(e,t,r,s),t.child)}function Hh(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!gd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Kp(e,t,i,r,s)):(e=Fa(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:bi,n(a,r)&&e.ref===t.ref)return vn(e,t,s)}return t.flags|=1,e=Vn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Kp(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(bi(i,r)&&e.ref===t.ref)if(rt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(rt=!0);else return t.lanes=e.lanes,vn(e,t,s)}return Uc(e,t,n,r,s)}function Xp(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(Qr,ft),ft|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,de(Qr,ft),ft|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,de(Qr,ft),ft|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,de(Qr,ft),ft|=r;return Ke(e,t,s,n),t.child}function Qp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Uc(e,t,n,r,s){var i=at(n)?Nr:Ye.current;return i=os(t,i),ts(t,s),n=sd(e,t,n,r,i,s),r=id(),e!==null&&!rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,vn(e,t,s)):(ge&&r&&Yu(t),t.flags|=1,Ke(e,t,n,s),t.child)}function Wh(e,t,n,r,s){if(at(n)){var i=!0;so(t)}else i=!1;if(ts(t,s),t.stateNode===null)La(e,t),Vp(t,n,r),Bc(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=_t(u):(u=at(n)?Nr:Ye.current,u=os(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&$h(t,a,r,u),Tn=!1;var m=t.memoizedState;a.state=m,co(t,r,a,s),c=t.memoizedState,l!==r||m!==c||it.current||Tn?(typeof d=="function"&&(Fc(t,n,d,r),c=t.memoizedState),(l=Tn||Oh(t,n,l,r,m,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Sp(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Rt(t.type,l),a.props=u,h=t.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=_t(c):(c=at(n)?Nr:Ye.current,c=os(t,c));var x=n.getDerivedStateFromProps;(d=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||m!==c)&&$h(t,a,r,c),Tn=!1,m=t.memoizedState,a.state=m,co(t,r,a,s);var f=t.memoizedState;l!==h||m!==f||it.current||Tn?(typeof x=="function"&&(Fc(t,n,x,r),f=t.memoizedState),(u=Tn||Oh(t,n,u,r,m,f,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,f,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,f,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Hc(e,t,n,r,i,s)}function Hc(e,t,n,r,s,i){Qp(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Th(t,n,!1),vn(e,t,i);r=t.stateNode,l1.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=cs(t,e.child,null,i),t.child=cs(t,null,l,i)):Ke(e,t,l,i),t.memoizedState=r.state,s&&Th(t,n,!0),t.child}function Gp(e){var t=e.stateNode;t.pendingContext?_h(e,t.pendingContext,t.pendingContext!==t.context):t.context&&_h(e,t.context,!1),ed(e,t.containerInfo)}function Vh(e,t,n,r,s){return ls(),Ku(s),t.flags|=256,Ke(e,t,n,r),t.child}var Wc={dehydrated:null,treeContext:null,retryLane:0};function Vc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zp(e,t,n){var r=t.pendingProps,s=pe.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),de(pe,s&1),e===null)return Oc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Go(a,r,0,null),e=br(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Vc(n),t.memoizedState=Wc,e):ld(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return c1(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Vn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Vn(l,i):(i=br(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Vc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Wc,r}return i=e.child,e=i.sibling,r=Vn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ld(e,t){return t=Go({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ca(e,t,n,r){return r!==null&&Ku(r),cs(t,e.child,null,n),e=ld(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function c1(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=Fl(Error(F(422))),ca(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Go({mode:"visible",children:r.children},s,0,null),i=br(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&cs(t,e.child,null,a),t.child.memoizedState=Vc(a),t.memoizedState=Wc,i);if(!(t.mode&1))return ca(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(F(419)),r=Fl(i,r,void 0),ca(e,t,a,r)}if(l=(a&e.childLanes)!==0,rt||l){if(r=Ie,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,yn(e,s),Ot(r,e,s,-1))}return md(),r=Fl(Error(F(421))),ca(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=j1.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,mt=zn(s.nextSibling),gt=t,ge=!0,At=null,e!==null&&(jt[Nt++]=fn,jt[Nt++]=mn,jt[Nt++]=Sr,fn=e.id,mn=e.overflow,Sr=t),t=ld(t,r.children),t.flags|=4096,t)}function Yh(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),$c(e.return,t,n)}function Bl(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Jp(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Ke(e,t,r.children,n),r=pe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yh(e,n,t);else if(e.tag===19)Yh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(de(pe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&uo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Bl(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&uo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Bl(t,!0,n,null,i);break;case"together":Bl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function La(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),kr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(F(153));if(t.child!==null){for(e=t.child,n=Vn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Vn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function u1(e,t,n){switch(t.tag){case 3:Gp(t),ls();break;case 5:Cp(t);break;case 1:at(t.type)&&so(t);break;case 4:ed(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;de(oo,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(de(pe,pe.current&1),t.flags|=128,null):n&t.child.childLanes?Zp(e,t,n):(de(pe,pe.current&1),e=vn(e,t,n),e!==null?e.sibling:null);de(pe,pe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Jp(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),de(pe,pe.current),r)break;return null;case 22:case 23:return t.lanes=0,Xp(e,t,n)}return vn(e,t,n)}var e0,Yc,t0,n0;e0=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yc=function(){};t0=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,pr(en.current);var i=null;switch(n){case"input":s=mc(e,s),r=mc(e,r),i=[];break;case"select":s=ye({},s,{value:void 0}),r=ye({},r,{value:void 0}),i=[];break;case"textarea":s=xc(e,s),r=xc(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=no)}vc(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fi.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&he("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};n0=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ts(e,t){if(!ge)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ue(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function d1(e,t,n){var r=t.pendingProps;switch(qu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(t),null;case 1:return at(t.type)&&ro(),Ue(t),null;case 3:return r=t.stateNode,us(),me(it),me(Ye),nd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(oa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,At!==null&&(eu(At),At=null))),Yc(e,t),Ue(t),null;case 5:td(t);var s=pr(Ci.current);if(n=t.type,e!==null&&t.stateNode!=null)t0(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(F(166));return Ue(t),null}if(e=pr(en.current),oa(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Xt]=t,r[Ni]=i,e=(t.mode&1)!==0,n){case"dialog":he("cancel",r),he("close",r);break;case"iframe":case"object":case"embed":he("load",r);break;case"video":case"audio":for(s=0;s<Ws.length;s++)he(Ws[s],r);break;case"source":he("error",r);break;case"img":case"image":case"link":he("error",r),he("load",r);break;case"details":he("toggle",r);break;case"input":th(r,i),he("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},he("invalid",r);break;case"textarea":rh(r,i),he("invalid",r)}vc(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&aa(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&aa(r.textContent,l,e),s=["children",""+l]):fi.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&he("scroll",r)}switch(n){case"input":Zi(r),nh(r,i,!0);break;case"textarea":Zi(r),sh(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=no)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Pg(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Xt]=t,e[Ni]=r,e0(e,t,!1,!1),t.stateNode=e;e:{switch(a=bc(n,r),n){case"dialog":he("cancel",e),he("close",e),s=r;break;case"iframe":case"object":case"embed":he("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ws.length;s++)he(Ws[s],e);s=r;break;case"source":he("error",e),s=r;break;case"img":case"image":case"link":he("error",e),he("load",e),s=r;break;case"details":he("toggle",e),s=r;break;case"input":th(e,r),s=mc(e,r),he("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ye({},r,{value:void 0}),he("invalid",e);break;case"textarea":rh(e,r),s=xc(e,r),he("invalid",e);break;default:s=r}vc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Rg(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Mg(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&mi(e,c):typeof c=="number"&&mi(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&he("scroll",e):c!=null&&Iu(e,i,c,a))}switch(n){case"input":Zi(e),nh(e,r,!1);break;case"textarea":Zi(e),sh(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Xn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Gr(e,!!r.multiple,i,!1):r.defaultValue!=null&&Gr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=no)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ue(t),null;case 6:if(e&&t.stateNode!=null)n0(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(F(166));if(n=pr(Ci.current),pr(en.current),oa(t)){if(r=t.stateNode,n=t.memoizedProps,r[Xt]=t,(i=r.nodeValue!==n)&&(e=gt,e!==null))switch(e.tag){case 3:aa(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&aa(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xt]=t,t.stateNode=r}return Ue(t),null;case 13:if(me(pe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ge&&mt!==null&&t.mode&1&&!(t.flags&128))bp(),ls(),t.flags|=98560,i=!1;else if(i=oa(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(F(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[Xt]=t}else ls(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ue(t),i=!1}else At!==null&&(eu(At),At=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||pe.current&1?Te===0&&(Te=3):md())),t.updateQueue!==null&&(t.flags|=4),Ue(t),null);case 4:return us(),Yc(e,t),e===null&&wi(t.stateNode.containerInfo),Ue(t),null;case 10:return Gu(t.type._context),Ue(t),null;case 17:return at(t.type)&&ro(),Ue(t),null;case 19:if(me(pe),i=t.memoizedState,i===null)return Ue(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)Ts(i,!1);else{if(Te!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=uo(e),a!==null){for(t.flags|=128,Ts(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return de(pe,pe.current&1|2),t.child}e=e.sibling}i.tail!==null&&be()>hs&&(t.flags|=128,r=!0,Ts(i,!1),t.lanes=4194304)}else{if(!r)if(e=uo(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ts(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ge)return Ue(t),null}else 2*be()-i.renderingStartTime>hs&&n!==1073741824&&(t.flags|=128,r=!0,Ts(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=be(),t.sibling=null,n=pe.current,de(pe,r?n&1|2:n&1),t):(Ue(t),null);case 22:case 23:return fd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ft&1073741824&&(Ue(t),t.subtreeFlags&6&&(t.flags|=8192)):Ue(t),null;case 24:return null;case 25:return null}throw Error(F(156,t.tag))}function h1(e,t){switch(qu(t),t.tag){case 1:return at(t.type)&&ro(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return us(),me(it),me(Ye),nd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return td(t),null;case 13:if(me(pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(F(340));ls()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return me(pe),null;case 4:return us(),null;case 10:return Gu(t.type._context),null;case 22:case 23:return fd(),null;case 24:return null;default:return null}}var ua=!1,He=!1,f1=typeof WeakSet=="function"?WeakSet:Set,V=null;function Xr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ve(e,t,r)}else n.current=null}function qc(e,t,n){try{n()}catch(r){ve(e,t,r)}}var qh=!1;function m1(e,t){if(Pc=Ja,e=op(),Vu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var x;h!==n||s!==0&&h.nodeType!==3||(l=a+s),h!==i||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(x=h.firstChild)!==null;)m=h,h=x;for(;;){if(h===e)break t;if(m===n&&++u===s&&(l=a),m===i&&++d===r&&(c=a),(x=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mc={focusedElem:e,selectionRange:n},Ja=!1,V=t;V!==null;)if(t=V,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,V=e;else for(;V!==null;){t=V;try{var f=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var w=f.memoizedProps,b=f.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?w:Rt(t.type,w),b);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(j){ve(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,V=e;break}V=t.return}return f=qh,qh=!1,f}function si(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&qc(t,n,i)}s=s.next}while(s!==r)}}function Xo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Kc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function r0(e){var t=e.alternate;t!==null&&(e.alternate=null,r0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xt],delete t[Ni],delete t[Dc],delete t[Qv],delete t[Gv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function s0(e){return e.tag===5||e.tag===3||e.tag===4}function Kh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||s0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=no));else if(r!==4&&(e=e.child,e!==null))for(Xc(e,t,n),e=e.sibling;e!==null;)Xc(e,t,n),e=e.sibling}function Qc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Qc(e,t,n),e=e.sibling;e!==null;)Qc(e,t,n),e=e.sibling}var Ae=null,Dt=!1;function Cn(e,t,n){for(n=n.child;n!==null;)i0(e,t,n),n=n.sibling}function i0(e,t,n){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(zo,n)}catch{}switch(n.tag){case 5:He||Xr(n,t);case 6:var r=Ae,s=Dt;Ae=null,Cn(e,t,n),Ae=r,Dt=s,Ae!==null&&(Dt?(e=Ae,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ae.removeChild(n.stateNode));break;case 18:Ae!==null&&(Dt?(e=Ae,n=n.stateNode,e.nodeType===8?Rl(e.parentNode,n):e.nodeType===1&&Rl(e,n),yi(e)):Rl(Ae,n.stateNode));break;case 4:r=Ae,s=Dt,Ae=n.stateNode.containerInfo,Dt=!0,Cn(e,t,n),Ae=r,Dt=s;break;case 0:case 11:case 14:case 15:if(!He&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&qc(n,t,a),s=s.next}while(s!==r)}Cn(e,t,n);break;case 1:if(!He&&(Xr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ve(n,t,l)}Cn(e,t,n);break;case 21:Cn(e,t,n);break;case 22:n.mode&1?(He=(r=He)||n.memoizedState!==null,Cn(e,t,n),He=r):Cn(e,t,n);break;default:Cn(e,t,n)}}function Xh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new f1),t.forEach(function(r){var s=N1.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function It(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ae=l.stateNode,Dt=!1;break e;case 3:Ae=l.stateNode.containerInfo,Dt=!0;break e;case 4:Ae=l.stateNode.containerInfo,Dt=!0;break e}l=l.return}if(Ae===null)throw Error(F(160));i0(i,a,s),Ae=null,Dt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ve(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)a0(t,e),t=t.sibling}function a0(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(It(t,e),Ht(e),r&4){try{si(3,e,e.return),Xo(3,e)}catch(w){ve(e,e.return,w)}try{si(5,e,e.return)}catch(w){ve(e,e.return,w)}}break;case 1:It(t,e),Ht(e),r&512&&n!==null&&Xr(n,n.return);break;case 5:if(It(t,e),Ht(e),r&512&&n!==null&&Xr(n,n.return),e.flags&32){var s=e.stateNode;try{mi(s,"")}catch(w){ve(e,e.return,w)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&_g(s,i),bc(l,a);var u=bc(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?Rg(s,h):d==="dangerouslySetInnerHTML"?Mg(s,h):d==="children"?mi(s,h):Iu(s,d,h,u)}switch(l){case"input":gc(s,i);break;case"textarea":Tg(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Gr(s,!!i.multiple,x,!1):m!==!!i.multiple&&(i.defaultValue!=null?Gr(s,!!i.multiple,i.defaultValue,!0):Gr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ni]=i}catch(w){ve(e,e.return,w)}}break;case 6:if(It(t,e),Ht(e),r&4){if(e.stateNode===null)throw Error(F(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){ve(e,e.return,w)}}break;case 3:if(It(t,e),Ht(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{yi(t.containerInfo)}catch(w){ve(e,e.return,w)}break;case 4:It(t,e),Ht(e);break;case 13:It(t,e),Ht(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dd=be())),r&4&&Xh(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(He=(u=He)||d,It(t,e),He=u):It(t,e),Ht(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(V=e,d=e.child;d!==null;){for(h=V=d;V!==null;){switch(m=V,x=m.child,m.tag){case 0:case 11:case 14:case 15:si(4,m,m.return);break;case 1:Xr(m,m.return);var f=m.stateNode;if(typeof f.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(w){ve(r,n,w)}}break;case 5:Xr(m,m.return);break;case 22:if(m.memoizedState!==null){Gh(h);continue}}x!==null?(x.return=m,V=x):Gh(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ig("display",a))}catch(w){ve(e,e.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){ve(e,e.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:It(t,e),Ht(e),r&4&&Xh(e);break;case 21:break;default:It(t,e),Ht(e)}}function Ht(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(s0(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(mi(s,""),r.flags&=-33);var i=Kh(e);Qc(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Kh(e);Xc(e,l,a);break;default:throw Error(F(161))}}catch(c){ve(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function g1(e,t,n){V=e,o0(e)}function o0(e,t,n){for(var r=(e.mode&1)!==0;V!==null;){var s=V,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ua;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||He;l=ua;var u=He;if(ua=a,(He=c)&&!u)for(V=s;V!==null;)a=V,c=a.child,a.tag===22&&a.memoizedState!==null?Zh(s):c!==null?(c.return=a,V=c):Zh(s);for(;i!==null;)V=i,o0(i),i=i.sibling;V=s,ua=l,He=u}Qh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,V=i):Qh(e)}}function Qh(e){for(;V!==null;){var t=V;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:He||Xo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!He)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Rt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Dh(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Dh(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&yi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}He||t.flags&512&&Kc(t)}catch(m){ve(t,t.return,m)}}if(t===e){V=null;break}if(n=t.sibling,n!==null){n.return=t.return,V=n;break}V=t.return}}function Gh(e){for(;V!==null;){var t=V;if(t===e){V=null;break}var n=t.sibling;if(n!==null){n.return=t.return,V=n;break}V=t.return}}function Zh(e){for(;V!==null;){var t=V;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Xo(4,t)}catch(c){ve(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){ve(t,s,c)}}var i=t.return;try{Kc(t)}catch(c){ve(t,i,c)}break;case 5:var a=t.return;try{Kc(t)}catch(c){ve(t,a,c)}}}catch(c){ve(t,t.return,c)}if(t===e){V=null;break}var l=t.sibling;if(l!==null){l.return=t.return,V=l;break}V=t.return}}var p1=Math.ceil,mo=jn.ReactCurrentDispatcher,cd=jn.ReactCurrentOwner,kt=jn.ReactCurrentBatchConfig,ne=0,Ie=null,Ne=null,$e=0,ft=0,Qr=er(0),Te=0,Ti=null,kr=0,Qo=0,ud=0,ii=null,tt=null,dd=0,hs=1/0,un=null,go=!1,Gc=null,Hn=null,da=!1,Dn=null,po=0,ai=0,Zc=null,Oa=-1,$a=0;function Xe(){return ne&6?be():Oa!==-1?Oa:Oa=be()}function Wn(e){return e.mode&1?ne&2&&$e!==0?$e&-$e:Jv.transition!==null?($a===0&&($a=Vg()),$a):(e=ue,e!==0||(e=window.event,e=e===void 0?16:Zg(e.type)),e):1}function Ot(e,t,n,r){if(50<ai)throw ai=0,Zc=null,Error(F(185));Bi(e,n,r),(!(ne&2)||e!==Ie)&&(e===Ie&&(!(ne&2)&&(Qo|=n),Te===4&&Mn(e,$e)),ot(e,r),n===1&&ne===0&&!(t.mode&1)&&(hs=be()+500,Yo&&tr()))}function ot(e,t){var n=e.callbackNode;Jy(e,t);var r=Za(e,e===Ie?$e:0);if(r===0)n!==null&&oh(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&oh(n),t===1)e.tag===0?Zv(Jh.bind(null,e)):xp(Jh.bind(null,e)),Kv(function(){!(ne&6)&&tr()}),n=null;else{switch(Yg(r)){case 1:n=Ou;break;case 4:n=Hg;break;case 16:n=Ga;break;case 536870912:n=Wg;break;default:n=Ga}n=g0(n,l0.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function l0(e,t){if(Oa=-1,$a=0,ne&6)throw Error(F(327));var n=e.callbackNode;if(ns()&&e.callbackNode!==n)return null;var r=Za(e,e===Ie?$e:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=xo(e,r);else{t=r;var s=ne;ne|=2;var i=u0();(Ie!==e||$e!==t)&&(un=null,hs=be()+500,vr(e,t));do try{v1();break}catch(l){c0(e,l)}while(!0);Qu(),mo.current=i,ne=s,Ne!==null?t=0:(Ie=null,$e=0,t=Te)}if(t!==0){if(t===2&&(s=Cc(e),s!==0&&(r=s,t=Jc(e,s))),t===1)throw n=Ti,vr(e,0),Mn(e,r),ot(e,be()),n;if(t===6)Mn(e,r);else{if(s=e.current.alternate,!(r&30)&&!x1(s)&&(t=xo(e,r),t===2&&(i=Cc(e),i!==0&&(r=i,t=Jc(e,i))),t===1))throw n=Ti,vr(e,0),Mn(e,r),ot(e,be()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(F(345));case 2:dr(e,tt,un);break;case 3:if(Mn(e,r),(r&130023424)===r&&(t=dd+500-be(),10<t)){if(Za(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Xe(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Rc(dr.bind(null,e,tt,un),t);break}dr(e,tt,un);break;case 4:if(Mn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Lt(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*p1(r/1960))-r,10<r){e.timeoutHandle=Rc(dr.bind(null,e,tt,un),r);break}dr(e,tt,un);break;case 5:dr(e,tt,un);break;default:throw Error(F(329))}}}return ot(e,be()),e.callbackNode===n?l0.bind(null,e):null}function Jc(e,t){var n=ii;return e.current.memoizedState.isDehydrated&&(vr(e,t).flags|=256),e=xo(e,t),e!==2&&(t=tt,tt=n,t!==null&&eu(t)),e}function eu(e){tt===null?tt=e:tt.push.apply(tt,e)}function x1(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ft(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mn(e,t){for(t&=~ud,t&=~Qo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Lt(t),r=1<<n;e[n]=-1,t&=~r}}function Jh(e){if(ne&6)throw Error(F(327));ns();var t=Za(e,0);if(!(t&1))return ot(e,be()),null;var n=xo(e,t);if(e.tag!==0&&n===2){var r=Cc(e);r!==0&&(t=r,n=Jc(e,r))}if(n===1)throw n=Ti,vr(e,0),Mn(e,t),ot(e,be()),n;if(n===6)throw Error(F(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,dr(e,tt,un),ot(e,be()),null}function hd(e,t){var n=ne;ne|=1;try{return e(t)}finally{ne=n,ne===0&&(hs=be()+500,Yo&&tr())}}function Er(e){Dn!==null&&Dn.tag===0&&!(ne&6)&&ns();var t=ne;ne|=1;var n=kt.transition,r=ue;try{if(kt.transition=null,ue=1,e)return e()}finally{ue=r,kt.transition=n,ne=t,!(ne&6)&&tr()}}function fd(){ft=Qr.current,me(Qr)}function vr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,qv(n)),Ne!==null)for(n=Ne.return;n!==null;){var r=n;switch(qu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ro();break;case 3:us(),me(it),me(Ye),nd();break;case 5:td(r);break;case 4:us();break;case 13:me(pe);break;case 19:me(pe);break;case 10:Gu(r.type._context);break;case 22:case 23:fd()}n=n.return}if(Ie=e,Ne=e=Vn(e.current,null),$e=ft=t,Te=0,Ti=null,ud=Qo=kr=0,tt=ii=null,gr!==null){for(t=0;t<gr.length;t++)if(n=gr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}gr=null}return e}function c0(e,t){do{var n=Ne;try{if(Qu(),Da.current=fo,ho){for(var r=xe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ho=!1}if(Cr=0,Me=_e=xe=null,ri=!1,ki=0,cd.current=null,n===null||n.return===null){Te=1,Ti=t,Ne=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=$e,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var x=Bh(a);if(x!==null){x.flags&=-257,zh(x,a,l,i,t),x.mode&1&&Fh(i,u,t),t=x,c=u;var f=t.updateQueue;if(f===null){var w=new Set;w.add(c),t.updateQueue=w}else f.add(c);break e}else{if(!(t&1)){Fh(i,u,t),md();break e}c=Error(F(426))}}else if(ge&&l.mode&1){var b=Bh(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),zh(b,a,l,i,t),Ku(ds(c,l));break e}}i=c=ds(c,l),Te!==4&&(Te=2),ii===null?ii=[i]:ii.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Yp(i,c,t);Rh(i,g);break e;case 1:l=c;var y=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Hn===null||!Hn.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=qp(i,l,t);Rh(i,j);break e}}i=i.return}while(i!==null)}h0(n)}catch(N){t=N,Ne===n&&n!==null&&(Ne=n=n.return);continue}break}while(!0)}function u0(){var e=mo.current;return mo.current=fo,e===null?fo:e}function md(){(Te===0||Te===3||Te===2)&&(Te=4),Ie===null||!(kr&268435455)&&!(Qo&268435455)||Mn(Ie,$e)}function xo(e,t){var n=ne;ne|=2;var r=u0();(Ie!==e||$e!==t)&&(un=null,vr(e,t));do try{y1();break}catch(s){c0(e,s)}while(!0);if(Qu(),ne=n,mo.current=r,Ne!==null)throw Error(F(261));return Ie=null,$e=0,Te}function y1(){for(;Ne!==null;)d0(Ne)}function v1(){for(;Ne!==null&&!Wy();)d0(Ne)}function d0(e){var t=m0(e.alternate,e,ft);e.memoizedProps=e.pendingProps,t===null?h0(e):Ne=t,cd.current=null}function h0(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=h1(n,t),n!==null){n.flags&=32767,Ne=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Te=6,Ne=null;return}}else if(n=d1(n,t,ft),n!==null){Ne=n;return}if(t=t.sibling,t!==null){Ne=t;return}Ne=t=e}while(t!==null);Te===0&&(Te=5)}function dr(e,t,n){var r=ue,s=kt.transition;try{kt.transition=null,ue=1,b1(e,t,n,r)}finally{kt.transition=s,ue=r}return null}function b1(e,t,n,r){do ns();while(Dn!==null);if(ne&6)throw Error(F(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(F(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(ev(e,i),e===Ie&&(Ne=Ie=null,$e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||da||(da=!0,g0(Ga,function(){return ns(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=kt.transition,kt.transition=null;var a=ue;ue=1;var l=ne;ne|=4,cd.current=null,m1(e,n),a0(n,e),Bv(Mc),Ja=!!Pc,Mc=Pc=null,e.current=n,g1(n),Vy(),ne=l,ue=a,kt.transition=i}else e.current=n;if(da&&(da=!1,Dn=e,po=s),i=e.pendingLanes,i===0&&(Hn=null),Ky(n.stateNode),ot(e,be()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(go)throw go=!1,e=Gc,Gc=null,e;return po&1&&e.tag!==0&&ns(),i=e.pendingLanes,i&1?e===Zc?ai++:(ai=0,Zc=e):ai=0,tr(),null}function ns(){if(Dn!==null){var e=Yg(po),t=kt.transition,n=ue;try{if(kt.transition=null,ue=16>e?16:e,Dn===null)var r=!1;else{if(e=Dn,Dn=null,po=0,ne&6)throw Error(F(331));var s=ne;for(ne|=4,V=e.current;V!==null;){var i=V,a=i.child;if(V.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(V=u;V!==null;){var d=V;switch(d.tag){case 0:case 11:case 15:si(8,d,i)}var h=d.child;if(h!==null)h.return=d,V=h;else for(;V!==null;){d=V;var m=d.sibling,x=d.return;if(r0(d),d===u){V=null;break}if(m!==null){m.return=x,V=m;break}V=x}}}var f=i.alternate;if(f!==null){var w=f.child;if(w!==null){f.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}V=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,V=a;else e:for(;V!==null;){if(i=V,i.flags&2048)switch(i.tag){case 0:case 11:case 15:si(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,V=g;break e}V=i.return}}var y=e.current;for(V=y;V!==null;){a=V;var p=a.child;if(a.subtreeFlags&2064&&p!==null)p.return=a,V=p;else e:for(a=y;V!==null;){if(l=V,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Xo(9,l)}}catch(N){ve(l,l.return,N)}if(l===a){V=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,V=j;break e}V=l.return}}if(ne=s,tr(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(zo,e)}catch{}r=!0}return r}finally{ue=n,kt.transition=t}}return!1}function ef(e,t,n){t=ds(n,t),t=Yp(e,t,1),e=Un(e,t,1),t=Xe(),e!==null&&(Bi(e,1,t),ot(e,t))}function ve(e,t,n){if(e.tag===3)ef(e,e,n);else for(;t!==null;){if(t.tag===3){ef(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Hn===null||!Hn.has(r))){e=ds(n,e),e=qp(t,e,1),t=Un(t,e,1),e=Xe(),t!==null&&(Bi(t,1,e),ot(t,e));break}}t=t.return}}function w1(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Xe(),e.pingedLanes|=e.suspendedLanes&n,Ie===e&&($e&n)===n&&(Te===4||Te===3&&($e&130023424)===$e&&500>be()-dd?vr(e,0):ud|=n),ot(e,t)}function f0(e,t){t===0&&(e.mode&1?(t=ta,ta<<=1,!(ta&130023424)&&(ta=4194304)):t=1);var n=Xe();e=yn(e,t),e!==null&&(Bi(e,t,n),ot(e,n))}function j1(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),f0(e,n)}function N1(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(t),f0(e,n)}var m0;m0=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||it.current)rt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return rt=!1,u1(e,t,n);rt=!!(e.flags&131072)}else rt=!1,ge&&t.flags&1048576&&yp(t,ao,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;La(e,t),e=t.pendingProps;var s=os(t,Ye.current);ts(t,n),s=sd(null,t,r,e,s,n);var i=id();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,at(r)?(i=!0,so(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ju(t),s.updater=Ko,t.stateNode=s,s._reactInternals=t,Bc(t,r,e,n),t=Hc(null,t,r,!0,i,n)):(t.tag=0,ge&&i&&Yu(t),Ke(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(La(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=C1(r),e=Rt(r,e),s){case 0:t=Uc(null,t,r,e,n);break e;case 1:t=Wh(null,t,r,e,n);break e;case 11:t=Uh(null,t,r,e,n);break e;case 14:t=Hh(null,t,r,Rt(r.type,e),n);break e}throw Error(F(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Rt(r,s),Uc(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Rt(r,s),Wh(e,t,r,s,n);case 3:e:{if(Gp(t),e===null)throw Error(F(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Sp(e,t),co(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ds(Error(F(423)),t),t=Vh(e,t,r,n,s);break e}else if(r!==s){s=ds(Error(F(424)),t),t=Vh(e,t,r,n,s);break e}else for(mt=zn(t.stateNode.containerInfo.firstChild),gt=t,ge=!0,At=null,n=jp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ls(),r===s){t=vn(e,t,n);break e}Ke(e,t,r,n)}t=t.child}return t;case 5:return Cp(t),e===null&&Oc(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,Ic(r,s)?a=null:i!==null&&Ic(r,i)&&(t.flags|=32),Qp(e,t),Ke(e,t,a,n),t.child;case 6:return e===null&&Oc(t),null;case 13:return Zp(e,t,n);case 4:return ed(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=cs(t,null,r,n):Ke(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Rt(r,s),Uh(e,t,r,s,n);case 7:return Ke(e,t,t.pendingProps,n),t.child;case 8:return Ke(e,t,t.pendingProps.children,n),t.child;case 12:return Ke(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,de(oo,r._currentValue),r._currentValue=a,i!==null)if(Ft(i.value,a)){if(i.children===s.children&&!it.current){t=vn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=gn(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),$c(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(F(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),$c(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Ke(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ts(t,n),s=_t(s),r=r(s),t.flags|=1,Ke(e,t,r,n),t.child;case 14:return r=t.type,s=Rt(r,t.pendingProps),s=Rt(r.type,s),Hh(e,t,r,s,n);case 15:return Kp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Rt(r,s),La(e,t),t.tag=1,at(r)?(e=!0,so(t)):e=!1,ts(t,n),Vp(t,r,s),Bc(t,r,s,n),Hc(null,t,r,!0,e,n);case 19:return Jp(e,t,n);case 22:return Xp(e,t,n)}throw Error(F(156,t.tag))};function g0(e,t){return Ug(e,t)}function S1(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(e,t,n,r){return new S1(e,t,n,r)}function gd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function C1(e){if(typeof e=="function")return gd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Du)return 11;if(e===Au)return 14}return 2}function Vn(e,t){var n=e.alternate;return n===null?(n=St(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fa(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")gd(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Br:return br(n.children,s,i,t);case Ru:a=8,s|=8;break;case uc:return e=St(12,n,t,s|2),e.elementType=uc,e.lanes=i,e;case dc:return e=St(13,n,t,s),e.elementType=dc,e.lanes=i,e;case hc:return e=St(19,n,t,s),e.elementType=hc,e.lanes=i,e;case Cg:return Go(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ng:a=10;break e;case Sg:a=9;break e;case Du:a=11;break e;case Au:a=14;break e;case _n:a=16,r=null;break e}throw Error(F(130,e==null?e:typeof e,""))}return t=St(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function br(e,t,n,r){return e=St(7,e,r,t),e.lanes=n,e}function Go(e,t,n,r){return e=St(22,e,r,t),e.elementType=Cg,e.lanes=n,e.stateNode={isHidden:!1},e}function zl(e,t,n){return e=St(6,e,null,t),e.lanes=n,e}function Ul(e,t,n){return t=St(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function k1(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jl(0),this.expirationTimes=jl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function pd(e,t,n,r,s,i,a,l,c){return e=new k1(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=St(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ju(i),e}function E1(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function p0(e){if(!e)return Qn;e=e._reactInternals;e:{if(Ir(e)!==e||e.tag!==1)throw Error(F(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(at(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(F(171))}if(e.tag===1){var n=e.type;if(at(n))return pp(e,n,t)}return t}function x0(e,t,n,r,s,i,a,l,c){return e=pd(n,r,!0,e,s,i,a,l,c),e.context=p0(null),n=e.current,r=Xe(),s=Wn(n),i=gn(r,s),i.callback=t??null,Un(n,i,s),e.current.lanes=s,Bi(e,s,r),ot(e,r),e}function Zo(e,t,n,r){var s=t.current,i=Xe(),a=Wn(s);return n=p0(n),t.context===null?t.context=n:t.pendingContext=n,t=gn(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Un(s,t,a),e!==null&&(Ot(e,s,a,i),Ra(e,s,a)),a}function yo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function xd(e,t){tf(e,t),(e=e.alternate)&&tf(e,t)}function _1(){return null}var y0=typeof reportError=="function"?reportError:function(e){console.error(e)};function yd(e){this._internalRoot=e}Jo.prototype.render=yd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(F(409));Zo(e,t,null,null)};Jo.prototype.unmount=yd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Er(function(){Zo(null,e,null,null)}),t[xn]=null}};function Jo(e){this._internalRoot=e}Jo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Xg();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pn.length&&t!==0&&t<Pn[n].priority;n++);Pn.splice(n,0,e),n===0&&Gg(e)}};function vd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function el(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function nf(){}function T1(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=yo(a);i.call(u)}}var a=x0(t,r,e,0,null,!1,!1,"",nf);return e._reactRootContainer=a,e[xn]=a.current,wi(e.nodeType===8?e.parentNode:e),Er(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=yo(c);l.call(u)}}var c=pd(e,0,!1,null,null,!1,!1,"",nf);return e._reactRootContainer=c,e[xn]=c.current,wi(e.nodeType===8?e.parentNode:e),Er(function(){Zo(t,c,n,r)}),c}function tl(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=yo(a);l.call(c)}}Zo(t,a,e,s)}else a=T1(n,t,e,s,r);return yo(a)}qg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Hs(t.pendingLanes);n!==0&&($u(t,n|1),ot(t,be()),!(ne&6)&&(hs=be()+500,tr()))}break;case 13:Er(function(){var r=yn(e,1);if(r!==null){var s=Xe();Ot(r,e,1,s)}}),xd(e,1)}};Fu=function(e){if(e.tag===13){var t=yn(e,134217728);if(t!==null){var n=Xe();Ot(t,e,134217728,n)}xd(e,134217728)}};Kg=function(e){if(e.tag===13){var t=Wn(e),n=yn(e,t);if(n!==null){var r=Xe();Ot(n,e,t,r)}xd(e,t)}};Xg=function(){return ue};Qg=function(e,t){var n=ue;try{return ue=e,t()}finally{ue=n}};jc=function(e,t,n){switch(t){case"input":if(gc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Vo(r);if(!s)throw Error(F(90));Eg(r),gc(r,s)}}}break;case"textarea":Tg(e,n);break;case"select":t=n.value,t!=null&&Gr(e,!!n.multiple,t,!1)}};Lg=hd;Og=Er;var P1={usingClientEntryPoint:!1,Events:[Ui,Wr,Vo,Dg,Ag,hd]},Ps={findFiberByHostInstance:mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},M1={bundleType:Ps.bundleType,version:Ps.version,rendererPackageName:Ps.rendererPackageName,rendererConfig:Ps.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bg(e),e===null?null:e.stateNode},findFiberByHostInstance:Ps.findFiberByHostInstance||_1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ha=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ha.isDisabled&&ha.supportsFiber)try{zo=ha.inject(M1),Jt=ha}catch{}}yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P1;yt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vd(t))throw Error(F(200));return E1(e,t,null,n)};yt.createRoot=function(e,t){if(!vd(e))throw Error(F(299));var n=!1,r="",s=y0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=pd(e,1,!1,null,null,n,!1,r,s),e[xn]=t.current,wi(e.nodeType===8?e.parentNode:e),new yd(t)};yt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(F(188)):(e=Object.keys(e).join(","),Error(F(268,e)));return e=Bg(t),e=e===null?null:e.stateNode,e};yt.flushSync=function(e){return Er(e)};yt.hydrate=function(e,t,n){if(!el(t))throw Error(F(200));return tl(null,e,t,!0,n)};yt.hydrateRoot=function(e,t,n){if(!vd(e))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=y0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=x0(t,null,e,1,n??null,s,!1,i,a),e[xn]=t.current,wi(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Jo(t)};yt.render=function(e,t,n){if(!el(t))throw Error(F(200));return tl(null,e,t,!1,n)};yt.unmountComponentAtNode=function(e){if(!el(e))throw Error(F(40));return e._reactRootContainer?(Er(function(){tl(null,null,e,!1,function(){e._reactRootContainer=null,e[xn]=null})}),!0):!1};yt.unstable_batchedUpdates=hd;yt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!el(n))throw Error(F(200));if(e==null||e._reactInternals===void 0)throw Error(F(38));return tl(e,t,n,!1,r)};yt.version="18.3.1-next-f1338f8080-20240426";function v0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(v0)}catch(e){console.error(e)}}v0(),vg.exports=yt;var I1=vg.exports,rf=I1;lc.createRoot=rf.createRoot,lc.hydrateRoot=rf.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pi(){return Pi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pi.apply(this,arguments)}var An;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(An||(An={}));const sf="popstate";function R1(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:a,hash:l}=r.location;return tu("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:vo(s)}return A1(t,n,null,e)}function je(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function b0(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function D1(){return Math.random().toString(36).substr(2,8)}function af(e,t){return{usr:e.state,key:e.key,idx:t}}function tu(e,t,n,r){return n===void 0&&(n=null),Pi({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ys(t):t,{state:n,key:t&&t.key||r||D1()})}function vo(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ys(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function A1(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=An.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(Pi({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=An.Pop;let b=d(),g=b==null?null:b-u;u=b,c&&c({action:l,location:w.location,delta:g})}function m(b,g){l=An.Push;let y=tu(w.location,b,g);u=d()+1;let p=af(y,u),j=w.createHref(y);try{a.pushState(p,"",j)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(j)}i&&c&&c({action:l,location:w.location,delta:1})}function x(b,g){l=An.Replace;let y=tu(w.location,b,g);u=d();let p=af(y,u),j=w.createHref(y);a.replaceState(p,"",j),i&&c&&c({action:l,location:w.location,delta:0})}function f(b){let g=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof b=="string"?b:vo(b);return y=y.replace(/ $/,"%20"),je(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let w={get action(){return l},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(sf,h),c=b,()=>{s.removeEventListener(sf,h),c=null}},createHref(b){return t(s,b)},createURL:f,encodeLocation(b){let g=f(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:x,go(b){return a.go(b)}};return w}var of;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(of||(of={}));function L1(e,t,n){return n===void 0&&(n="/"),O1(e,t,n,!1)}function O1(e,t,n,r){let s=typeof t=="string"?ys(t):t,i=bd(s.pathname||"/",n);if(i==null)return null;let a=w0(e);$1(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=X1(i);l=q1(a[c],u,r)}return l}function w0(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(je(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Yn([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(je(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),w0(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:V1(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of j0(i.path))s(i,a,c)}),t}function j0(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=j0(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function $1(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Y1(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const F1=/^:[\w-]+$/,B1=3,z1=2,U1=1,H1=10,W1=-2,lf=e=>e==="*";function V1(e,t){let n=e.split("/"),r=n.length;return n.some(lf)&&(r+=W1),t&&(r+=z1),n.filter(s=>!lf(s)).reduce((s,i)=>s+(F1.test(i)?B1:i===""?U1:H1),r)}function Y1(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function q1(e,t,n){let{routesMeta:r}=e,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=cf({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=cf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:Yn([i,h.pathname]),pathnameBase:J1(Yn([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=Yn([i,h.pathnameBase]))}return a}function cf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=K1(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:m,isOptional:x}=d;if(m==="*"){let w=l[h]||"";a=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const f=l[h];return x&&!f?u[m]=void 0:u[m]=(f||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function K1(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),b0(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function X1(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return b0(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function bd(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Q1(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?ys(e):e;return{pathname:n?n.startsWith("/")?n:G1(n,t):t,search:eb(r),hash:tb(s)}}function G1(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Hl(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Z1(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function wd(e,t){let n=Z1(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function jd(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=ys(e):(s=Pi({},e),je(!s.pathname||!s.pathname.includes("?"),Hl("?","pathname","search",s)),je(!s.pathname||!s.pathname.includes("#"),Hl("#","pathname","hash",s)),je(!s.search||!s.search.includes("#"),Hl("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let h=t.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=Q1(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Yn=e=>e.join("/").replace(/\/\/+/g,"/"),J1=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),eb=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,tb=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function nb(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const N0=["post","put","patch","delete"];new Set(N0);const rb=["get",...N0];new Set(rb);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mi(){return Mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mi.apply(this,arguments)}const Nd=v.createContext(null),sb=v.createContext(null),nr=v.createContext(null),nl=v.createContext(null),rn=v.createContext({outlet:null,matches:[],isDataRoute:!1}),S0=v.createContext(null);function ib(e,t){let{relative:n}=t===void 0?{}:t;vs()||je(!1);let{basename:r,navigator:s}=v.useContext(nr),{hash:i,pathname:a,search:l}=k0(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Yn([r,a])),s.createHref({pathname:c,search:l,hash:i})}function vs(){return v.useContext(nl)!=null}function Nn(){return vs()||je(!1),v.useContext(nl).location}function C0(e){v.useContext(nr).static||v.useLayoutEffect(e)}function se(){let{isDataRoute:e}=v.useContext(rn);return e?bb():ab()}function ab(){vs()||je(!1);let e=v.useContext(Nd),{basename:t,future:n,navigator:r}=v.useContext(nr),{matches:s}=v.useContext(rn),{pathname:i}=Nn(),a=JSON.stringify(wd(s,n.v7_relativeSplatPath)),l=v.useRef(!1);return C0(()=>{l.current=!0}),v.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=jd(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Yn([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,a,i,e])}const ob=v.createContext(null);function lb(e){let t=v.useContext(rn).outlet;return t&&v.createElement(ob.Provider,{value:e},t)}function Sn(){let{matches:e}=v.useContext(rn),t=e[e.length-1];return t?t.params:{}}function k0(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=v.useContext(nr),{matches:s}=v.useContext(rn),{pathname:i}=Nn(),a=JSON.stringify(wd(s,r.v7_relativeSplatPath));return v.useMemo(()=>jd(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function cb(e,t){return ub(e,t)}function ub(e,t,n,r){vs()||je(!1);let{navigator:s}=v.useContext(nr),{matches:i}=v.useContext(rn),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Nn(),d;if(t){var h;let b=typeof t=="string"?ys(t):t;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||je(!1),d=b}else d=u;let m=d.pathname||"/",x=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let f=L1(e,{pathname:x}),w=gb(f&&f.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Yn([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Yn([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return t&&w?v.createElement(nl.Provider,{value:{location:Mi({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:An.Pop}},w):w}function db(){let e=vb(),t=nb(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),n?v.createElement("pre",{style:s},n):null,null)}const hb=v.createElement(db,null);class fb extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?v.createElement(rn.Provider,{value:this.props.routeContext},v.createElement(S0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mb(e){let{routeContext:t,match:n,children:r}=e,s=v.useContext(Nd);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(rn.Provider,{value:t},r)}function gb(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||je(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:x}=n,f=h.route.loader&&m[h.route.id]===void 0&&(!x||x[h.route.id]===void 0);if(h.route.lazy||f){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,m)=>{let x,f=!1,w=null,b=null;n&&(x=l&&h.route.id?l[h.route.id]:void 0,w=h.route.errorElement||hb,c&&(u<0&&m===0?(f=!0,b=null):u===m&&(f=!0,b=h.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,m+1)),y=()=>{let p;return x?p=w:f?p=b:h.route.Component?p=v.createElement(h.route.Component,null):h.route.element?p=h.route.element:p=d,v.createElement(mb,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:n!=null},children:p})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?v.createElement(fb,{location:n.location,revalidation:n.revalidation,component:w,error:x,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}var E0=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(E0||{}),bo=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(bo||{});function pb(e){let t=v.useContext(Nd);return t||je(!1),t}function xb(e){let t=v.useContext(sb);return t||je(!1),t}function yb(e){let t=v.useContext(rn);return t||je(!1),t}function _0(e){let t=yb(),n=t.matches[t.matches.length-1];return n.route.id||je(!1),n.route.id}function vb(){var e;let t=v.useContext(S0),n=xb(bo.UseRouteError),r=_0(bo.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function bb(){let{router:e}=pb(E0.UseNavigateStable),t=_0(bo.UseNavigateStable),n=v.useRef(!1);return C0(()=>{n.current=!0}),v.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Mi({fromRouteId:t},i)))},[e,t])}const uf={};function wb(e,t){uf[t]||(uf[t]=!0,console.warn(t))}const df=(e,t,n)=>wb(e,"⚠️ React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function jb(e,t){e!=null&&e.v7_startTransition||df("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&df("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function rl(e){let{to:t,replace:n,state:r,relative:s}=e;vs()||je(!1);let{future:i,static:a}=v.useContext(nr),{matches:l}=v.useContext(rn),{pathname:c}=Nn(),u=se(),d=jd(t,wd(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return v.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function sl(e){return lb(e.context)}function K(e){je(!1)}function Nb(e){let{basename:t="/",children:n=null,location:r,navigationType:s=An.Pop,navigator:i,static:a=!1,future:l}=e;vs()&&je(!1);let c=t.replace(/^\/*/,"/"),u=v.useMemo(()=>({basename:c,navigator:i,static:a,future:Mi({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=ys(r));let{pathname:d="/",search:h="",hash:m="",state:x=null,key:f="default"}=r,w=v.useMemo(()=>{let b=bd(d,c);return b==null?null:{location:{pathname:b,search:h,hash:m,state:x,key:f},navigationType:s}},[c,d,h,m,x,f,s]);return w==null?null:v.createElement(nr.Provider,{value:u},v.createElement(nl.Provider,{children:n,value:w}))}function Sb(e){let{children:t,location:n}=e;return cb(nu(t),n)}new Promise(()=>{});function nu(e,t){t===void 0&&(t=[]);let n=[];return v.Children.forEach(e,(r,s)=>{if(!v.isValidElement(r))return;let i=[...t,s];if(r.type===v.Fragment){n.push.apply(n,nu(r.props.children,i));return}r.type!==K&&je(!1),!r.props.index||!r.props.children||je(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=nu(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ru(){return ru=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ru.apply(this,arguments)}function Cb(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function kb(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Eb(e,t){return e.button===0&&(!t||t==="_self")&&!kb(e)}const _b=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Tb="6";try{window.__reactRouterVersion=Tb}catch{}const Pb="startTransition",hf=wy[Pb];function Mb(e){let{basename:t,children:n,future:r,window:s}=e,i=v.useRef();i.current==null&&(i.current=R1({window:s,v5Compat:!0}));let a=i.current,[l,c]=v.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=v.useCallback(h=>{u&&hf?hf(()=>c(h)):c(h)},[c,u]);return v.useLayoutEffect(()=>a.listen(d),[a,d]),v.useEffect(()=>jb(r),[r]),v.createElement(Nb,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const Ib=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Rb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Le=v.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,m=Cb(t,_b),{basename:x}=v.useContext(nr),f,w=!1;if(typeof u=="string"&&Rb.test(u)&&(f=u,Ib))try{let p=new URL(window.location.href),j=u.startsWith("//")?new URL(p.protocol+u):new URL(u),N=bd(j.pathname,x);j.origin===p.origin&&N!=null?u=N+j.search+j.hash:w=!0}catch{}let b=ib(u,{relative:s}),g=Db(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function y(p){r&&r(p),p.defaultPrevented||g(p)}return v.createElement("a",ru({},m,{href:f||b,onClick:w||i?r:y,ref:n,target:c}))});var ff;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ff||(ff={}));var mf;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(mf||(mf={}));function Db(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=t===void 0?{}:t,c=se(),u=Nn(),d=k0(e,{relative:a});return v.useCallback(h=>{if(Eb(h,n)){h.preventDefault();let m=r!==void 0?r:vo(u)===vo(d);c(e,{replace:m,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,r,s,n,e,i,a,l])}let Ab={data:""},Lb=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Ab,Ob=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,$b=/\/\*[^]*?\*\/|  +/g,gf=/\n+/g,In=(e,t)=>{let n="",r="",s="";for(let i in e){let a=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+a+";":r+=i[1]=="f"?In(a,i):i+"{"+In(a,i[1]=="k"?"":t)+"}":typeof a=="object"?r+=In(a,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):a!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=In.p?In.p(i,a):i+":"+a+";")}return n+(t&&s?t+"{"+s+"}":s)+r},an={},T0=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+T0(e[n]);return t}return e},Fb=(e,t,n,r,s)=>{let i=T0(e),a=an[i]||(an[i]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(i));if(!an[a]){let c=i!==e?e:(u=>{let d,h,m=[{}];for(;d=Ob.exec(u.replace($b,""));)d[4]?m.shift():d[3]?(h=d[3].replace(gf," ").trim(),m.unshift(m[0][h]=m[0][h]||{})):m[0][d[1]]=d[2].replace(gf," ").trim();return m[0]})(e);an[a]=In(s?{["@keyframes "+a]:c}:c,n?"":"."+a)}let l=n&&an.g?an.g:null;return n&&(an.g=an[a]),((c,u,d,h)=>{h?u.data=u.data.replace(h,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(an[a],t,r,l),a},Bb=(e,t,n)=>e.reduce((r,s,i)=>{let a=t[i];if(a&&a.call){let l=a(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;a=c?"."+c:l&&typeof l=="object"?l.props?"":In(l,""):l===!1?"":l}return r+s+(a??"")},"");function il(e){let t=this||{},n=e.call?e(t.p):e;return Fb(n.unshift?n.raw?Bb(n,[].slice.call(arguments,1),t.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(t.p):s),{}):n,Lb(t.target),t.g,t.o,t.k)}let P0,su,iu;il.bind({g:1});let bn=il.bind({k:1});function zb(e,t,n,r){In.p=t,P0=e,su=n,iu=r}function rr(e,t){let n=this||{};return function(){let r=arguments;function s(i,a){let l=Object.assign({},i),c=l.className||s.className;n.p=Object.assign({theme:su&&su()},l),n.o=/ *go\d+/.test(c),l.className=il.apply(n,r)+(c?" "+c:"");let u=e;return e[0]&&(u=l.as||e,delete l.as),iu&&u[0]&&iu(l),P0(u,l)}return s}}var Ub=e=>typeof e=="function",wo=(e,t)=>Ub(e)?e(t):e,Hb=(()=>{let e=0;return()=>(++e).toString()})(),M0=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Wb=20,Ba=new Map,Vb=1e3,pf=e=>{if(Ba.has(e))return;let t=setTimeout(()=>{Ba.delete(e),Rr({type:4,toastId:e})},Vb);Ba.set(e,t)},Yb=e=>{let t=Ba.get(e);t&&clearTimeout(t)},au=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,Wb)};case 1:return t.toast.id&&Yb(t.toast.id),{...e,toasts:e.toasts.map(i=>i.id===t.toast.id?{...i,...t.toast}:i)};case 2:let{toast:n}=t;return e.toasts.find(i=>i.id===n.id)?au(e,{type:1,toast:n}):au(e,{type:0,toast:n});case 3:let{toastId:r}=t;return r?pf(r):e.toasts.forEach(i=>{pf(i.id)}),{...e,toasts:e.toasts.map(i=>i.id===r||r===void 0?{...i,visible:!1}:i)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let s=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},za=[],Ua={toasts:[],pausedAt:void 0},Rr=e=>{Ua=au(Ua,e),za.forEach(t=>{t(Ua)})},qb={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Kb=(e={})=>{let[t,n]=v.useState(Ua);v.useEffect(()=>(za.push(n),()=>{let s=za.indexOf(n);s>-1&&za.splice(s,1)}),[t]);let r=t.toasts.map(s=>{var i,a;return{...e,...e[s.type],...s,duration:s.duration||((i=e[s.type])==null?void 0:i.duration)||(e==null?void 0:e.duration)||qb[s.type],style:{...e.style,...(a=e[s.type])==null?void 0:a.style,...s.style}}});return{...t,toasts:r}},Xb=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Hb()}),Wi=e=>(t,n)=>{let r=Xb(t,e,n);return Rr({type:2,toast:r}),r.id},P=(e,t)=>Wi("blank")(e,t);P.error=Wi("error");P.success=Wi("success");P.loading=Wi("loading");P.custom=Wi("custom");P.dismiss=e=>{Rr({type:3,toastId:e})};P.remove=e=>Rr({type:4,toastId:e});P.promise=(e,t,n)=>{let r=P.loading(t.loading,{...n,...n==null?void 0:n.loading});return e.then(s=>(P.success(wo(t.success,s),{id:r,...n,...n==null?void 0:n.success}),s)).catch(s=>{P.error(wo(t.error,s),{id:r,...n,...n==null?void 0:n.error})}),e};var Qb=(e,t)=>{Rr({type:1,toast:{id:e,height:t}})},Gb=()=>{Rr({type:5,time:Date.now()})},Zb=e=>{let{toasts:t,pausedAt:n}=Kb(e);v.useEffect(()=>{if(n)return;let i=Date.now(),a=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(c<0){l.visible&&P.dismiss(l.id);return}return setTimeout(()=>P.dismiss(l.id),c)});return()=>{a.forEach(l=>l&&clearTimeout(l))}},[t,n]);let r=v.useCallback(()=>{n&&Rr({type:6,time:Date.now()})},[n]),s=v.useCallback((i,a)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=a||{},d=t.filter(x=>(x.position||u)===(i.position||u)&&x.height),h=d.findIndex(x=>x.id===i.id),m=d.filter((x,f)=>f<h&&x.visible).length;return d.filter(x=>x.visible).slice(...l?[m+1]:[0,m]).reduce((x,f)=>x+(f.height||0)+c,0)},[t]);return{toasts:t,handlers:{updateHeight:Qb,startPause:Gb,endPause:r,calculateOffset:s}}},Jb=bn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,ew=bn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,tw=bn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,nw=rr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Jb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${ew} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${tw} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,rw=bn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,sw=rr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${rw} 1s linear infinite;
`,iw=bn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,aw=bn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ow=rr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${iw} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${aw} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,lw=rr("div")`
  position: absolute;
`,cw=rr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,uw=bn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,dw=rr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${uw} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,hw=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?v.createElement(dw,null,t):t:n==="blank"?null:v.createElement(cw,null,v.createElement(sw,{...r}),n!=="loading"&&v.createElement(lw,null,n==="error"?v.createElement(nw,{...r}):v.createElement(ow,{...r})))},fw=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,mw=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,gw="0%{opacity:0;} 100%{opacity:1;}",pw="0%{opacity:1;} 100%{opacity:0;}",xw=rr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,yw=rr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,vw=(e,t)=>{let n=e.includes("top")?1:-1,[r,s]=M0()?[gw,pw]:[fw(n),mw(n)];return{animation:t?`${bn(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${bn(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},bw=v.memo(({toast:e,position:t,style:n,children:r})=>{let s=e.height?vw(e.position||t||"top-center",e.visible):{opacity:0},i=v.createElement(hw,{toast:e}),a=v.createElement(yw,{...e.ariaProps},wo(e.message,e));return v.createElement(xw,{className:e.className,style:{...s,...n,...e.style}},typeof r=="function"?r({icon:i,message:a}):v.createElement(v.Fragment,null,i,a))});zb(v.createElement);var ww=({id:e,className:t,style:n,onHeightUpdate:r,children:s})=>{let i=v.useCallback(a=>{if(a){let l=()=>{let c=a.getBoundingClientRect().height;r(e,c)};l(),new MutationObserver(l).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return v.createElement("div",{ref:i,className:t,style:n},s)},jw=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:M0()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...s}},Nw=il`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,fa=16,Sw=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:s,containerStyle:i,containerClassName:a})=>{let{toasts:l,handlers:c}=Zb(n);return v.createElement("div",{style:{position:"fixed",zIndex:9999,top:fa,left:fa,right:fa,bottom:fa,pointerEvents:"none",...i},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||t,h=c.calculateOffset(u,{reverseOrder:e,gutter:r,defaultPosition:t}),m=jw(d,h);return v.createElement(ww,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?Nw:"",style:m},u.type==="custom"?wo(u.message,u):s?s(u):v.createElement(bw,{toast:u,position:d}))}))};function I0(e,t){return function(){return e.apply(t,arguments)}}const{toString:Cw}=Object.prototype,{getPrototypeOf:Sd}=Object,al=(e=>t=>{const n=Cw.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ut=e=>(e=e.toLowerCase(),t=>al(t)===e),ol=e=>t=>typeof t===e,{isArray:bs}=Array,Ii=ol("undefined");function kw(e){return e!==null&&!Ii(e)&&e.constructor!==null&&!Ii(e.constructor)&&pt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const R0=Ut("ArrayBuffer");function Ew(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&R0(e.buffer),t}const _w=ol("string"),pt=ol("function"),D0=ol("number"),ll=e=>e!==null&&typeof e=="object",Tw=e=>e===!0||e===!1,Ha=e=>{if(al(e)!=="object")return!1;const t=Sd(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Pw=Ut("Date"),Mw=Ut("File"),Iw=Ut("Blob"),Rw=Ut("FileList"),Dw=e=>ll(e)&&pt(e.pipe),Aw=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||pt(e.append)&&((t=al(e))==="formdata"||t==="object"&&pt(e.toString)&&e.toString()==="[object FormData]"))},Lw=Ut("URLSearchParams"),[Ow,$w,Fw,Bw]=["ReadableStream","Request","Response","Headers"].map(Ut),zw=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Vi(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),bs(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let l;for(r=0;r<a;r++)l=i[r],t.call(null,e[l],l,e)}}function A0(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const xr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,L0=e=>!Ii(e)&&e!==xr;function ou(){const{caseless:e}=L0(this)&&this||{},t={},n=(r,s)=>{const i=e&&A0(t,s)||s;Ha(t[i])&&Ha(r)?t[i]=ou(t[i],r):Ha(r)?t[i]=ou({},r):bs(r)?t[i]=r.slice():t[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Vi(arguments[r],n);return t}const Uw=(e,t,n,{allOwnKeys:r}={})=>(Vi(t,(s,i)=>{n&&pt(s)?e[i]=I0(s,n):e[i]=s},{allOwnKeys:r}),e),Hw=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Ww=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Vw=(e,t,n,r)=>{let s,i,a;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)a=s[i],(!r||r(a,e,t))&&!l[a]&&(t[a]=e[a],l[a]=!0);e=n!==!1&&Sd(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Yw=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},qw=e=>{if(!e)return null;if(bs(e))return e;let t=e.length;if(!D0(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Kw=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Sd(Uint8Array)),Xw=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=r.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},Qw=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Gw=Ut("HTMLFormElement"),Zw=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),xf=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Jw=Ut("RegExp"),O0=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Vi(n,(s,i)=>{let a;(a=t(s,i,e))!==!1&&(r[i]=a||s)}),Object.defineProperties(e,r)},e2=e=>{O0(e,(t,n)=>{if(pt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(pt(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},t2=(e,t)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return bs(e)?r(e):r(String(e).split(t)),n},n2=()=>{},r2=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,Wl="abcdefghijklmnopqrstuvwxyz",yf="0123456789",$0={DIGIT:yf,ALPHA:Wl,ALPHA_DIGIT:Wl+Wl.toUpperCase()+yf},s2=(e=16,t=$0.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function i2(e){return!!(e&&pt(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const a2=e=>{const t=new Array(10),n=(r,s)=>{if(ll(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[s]=r;const i=bs(r)?[]:{};return Vi(r,(a,l)=>{const c=n(a,s+1);!Ii(c)&&(i[l]=c)}),t[s]=void 0,i}}return r};return n(e,0)},o2=Ut("AsyncFunction"),l2=e=>e&&(ll(e)||pt(e))&&pt(e.then)&&pt(e.catch),F0=((e,t)=>e?setImmediate:t?((n,r)=>(xr.addEventListener("message",({source:s,data:i})=>{s===xr&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),xr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",pt(xr.postMessage)),c2=typeof queueMicrotask<"u"?queueMicrotask.bind(xr):typeof process<"u"&&process.nextTick||F0,M={isArray:bs,isArrayBuffer:R0,isBuffer:kw,isFormData:Aw,isArrayBufferView:Ew,isString:_w,isNumber:D0,isBoolean:Tw,isObject:ll,isPlainObject:Ha,isReadableStream:Ow,isRequest:$w,isResponse:Fw,isHeaders:Bw,isUndefined:Ii,isDate:Pw,isFile:Mw,isBlob:Iw,isRegExp:Jw,isFunction:pt,isStream:Dw,isURLSearchParams:Lw,isTypedArray:Kw,isFileList:Rw,forEach:Vi,merge:ou,extend:Uw,trim:zw,stripBOM:Hw,inherits:Ww,toFlatObject:Vw,kindOf:al,kindOfTest:Ut,endsWith:Yw,toArray:qw,forEachEntry:Xw,matchAll:Qw,isHTMLForm:Gw,hasOwnProperty:xf,hasOwnProp:xf,reduceDescriptors:O0,freezeMethods:e2,toObjectSet:t2,toCamelCase:Zw,noop:n2,toFiniteNumber:r2,findKey:A0,global:xr,isContextDefined:L0,ALPHABET:$0,generateString:s2,isSpecCompliantForm:i2,toJSONObject:a2,isAsyncFn:o2,isThenable:l2,setImmediate:F0,asap:c2};function Q(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}M.inherits(Q,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:M.toJSONObject(this.config),code:this.code,status:this.status}}});const B0=Q.prototype,z0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{z0[e]={value:e}});Object.defineProperties(Q,z0);Object.defineProperty(B0,"isAxiosError",{value:!0});Q.from=(e,t,n,r,s,i)=>{const a=Object.create(B0);return M.toFlatObject(e,a,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Q.call(a,e.message,t,n,r,s),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const u2=null;function lu(e){return M.isPlainObject(e)||M.isArray(e)}function U0(e){return M.endsWith(e,"[]")?e.slice(0,-2):e}function vf(e,t,n){return e?e.concat(t).map(function(s,i){return s=U0(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function d2(e){return M.isArray(e)&&!e.some(lu)}const h2=M.toFlatObject(M,{},null,function(t){return/^is[A-Z]/.test(t)});function cl(e,t,n){if(!M.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=M.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,b){return!M.isUndefined(b[w])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&M.isSpecCompliantForm(t);if(!M.isFunction(s))throw new TypeError("visitor must be a function");function u(f){if(f===null)return"";if(M.isDate(f))return f.toISOString();if(!c&&M.isBlob(f))throw new Q("Blob is not supported. Use a Buffer instead.");return M.isArrayBuffer(f)||M.isTypedArray(f)?c&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function d(f,w,b){let g=f;if(f&&!b&&typeof f=="object"){if(M.endsWith(w,"{}"))w=r?w:w.slice(0,-2),f=JSON.stringify(f);else if(M.isArray(f)&&d2(f)||(M.isFileList(f)||M.endsWith(w,"[]"))&&(g=M.toArray(f)))return w=U0(w),g.forEach(function(p,j){!(M.isUndefined(p)||p===null)&&t.append(a===!0?vf([w],j,i):a===null?w:w+"[]",u(p))}),!1}return lu(f)?!0:(t.append(vf(b,w,i),u(f)),!1)}const h=[],m=Object.assign(h2,{defaultVisitor:d,convertValue:u,isVisitable:lu});function x(f,w){if(!M.isUndefined(f)){if(h.indexOf(f)!==-1)throw Error("Circular reference detected in "+w.join("."));h.push(f),M.forEach(f,function(g,y){(!(M.isUndefined(g)||g===null)&&s.call(t,g,M.isString(y)?y.trim():y,w,m))===!0&&x(g,w?w.concat(y):[y])}),h.pop()}}if(!M.isObject(e))throw new TypeError("data must be an object");return x(e),t}function bf(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Cd(e,t){this._pairs=[],e&&cl(e,this,t)}const H0=Cd.prototype;H0.append=function(t,n){this._pairs.push([t,n])};H0.toString=function(t){const n=t?function(r){return t.call(this,r,bf)}:bf;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function f2(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function W0(e,t,n){if(!t)return e;const r=n&&n.encode||f2;M.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(t,n):i=M.isURLSearchParams(t)?t.toString():new Cd(t,n).toString(r),i){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class wf{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){M.forEach(this.handlers,function(r){r!==null&&t(r)})}}const V0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},m2=typeof URLSearchParams<"u"?URLSearchParams:Cd,g2=typeof FormData<"u"?FormData:null,p2=typeof Blob<"u"?Blob:null,x2={isBrowser:!0,classes:{URLSearchParams:m2,FormData:g2,Blob:p2},protocols:["http","https","file","blob","url","data"]},kd=typeof window<"u"&&typeof document<"u",cu=typeof navigator=="object"&&navigator||void 0,y2=kd&&(!cu||["ReactNative","NativeScript","NS"].indexOf(cu.product)<0),v2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",b2=kd&&window.location.href||"http://localhost",w2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:kd,hasStandardBrowserEnv:y2,hasStandardBrowserWebWorkerEnv:v2,navigator:cu,origin:b2},Symbol.toStringTag,{value:"Module"})),We={...w2,...x2};function j2(e,t){return cl(e,new We.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return We.isNode&&M.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function N2(e){return M.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function S2(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}function Y0(e){function t(n,r,s,i){let a=n[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),c=i>=n.length;return a=!a&&M.isArray(s)?s.length:a,c?(M.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!l):((!s[a]||!M.isObject(s[a]))&&(s[a]=[]),t(n,r,s[a],i)&&M.isArray(s[a])&&(s[a]=S2(s[a])),!l)}if(M.isFormData(e)&&M.isFunction(e.entries)){const n={};return M.forEachEntry(e,(r,s)=>{t(N2(r),s,n,0)}),n}return null}function C2(e,t,n){if(M.isString(e))try{return(t||JSON.parse)(e),M.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(e)}const Yi={transitional:V0,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=M.isObject(t);if(i&&M.isHTMLForm(t)&&(t=new FormData(t)),M.isFormData(t))return s?JSON.stringify(Y0(t)):t;if(M.isArrayBuffer(t)||M.isBuffer(t)||M.isStream(t)||M.isFile(t)||M.isBlob(t)||M.isReadableStream(t))return t;if(M.isArrayBufferView(t))return t.buffer;if(M.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return j2(t,this.formSerializer).toString();if((l=M.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return cl(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),C2(t)):t}],transformResponse:[function(t){const n=this.transitional||Yi.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(M.isResponse(t)||M.isReadableStream(t))return t;if(t&&M.isString(t)&&(r&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(a)throw l.name==="SyntaxError"?Q.from(l,Q.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:We.classes.FormData,Blob:We.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};M.forEach(["delete","get","head","post","put","patch"],e=>{Yi.headers[e]={}});const k2=M.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),E2=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),r=a.substring(s+1).trim(),!(!n||t[n]&&k2[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},jf=Symbol("internals");function Ms(e){return e&&String(e).trim().toLowerCase()}function Wa(e){return e===!1||e==null?e:M.isArray(e)?e.map(Wa):String(e)}function _2(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const T2=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Vl(e,t,n,r,s){if(M.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!M.isString(t)){if(M.isString(r))return t.indexOf(r)!==-1;if(M.isRegExp(r))return r.test(t)}}function P2(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function M2(e,t){const n=M.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,i,a){return this[r].call(this,t,s,i,a)},configurable:!0})})}class lt{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function i(l,c,u){const d=Ms(c);if(!d)throw new Error("header name must be a non-empty string");const h=M.findKey(s,d);(!h||s[h]===void 0||u===!0||u===void 0&&s[h]!==!1)&&(s[h||c]=Wa(l))}const a=(l,c)=>M.forEach(l,(u,d)=>i(u,d,c));if(M.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(M.isString(t)&&(t=t.trim())&&!T2(t))a(E2(t),n);else if(M.isHeaders(t))for(const[l,c]of t.entries())i(c,l,r);else t!=null&&i(n,t,r);return this}get(t,n){if(t=Ms(t),t){const r=M.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return _2(s);if(M.isFunction(n))return n.call(this,s,r);if(M.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ms(t),t){const r=M.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Vl(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function i(a){if(a=Ms(a),a){const l=M.findKey(r,a);l&&(!n||Vl(r,r[l],l,n))&&(delete r[l],s=!0)}}return M.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!t||Vl(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,r={};return M.forEach(this,(s,i)=>{const a=M.findKey(r,i);if(a){n[a]=Wa(s),delete n[i];return}const l=t?P2(i):String(i).trim();l!==i&&delete n[i],n[l]=Wa(s),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return M.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&M.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[jf]=this[jf]={accessors:{}}).accessors,s=this.prototype;function i(a){const l=Ms(a);r[l]||(M2(s,a),r[l]=!0)}return M.isArray(t)?t.forEach(i):i(t),this}}lt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);M.reduceDescriptors(lt.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});M.freezeMethods(lt);function Yl(e,t){const n=this||Yi,r=t||n,s=lt.from(r.headers);let i=r.data;return M.forEach(e,function(l){i=l.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function q0(e){return!!(e&&e.__CANCEL__)}function ws(e,t,n){Q.call(this,e??"canceled",Q.ERR_CANCELED,t,n),this.name="CanceledError"}M.inherits(ws,Q,{__CANCEL__:!0});function K0(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Q("Request failed with status code "+n.status,[Q.ERR_BAD_REQUEST,Q.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function I2(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function R2(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,i=0,a;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),d=r[i];a||(a=u),n[s]=c,r[s]=u;let h=i,m=0;for(;h!==s;)m+=n[h++],h=h%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),u-a<t)return;const x=d&&u-d;return x?Math.round(m*1e3/x):void 0}}function D2(e,t){let n=0,r=1e3/t,s,i;const a=(u,d=Date.now())=>{n=d,s=null,i&&(clearTimeout(i),i=null),e.apply(null,u)};return[(...u)=>{const d=Date.now(),h=d-n;h>=r?a(u,d):(s=u,i||(i=setTimeout(()=>{i=null,a(s)},r-h)))},()=>s&&a(s)]}const jo=(e,t,n=3)=>{let r=0;const s=R2(50,250);return D2(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,c=a-r,u=s(c),d=a<=l;r=a;const h={loaded:a,total:l,progress:l?a/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-a)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},n)},Nf=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Sf=e=>(...t)=>M.asap(()=>e(...t)),A2=We.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,We.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(We.origin),We.navigator&&/(msie|trident)/i.test(We.navigator.userAgent)):()=>!0,L2=We.hasStandardBrowserEnv?{write(e,t,n,r,s,i){const a=[e+"="+encodeURIComponent(t)];M.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),M.isString(r)&&a.push("path="+r),M.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function O2(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function $2(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function X0(e,t){return e&&!O2(t)?$2(e,t):t}const Cf=e=>e instanceof lt?{...e}:e;function _r(e,t){t=t||{};const n={};function r(u,d,h,m){return M.isPlainObject(u)&&M.isPlainObject(d)?M.merge.call({caseless:m},u,d):M.isPlainObject(d)?M.merge({},d):M.isArray(d)?d.slice():d}function s(u,d,h,m){if(M.isUndefined(d)){if(!M.isUndefined(u))return r(void 0,u,h,m)}else return r(u,d,h,m)}function i(u,d){if(!M.isUndefined(d))return r(void 0,d)}function a(u,d){if(M.isUndefined(d)){if(!M.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function l(u,d,h){if(h in t)return r(u,d);if(h in e)return r(void 0,u)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(u,d,h)=>s(Cf(u),Cf(d),h,!0)};return M.forEach(Object.keys(Object.assign({},e,t)),function(d){const h=c[d]||s,m=h(e[d],t[d],d);M.isUndefined(m)&&h!==l||(n[d]=m)}),n}const Q0=e=>{const t=_r({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:l}=t;t.headers=a=lt.from(a),t.url=W0(X0(t.baseURL,t.url),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(M.isFormData(n)){if(We.hasStandardBrowserEnv||We.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[u,...d]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...d].join("; "))}}if(We.hasStandardBrowserEnv&&(r&&M.isFunction(r)&&(r=r(t)),r||r!==!1&&A2(t.url))){const u=s&&i&&L2.read(i);u&&a.set(s,u)}return t},F2=typeof XMLHttpRequest<"u",B2=F2&&function(e){return new Promise(function(n,r){const s=Q0(e);let i=s.data;const a=lt.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=s,d,h,m,x,f;function w(){x&&x(),f&&f(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(s.method.toUpperCase(),s.url,!0),b.timeout=s.timeout;function g(){if(!b)return;const p=lt.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),N={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:p,config:e,request:b};K0(function(E){n(E),w()},function(E){r(E),w()},N),b=null}"onloadend"in b?b.onloadend=g:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(g)},b.onabort=function(){b&&(r(new Q("Request aborted",Q.ECONNABORTED,e,b)),b=null)},b.onerror=function(){r(new Q("Network Error",Q.ERR_NETWORK,e,b)),b=null},b.ontimeout=function(){let j=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const N=s.transitional||V0;s.timeoutErrorMessage&&(j=s.timeoutErrorMessage),r(new Q(j,N.clarifyTimeoutError?Q.ETIMEDOUT:Q.ECONNABORTED,e,b)),b=null},i===void 0&&a.setContentType(null),"setRequestHeader"in b&&M.forEach(a.toJSON(),function(j,N){b.setRequestHeader(N,j)}),M.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),l&&l!=="json"&&(b.responseType=s.responseType),u&&([m,f]=jo(u,!0),b.addEventListener("progress",m)),c&&b.upload&&([h,x]=jo(c),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",x)),(s.cancelToken||s.signal)&&(d=p=>{b&&(r(!p||p.type?new ws(null,e,b):p),b.abort(),b=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const y=I2(s.url);if(y&&We.protocols.indexOf(y)===-1){r(new Q("Unsupported protocol "+y+":",Q.ERR_BAD_REQUEST,e));return}b.send(i||null)})},z2=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const i=function(u){if(!s){s=!0,l();const d=u instanceof Error?u:this.reason;r.abort(d instanceof Q?d:new ws(d instanceof Error?d.message:d))}};let a=t&&setTimeout(()=>{a=null,i(new Q(`timeout ${t} of ms exceeded`,Q.ETIMEDOUT))},t);const l=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>M.asap(l),c}},U2=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},H2=async function*(e,t){for await(const n of W2(e))yield*U2(n,t)},W2=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},kf=(e,t,n,r)=>{const s=H2(e,t);let i=0,a,l=c=>{a||(a=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await s.next();if(u){l(),c.close();return}let h=d.byteLength;if(n){let m=i+=h;n(m)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},ul=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",G0=ul&&typeof ReadableStream=="function",V2=ul&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Z0=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Y2=G0&&Z0(()=>{let e=!1;const t=new Request(We.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Ef=64*1024,uu=G0&&Z0(()=>M.isReadableStream(new Response("").body)),No={stream:uu&&(e=>e.body)};ul&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!No[t]&&(No[t]=M.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Q(`Response type '${t}' is not supported`,Q.ERR_NOT_SUPPORT,r)})})})(new Response);const q2=async e=>{if(e==null)return 0;if(M.isBlob(e))return e.size;if(M.isSpecCompliantForm(e))return(await new Request(We.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(M.isArrayBufferView(e)||M.isArrayBuffer(e))return e.byteLength;if(M.isURLSearchParams(e)&&(e=e+""),M.isString(e))return(await V2(e)).byteLength},K2=async(e,t)=>{const n=M.toFiniteNumber(e.getContentLength());return n??q2(t)},X2=ul&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:i,timeout:a,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:d,withCredentials:h="same-origin",fetchOptions:m}=Q0(e);u=u?(u+"").toLowerCase():"text";let x=z2([s,i&&i.toAbortSignal()],a),f;const w=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let b;try{if(c&&Y2&&n!=="get"&&n!=="head"&&(b=await K2(d,r))!==0){let N=new Request(t,{method:"POST",body:r,duplex:"half"}),C;if(M.isFormData(r)&&(C=N.headers.get("content-type"))&&d.setContentType(C),N.body){const[E,S]=Nf(b,jo(Sf(c)));r=kf(N.body,Ef,E,S)}}M.isString(h)||(h=h?"include":"omit");const g="credentials"in Request.prototype;f=new Request(t,{...m,signal:x,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:g?h:void 0});let y=await fetch(f);const p=uu&&(u==="stream"||u==="response");if(uu&&(l||p&&w)){const N={};["status","statusText","headers"].forEach(k=>{N[k]=y[k]});const C=M.toFiniteNumber(y.headers.get("content-length")),[E,S]=l&&Nf(C,jo(Sf(l),!0))||[];y=new Response(kf(y.body,Ef,E,()=>{S&&S(),w&&w()}),N)}u=u||"text";let j=await No[M.findKey(No,u)||"text"](y,e);return!p&&w&&w(),await new Promise((N,C)=>{K0(N,C,{data:j,headers:lt.from(y.headers),status:y.status,statusText:y.statusText,config:e,request:f})})}catch(g){throw w&&w(),g&&g.name==="TypeError"&&/fetch/i.test(g.message)?Object.assign(new Q("Network Error",Q.ERR_NETWORK,e,f),{cause:g.cause||g}):Q.from(g,g&&g.code,e,f)}}),du={http:u2,xhr:B2,fetch:X2};M.forEach(du,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const _f=e=>`- ${e}`,Q2=e=>M.isFunction(e)||e===null||e===!1,J0={getAdapter:e=>{e=M.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let i=0;i<t;i++){n=e[i];let a;if(r=n,!Q2(n)&&(r=du[(a=String(n)).toLowerCase()],r===void 0))throw new Q(`Unknown adapter '${a}'`);if(r)break;s[a||"#"+i]=r}if(!r){const i=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=t?i.length>1?`since :
`+i.map(_f).join(`
`):" "+_f(i[0]):"as no adapter specified";throw new Q("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:du};function ql(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ws(null,e)}function Tf(e){return ql(e),e.headers=lt.from(e.headers),e.data=Yl.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),J0.getAdapter(e.adapter||Yi.adapter)(e).then(function(r){return ql(e),r.data=Yl.call(e,e.transformResponse,r),r.headers=lt.from(r.headers),r},function(r){return q0(r)||(ql(e),r&&r.response&&(r.response.data=Yl.call(e,e.transformResponse,r.response),r.response.headers=lt.from(r.response.headers))),Promise.reject(r)})}const ex="1.7.9",dl={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{dl[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Pf={};dl.transitional=function(t,n,r){function s(i,a){return"[Axios v"+ex+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return(i,a,l)=>{if(t===!1)throw new Q(s(a," has been removed"+(n?" in "+n:"")),Q.ERR_DEPRECATED);return n&&!Pf[a]&&(Pf[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,a,l):!0}};dl.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function G2(e,t,n){if(typeof e!="object")throw new Q("options must be an object",Q.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],a=t[i];if(a){const l=e[i],c=l===void 0||a(l,i,e);if(c!==!0)throw new Q("option "+i+" must be "+c,Q.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Q("Unknown option "+i,Q.ERR_BAD_OPTION)}}const Va={assertOptions:G2,validators:dl},Wt=Va.validators;class wr{constructor(t){this.defaults=t,this.interceptors={request:new wf,response:new wf}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=_r(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Va.assertOptions(r,{silentJSONParsing:Wt.transitional(Wt.boolean),forcedJSONParsing:Wt.transitional(Wt.boolean),clarifyTimeoutError:Wt.transitional(Wt.boolean)},!1),s!=null&&(M.isFunction(s)?n.paramsSerializer={serialize:s}:Va.assertOptions(s,{encode:Wt.function,serialize:Wt.function},!0)),Va.assertOptions(n,{baseUrl:Wt.spelling("baseURL"),withXsrfToken:Wt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&M.merge(i.common,i[n.method]);i&&M.forEach(["delete","get","head","post","put","patch","common"],f=>{delete i[f]}),n.headers=lt.concat(a,i);const l=[];let c=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(c=c&&w.synchronous,l.unshift(w.fulfilled,w.rejected))});const u=[];this.interceptors.response.forEach(function(w){u.push(w.fulfilled,w.rejected)});let d,h=0,m;if(!c){const f=[Tf.bind(this),void 0];for(f.unshift.apply(f,l),f.push.apply(f,u),m=f.length,d=Promise.resolve(n);h<m;)d=d.then(f[h++],f[h++]);return d}m=l.length;let x=n;for(h=0;h<m;){const f=l[h++],w=l[h++];try{x=f(x)}catch(b){w.call(this,b);break}}try{d=Tf.call(this,x)}catch(f){return Promise.reject(f)}for(h=0,m=u.length;h<m;)d=d.then(u[h++],u[h++]);return d}getUri(t){t=_r(this.defaults,t);const n=X0(t.baseURL,t.url);return W0(n,t.params,t.paramsSerializer)}}M.forEach(["delete","get","head","options"],function(t){wr.prototype[t]=function(n,r){return this.request(_r(r||{},{method:t,url:n,data:(r||{}).data}))}});M.forEach(["post","put","patch"],function(t){function n(r){return function(i,a,l){return this.request(_r(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}wr.prototype[t]=n(),wr.prototype[t+"Form"]=n(!0)});class Ed{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(l=>{r.subscribe(l),i=l}).then(s);return a.cancel=function(){r.unsubscribe(i)},a},t(function(i,a,l){r.reason||(r.reason=new ws(i,a,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Ed(function(s){t=s}),cancel:t}}}function Z2(e){return function(n){return e.apply(null,n)}}function J2(e){return M.isObject(e)&&e.isAxiosError===!0}const hu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hu).forEach(([e,t])=>{hu[t]=e});function tx(e){const t=new wr(e),n=I0(wr.prototype.request,t);return M.extend(n,wr.prototype,t,{allOwnKeys:!0}),M.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return tx(_r(e,s))},n}const ke=tx(Yi);ke.Axios=wr;ke.CanceledError=ws;ke.CancelToken=Ed;ke.isCancel=q0;ke.VERSION=ex;ke.toFormData=cl;ke.AxiosError=Q;ke.Cancel=ke.CanceledError;ke.all=function(t){return Promise.all(t)};ke.spread=Z2;ke.isAxiosError=J2;ke.mergeConfig=_r;ke.AxiosHeaders=lt;ke.formToJSON=e=>Y0(M.isHTMLForm(e)?new FormData(e):e);ke.getAdapter=J0.getAdapter;ke.HttpStatusCode=hu;ke.default=ke;const nx="https://house-of-hope-v2-production.up.railway.app";console.log("API đang kết nối đến:",nx);const W=ke.create({baseURL:nx,headers:{"Content-Type":"application/json"}});W.interceptors.request.use(e=>{const t=localStorage.getItem("authToken");return t&&(e.headers.Authorization||(e.headers.Authorization=`Bearer ${t}`)),e.url&&!e.url.startsWith("/api")&&!e.url.startsWith("http://")&&!e.url.startsWith("https://")&&(e.url=`/api${e.url.startsWith("/")?"":"/"}${e.url}`),e},e=>(console.error("[Axios Request Interceptor] Error:",e),P.error("Lỗi khi chuẩn bị gửi yêu cầu."),Promise.reject(e)));W.interceptors.response.use(e=>e,e=>{var n;console.error("[Axios Response Interceptor] API Call Error:",e.response||e.message||e);const t=e.config;if(t._retry=t._retry||!1,e.response){const{status:r,data:s}=e.response;if(r===401&&!t._retry)return t._retry=!0,t.url.includes("/auth/login")?(console.log("[Axios Interceptor] Login attempt failed with 401"),Promise.reject(e)):(console.error("[Axios Response Interceptor] Unauthorized (401). Logging out..."),localStorage.removeItem("authToken"),localStorage.removeItem("authUser"),window.location.pathname!=="/login"&&(P.error((s==null?void 0:s.message)||"Phiên đăng nhập hết hạn hoặc không hợp lệ. Vui lòng đăng nhập lại.",{id:"auth-error-toast"}),setTimeout(()=>{window.location.href="/login"},1500)),new Promise(()=>{}));if(r===403)P.error((s==null?void 0:s.message)||"Bạn không có quyền thực hiện hành động này.");else if(r===404)console.warn("[Axios Response Interceptor] Resource not found (404):",e.config.url);else if(r===400&&(s!=null&&s.errors)&&Array.isArray(s.errors)){console.error("[Axios Response Interceptor] Validation Error (400):",s.errors);const i=s.errors.map(a=>`- ${a.field?`${a.field}: `:""}${a.message}`);P.error(`Lỗi dữ liệu đầu vào:
${i.join(`
`)}`,{duration:6e3})}else r>=500?P.error((s==null?void 0:s.message)||"Lỗi hệ thống phía máy chủ. Vui lòng thử lại sau."):P.error((s==null?void 0:s.message)||`Đã xảy ra lỗi (${r}).`)}else e.request?(console.error("[Axios Response Interceptor] No response received:",e.request),P.error("Không thể kết nối đến máy chủ. Vui lòng kiểm tra mạng và thử lại.")):(console.error("[Axios Response Interceptor] Error setting up request:",e.message),P.error("Đã xảy ra lỗi khi gửi yêu cầu."));return Promise.reject(((n=e.response)==null?void 0:n.data)||e)});const ej=async(e,t)=>{var n,r,s,i,a,l,c,u,d,h,m,x,f,w,b,g;try{const y=await W.post("/auth/login",{email:e,password:t});if((n=y.data)!=null&&n.success)return(!((s=(r=y.data)==null?void 0:r.data)!=null&&s.user)||!((a=(i=y.data)==null?void 0:i.data)!=null&&a.token))&&console.warn("Cảnh báo: Đăng nhập thành công nhưng thiếu user/token."),y.data.data;if(((l=y.data)==null?void 0:l.message)==="Đăng nhập thành công")return console.log("Đăng nhập thành công, trích xuất dữ liệu."),y.data.data||y.data;throw new Error(((c=y.data)==null?void 0:c.message)||"Đăng nhập thất bại.")}catch(y){if(y.message==="Đăng nhập thành công"||((d=(u=y.response)==null?void 0:u.data)==null?void 0:d.message)==="Đăng nhập thành công")return console.log("Phát hiện đăng nhập thành công được trả về dưới dạng lỗi"),((m=(h=y.response)==null?void 0:h.data)==null?void 0:m.data)||{};if(((x=y.response)==null?void 0:x.status)===401)throw console.log("Đăng nhập thất bại: Thông tin đăng nhập không chính xác"),new Error(((w=(f=y.response)==null?void 0:f.data)==null?void 0:w.message)||"Email hoặc mật khẩu không chính xác");const p=((g=(b=y.response)==null?void 0:b.data)==null?void 0:g.message)||y.message||"Lỗi không xác định";throw console.error("Lỗi dịch vụ đăng nhập:",p),new Error(p)}},tj=async e=>{var t,n,r,s,i;try{const a=await W.post("/auth/register",e);if((t=a.data)!=null&&t.success)return a.data.data||a.data;if(((n=a.data)==null?void 0:n.message)==="Đăng ký thành công")return a.data.data||a.data;throw new Error(((r=a.data)==null?void 0:r.message)||"Đăng ký thất bại.")}catch(a){const l=((i=(s=a.response)==null?void 0:s.data)==null?void 0:i.message)||a.message||"Lỗi không xác định";throw console.error("Lỗi dịch vụ đăng ký:",l),new Error(l)}},nj=()=>{console.log("AuthService: Logout function called (no backend API call implemented).")},rx=async()=>{var e,t,n,r,s;try{const i=await W.get("/auth/me");if((e=i.data)!=null&&e.success&&((t=i.data)!=null&&t.data))return i.data.data;throw new Error(((n=i.data)==null?void 0:n.message)||"Không thể lấy thông tin người dùng.")}catch(i){const a=((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||i.message||"Lỗi không xác định";throw console.error("Lỗi dịch vụ getMe:",a),new Error(a)}},rj=async(e,t)=>{var n,r,s,i;try{const a=await W.put("/auth/change-password",{oldPassword:e,newPassword:t});if((n=a.data)!=null&&n.success||a.status===200||a.status===204)return a.data||{message:"Đổi mật khẩu thành công."};throw new Error(((r=a.data)==null?void 0:r.message)||"Đổi mật khẩu thất bại.")}catch(a){const l=((i=(s=a.response)==null?void 0:s.data)==null?void 0:i.message)||a.message||"Lỗi không xác định";throw console.error("Lỗi dịch vụ changePassword:",l),new Error(l)}},sj=async e=>{var t,n,r,s,i,a,l;try{if(!e.id)throw console.error("Missing profile ID for update"),new Error("Thiếu thông tin ID hồ sơ");const c=e.id,u={...e};if(delete u.id,u.roomId===""||u.roomId===void 0)u.roomId=null;else if(u.roomId!==null){const f=parseInt(u.roomId);u.roomId=isNaN(f)?null:f}if(u.avatarId===""||u.avatarId===void 0)u.avatarId=null;else if(u.avatarId!==null){const f=parseInt(u.avatarId);u.avatarId=isNaN(f)?null:f}if(u.courseYear===""||u.courseYear===void 0)u.courseYear=null;else if(u.courseYear!==null){const f=parseInt(u.courseYear);u.courseYear=isNaN(f)?null:f}if(u.fatherDobYear===""||u.fatherDobYear===void 0)u.fatherDobYear=null;else if(u.fatherDobYear!==null){const f=parseInt(u.fatherDobYear);u.fatherDobYear=isNaN(f)?null:f}if(u.motherDobYear===""||u.motherDobYear===void 0)u.motherDobYear=null;else if(u.motherDobYear!==null){const f=parseInt(u.motherDobYear);u.motherDobYear=isNaN(f)?null:f}["birthDate","startDate","contractEndDate","checkInDate","checkOutDate"].forEach(f=>{if(u[f]===""||u[f]===void 0)u[f]=null;else if(u[f]!==null){const w=new Date(u[f]);isNaN(w.getTime())&&(console.warn(`Invalid date format for ${f}: ${u[f]}`),u[f]=null)}}),console.log("Sanitized profile data before update:",u),console.log("Updating profile ID:",c);let h;const m=await rx(),x=(t=m==null?void 0:m.user)==null?void 0:t.role;x==="STAFF"||x==="ADMIN"?(h=`/students/staff/${c}`,console.log("Detected staff/admin role, using staff API endpoint")):(h=`/students/${c}`,console.log("Using student API endpoint")),console.log("Using API endpoint:",h);try{const f=await W.put(h,u);if((n=f.data)!=null&&n.success||((r=f.data)==null?void 0:r.status)==="success")return f.data;throw console.error("API response error:",f.data),new Error(((s=f.data)==null?void 0:s.message)||"Cập nhật thông tin thất bại.")}catch(f){if(console.error("API call failed:",f),f.response&&(console.error("Error status:",f.response.status),console.error("Error data:",f.response.data),(i=f.response.data)!=null&&i.errors)){console.error("Validation errors:",f.response.data.errors);const b=Object.entries(f.response.data.errors).map(([g,y])=>`${g}: ${y}`).join(", ");throw new Error(`Dữ liệu không hợp lệ. ${b}`)}const w=((l=(a=f.response)==null?void 0:a.data)==null?void 0:l.message)||f.message||"Lỗi không xác định";throw new Error(w)}}catch(c){throw console.error("Lỗi dịch vụ updateProfile:",c),c}},ij=async(e=null,t=1,n=10)=>{var r,s,i,a;try{const l=e?`/auth/login-history/${e}?page=${t}&limit=${n}`:`/auth/login-history?page=${t}&limit=${n}`,c=await W.get(l);if((r=c.data)!=null&&r.success)return{data:c.data.data,meta:c.data.meta};throw new Error(((s=c.data)==null?void 0:s.message)||"Không thể lấy lịch sử đăng nhập")}catch(l){const c=((a=(i=l.response)==null?void 0:i.data)==null?void 0:a.message)||l.message||"Lỗi không xác định";throw console.error("Lỗi khi lấy lịch sử đăng nhập:",c),new Error(c)}},Qe={login:ej,logout:nj,getMe:rx,changePassword:rj,register:tj,updateProfile:sj,getLoginHistory:ij},aj=()=>localStorage.getItem("authToken"),oj=e=>localStorage.setItem("authToken",e),Kl=()=>localStorage.removeItem("authToken"),lj=()=>{const e=localStorage.getItem("authUser");try{return e?JSON.parse(e):null}catch(t){return console.error("Lỗi parse user từ localStorage:",t),Vs(),null}},Xl=e=>localStorage.setItem("authUser",JSON.stringify(e)),Vs=()=>localStorage.removeItem("authUser"),sx=v.createContext(null),cj=({children:e})=>{const[t,n]=v.useState(lj()),[r,s]=v.useState(!0),i=se(),a=Nn(),l=v.useCallback(async()=>{var f,w;if(s(!0),!aj()){n(null),Vs(),s(!1);return}try{const b=await Qe.getMe(),g=((f=b.data)==null?void 0:f.user)||b.user;g?(n(g),Xl(g)):(n(null),Kl(),Vs())}catch(b){((w=b==null?void 0:b.response)==null?void 0:w.status)!==401&&console.error("[AuthContext] Auth check failed (non-401):",b),n(null),Kl(),Vs()}finally{s(!1)}},[]);v.useEffect(()=>{l()},[l]);const c=async x=>{var f,w;s(!0);try{const b=await Qe.login(x.email,x.password),g=b.data||b,y=g.user,p=g.token;if(!y||!p)throw new Error("Dữ liệu đăng nhập không hợp lệ");oj(p),Xl(y),n(y);const j=((w=(f=a.state)==null?void 0:f.from)==null?void 0:w.pathname)||"/";return i(j,{replace:!0}),P.success("Đăng nhập thành công!"),!0}catch(b){return console.error("[AuthContext] Login failed:",b),P.error(b.message||"Đăng nhập thất bại"),!1}finally{s(!1)}},u=x=>{const f={...t,...x};return n(f),Xl(f),f},d=v.useCallback(()=>{n(null),Kl(),Vs(),P.success("Đăng xuất thành công."),i("/login",{replace:!0})},[i]),m={user:t,isAuthenticated:!!t,isLoading:r,login:c,logout:d,register:async x=>{try{return await Qe.register(x)}catch(f){throw console.error("[AuthContext] Registration failed in context:",f),f}},checkAuthStatus:l,updateUserInfo:u};return o.jsx(sx.Provider,{value:m,children:e})},bt=()=>{const e=v.useContext(sx);if(e==null)throw new Error("useAuth must be used within an AuthProvider");return e},ee=()=>o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}),uj=e=>{if(!e)return"";const t="https://house-of-hope-v2-production.up.railway.app";if(e.startsWith("http"))return e;const n=e.startsWith("/")?e:`/${e}`;return`${t}${n}`};function dj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"}))}const hj=v.forwardRef(dj);function fj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const ut=v.forwardRef(fj);function mj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const _d=v.forwardRef(mj);function gj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"}))}const Mf=v.forwardRef(gj);function pj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))}const xj=v.forwardRef(pj);function yj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const vj=v.forwardRef(yj);function bj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"}))}const ix=v.forwardRef(bj);function wj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Z"}))}const jj=v.forwardRef(wj);function Nj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"}))}const Sj=v.forwardRef(Nj);function Cj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Td=v.forwardRef(Cj);function kj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const Ej=v.forwardRef(kj);function _j({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const Tj=v.forwardRef(_j);function Pj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Pd=v.forwardRef(Pj);function Mj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Ij=v.forwardRef(Mj);function Rj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const If=v.forwardRef(Rj);function Dj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Aj=v.forwardRef(Dj);function Lj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const fu=v.forwardRef(Lj);function Oj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const mu=v.forwardRef(Oj);function $j({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Md=v.forwardRef($j);function Fj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Id=v.forwardRef(Fj);function Bj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"}))}const zj=v.forwardRef(Bj);function Uj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const Hj=v.forwardRef(Uj);function Wj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const Pt=v.forwardRef(Wj);function Vj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const Yj=v.forwardRef(Vj);function qj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Rf=v.forwardRef(qj);function Kj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const qi=v.forwardRef(Kj);function Xj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const Qj=v.forwardRef(Xj);function Gj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 7.125C2.25 6.504 2.754 6 3.375 6h6c.621 0 1.125.504 1.125 1.125v3.75c0 .621-.504 1.125-1.125 1.125h-6a1.125 1.125 0 0 1-1.125-1.125v-3.75ZM14.25 8.625c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v8.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-8.25ZM3.75 16.125c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-2.25Z"}))}const gu=v.forwardRef(Gj);function Zj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Mt=v.forwardRef(Zj);function Jj({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))}const Df=v.forwardRef(Jj);function eN({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Af=v.forwardRef(eN);function tN({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const nN=v.forwardRef(tN);function rN({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const ax=v.forwardRef(rN);function sN({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const ox=v.forwardRef(sN);function iN({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"}))}const So=v.forwardRef(iN);function aN({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const pu=v.forwardRef(aN);function oN({title:e,titleId:t,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const lN=v.forwardRef(oN),Lf="src/assets/default-avatar.png",Of=({navigation:e,pathname:t})=>o.jsxs("div",{className:"flex flex-col flex-grow pt-5 overflow-y-auto",children:[" ",o.jsx("div",{className:"flex items-center justify-center flex-shrink-0 px-4 mb-5",children:o.jsx("img",{src:"/LOGO.svg",alt:"Ký Túc Xá - Hệ Thống Quản Lý",className:"h-12 w-auto",loading:"lazy"})}),o.jsx("nav",{className:"mt-5 flex-1 px-2 pb-4 space-y-1",children:e.map(n=>o.jsxs(Le,{to:n.href,className:`group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors duration-150 ease-in-out ${t===n.href||t.startsWith(n.href+"/")?"bg-indigo-100 text-indigo-700 font-semibold shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,"aria-current":t===n.href?"page":void 0,children:[o.jsx(n.icon,{className:`mr-3 flex-shrink-0 h-5 w-5 transition-colors duration-150 ease-in-out ${t===n.href||t.startsWith(n.href+"/")?"text-indigo-500":"text-gray-400 group-hover:text-gray-500"}`,"aria-hidden":"true"}),n.name]},n.name))})]}),cN=()=>{var d,h,m,x,f;const{user:e,logout:t}=bt(),n=Nn(),[r,s]=v.useState(!1),[i,a]=v.useState(!1),l=v.useMemo(()=>{const w=[{name:"Trang chủ",href:"/dashboard",icon:Id,roles:["ADMIN","STAFF","STUDENT"]},{name:"Hồ sơ cá nhân",href:"/profile",icon:Af,roles:["ADMIN","STAFF","STUDENT"]},{name:"Quản lý sinh viên",href:"/students",icon:ox,roles:["ADMIN","STAFF"]},{name:"Quản lý tòa nhà",href:"/buildings",icon:jj,roles:["ADMIN","STAFF"]},{name:"Quản lý phòng ở",href:"/rooms",icon:gu,roles:["ADMIN","STAFF","STUDENT"]},{name:"Tiện nghi KTX",href:"/amenities",icon:Ij,roles:["ADMIN","STAFF"]},{name:"Quản lý bảo trì",href:"/maintenance",icon:So,roles:["ADMIN","STAFF"]},{name:"Yêu cầu sửa chữa",href:"/maintenance/request",icon:So,roles:["STUDENT"]},{name:"Quản lý hóa đơn",href:"/invoices",icon:fu,roles:["ADMIN","STAFF"]},{name:"Quản lý thanh toán",href:"/payments",icon:Aj,roles:["ADMIN","STAFF"]},{name:"Điện nước",href:"/utilities",icon:Sj,roles:["ADMIN","STAFF"]},{name:"Quản lý phương tiện",href:"/vehicles",icon:Df,roles:["ADMIN","STAFF"]},{name:"Đăng ký phương tiện",href:"/vehicles/register",icon:Df,roles:["STUDENT"]},{name:"Quản lý chuyển phòng",href:"/transfers",icon:Mf,roles:["ADMIN","STAFF"]},{name:"Đăng ký chuyển phòng",href:"/transfers/request",icon:Mf,roles:["STUDENT"]}];return!e||!e.role?[]:w.filter(b=>b.roles.includes(e.role))},[e]),c=()=>{a(!1),t()},u=()=>{var w;return e!=null&&e.avatarUrl&&typeof e.avatarUrl=="string"&&e.avatarUrl.trim()!==""?e.avatarUrl.startsWith("http://")||e.avatarUrl.startsWith("https://")?(console.log("Sử dụng URL đầy đủ:",e.avatarUrl),e.avatarUrl):(console.log("Sử dụng URL tương đối:",e.avatarUrl),`${"https://house-of-hope-v2-production.up.railway.app".replace(/\/api\/?$/,"")||""}${e.avatarUrl.startsWith("/")?"":"/"}${e.avatarUrl}`):(w=e==null?void 0:e.avatar)!=null&&w.path?uj(e.avatar.path):null};return v.useEffect(()=>{const w=u();console.log("Thông tin avatar:",{userAvatar:e==null?void 0:e.avatarUrl,processedUrl:w,defaultPath:Lf})},[e]),o.jsxs("div",{className:"min-h-screen bg-gray-100",children:[" ",o.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none opacity-5",style:{}}),o.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row min-h-screen",children:[" ",o.jsxs("div",{className:"hidden lg:fixed lg:inset-y-0 lg:z-20 lg:flex lg:w-64 lg:flex-col",children:[" ",o.jsxs("div",{className:"flex min-h-0 flex-1 flex-col border-r border-gray-200 bg-white shadow-md",children:[" ",o.jsx(Of,{navigation:l,pathname:n.pathname})]})]}),o.jsxs("div",{className:`relative z-40 lg:hidden ${r?"block":"hidden"}`,role:"dialog","aria-modal":"true",children:[o.jsx("div",{className:"fixed inset-0 bg-gray-600/75 transition-opacity ease-linear duration-300","aria-hidden":"true",onClick:()=>s(!1)}),o.jsx("div",{className:"fixed inset-0 flex",children:o.jsxs("div",{className:`relative mr-16 flex w-full max-w-xs flex-1 transform transition ease-in-out duration-300 ${r?"translate-x-0":"-translate-x-full"}`,children:[" ",o.jsx("div",{className:"absolute top-0 left-full flex w-16 justify-center pt-5",children:o.jsxs("button",{type:"button",className:"-m-2.5 p-2.5 text-white hover:text-gray-300",onClick:()=>s(!1),children:[o.jsx("span",{className:"sr-only",children:"Đóng thanh bên"}),o.jsx(lN,{className:"h-6 w-6","aria-hidden":"true"})]})}),o.jsxs("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto bg-white px-6 pb-4 ring-1 ring-white/10",children:[" ",o.jsx(Of,{navigation:l,pathname:n.pathname})]})]})})]}),o.jsxs("div",{className:"flex flex-1 flex-col lg:pl-64",children:[" ",o.jsxs("div",{className:"sticky top-0 z-10 flex h-16 flex-shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[o.jsxs("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>s(!0),children:[o.jsx("span",{className:"sr-only",children:"Mở thanh bên"}),o.jsx(vj,{className:"h-6 w-6","aria-hidden":"true"})]}),o.jsx("div",{className:"flex flex-1 justify-end gap-x-4 self-stretch lg:gap-x-6",children:o.jsx("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:o.jsxs("div",{className:"relative",children:[o.jsxs("button",{type:"button",className:"-m-1.5 flex items-center p-1.5 rounded-full focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",id:"user-menu-button","aria-expanded":i,"aria-haspopup":"true",onClick:()=>a(!i),children:[o.jsx("span",{className:"sr-only",children:"Mở menu người dùng"}),(()=>{const w=u();return console.log("Rendering avatar with URL:",w),w?o.jsx("img",{className:"h-8 w-8 rounded-full bg-gray-200 object-cover border border-gray-200",src:w,alt:"User Avatar",onError:b=>{console.error("Avatar load error:",b),console.log("Failed URL:",b.target.src),b.target.onerror=null,b.target.src=Lf}}):o.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:o.jsx(Af,{className:"h-7 w-7 text-gray-500","aria-hidden":"true"})})})(),o.jsx("span",{className:"hidden lg:flex lg:items-center",children:o.jsx("span",{className:"ml-3 text-sm font-semibold leading-6 text-gray-900","aria-hidden":"true",children:((d=e==null?void 0:e.profile)==null?void 0:d.fullName)||(e==null?void 0:e.name)||(e==null?void 0:e.email)||"Người dùng"})})]}),o.jsxs("div",{className:`absolute right-0 z-20 mt-2.5 w-56 origin-top-right rounded-md bg-white py-2 shadow-lg ring-1 ring-gray-900/5 focus:outline-none transition ease-out duration-100 ${i?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu-button",tabIndex:"-1",children:[o.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:((h=e==null?void 0:e.profile)==null?void 0:h.fullName)||((m=e==null?void 0:e.staffProfile)==null?void 0:m.fullName)||((x=e==null?void 0:e.studentProfile)==null?void 0:x.fullName)||(e==null?void 0:e.name)||((f=e==null?void 0:e.email)==null?void 0:f.split("@")[0])||"Người dùng"}),o.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:e==null?void 0:e.email}),o.jsx("span",{className:`mt-2 inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ring-1 ring-inset ${(e==null?void 0:e.role)==="ADMIN"?"bg-purple-100 text-purple-800 ring-purple-600/20":(e==null?void 0:e.role)==="STAFF"?"bg-blue-100 text-blue-800 ring-blue-600/20":"bg-green-100 text-green-800 ring-green-600/20"}`,children:(e==null?void 0:e.role)||"Unknown Role"})]}),o.jsx(Le,{to:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",role:"menuitem",tabIndex:"-1",onClick:()=>a(!1),children:"Hồ sơ của bạn"}),o.jsx("button",{onClick:c,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",role:"menuitem",tabIndex:"-1",children:"Đăng xuất"})]})]})})})]}),o.jsxs("main",{className:"flex-1 py-6 lg:py-8",children:[" ",o.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:o.jsx(sl,{})})]})]})]})]})},uN=()=>{const{user:e,isLoading:t}=bt(),n=Nn();return t?o.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100",children:o.jsx(ee,{size:"lg"})}):e?o.jsx(cN,{children:o.jsx(sl,{})}):(console.log("[PrivateRoute] User not logged in. Redirecting to /login from:",n.pathname),o.jsx(rl,{to:"/login",state:{from:n},replace:!0}))},Is=({children:e})=>{const{user:t,isLoading:n}=bt();return n?o.jsx("div",{className:"flex justify-center py-10",children:o.jsx(ee,{})}):t&&t.role==="ADMIN"?e||o.jsx(sl,{}):(console.warn("[AdminRoute] Access denied. User is not ADMIN or not logged in. Redirecting to /"),o.jsx(rl,{to:"/",replace:!0}))},Je=({children:e})=>{const{user:t,isLoading:n}=bt();return n?o.jsx("div",{className:"flex justify-center py-10",children:o.jsx(ee,{})}):t&&(t.role==="STAFF"||t.role==="ADMIN")?e||o.jsx(sl,{}):(console.warn("[StaffRoute] Access denied. User is not STAFF/ADMIN or not logged in. Redirecting to /"),o.jsx(rl,{to:"/",replace:!0}))},U=({children:e,type:t="button",variant:n="primary",loading:r=!1,disabled:s=!1,onClick:i,className:a=""})=>{const l={primary:"bg-indigo-600 text-white hover:bg-indigo-700",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200"};return o.jsx("button",{type:t,onClick:i,disabled:s||r,className:`
        px-4 py-2 rounded-md font-medium focus:outline-none focus:ring-2 focus:ring-offset-2
        ${l[n]}
        ${s?"opacity-50 cursor-not-allowed":""}
        ${a}
      `,children:r?"Loading...":e})},D=({label:e,type:t="text",name:n,value:r,onChange:s,required:i=!1,disabled:a=!1,placeholder:l="",error:c="",className:u="",...d})=>o.jsxs("div",{className:`flex flex-col gap-1 ${u}`,children:[e&&o.jsxs("label",{htmlFor:n,className:"text-sm font-medium text-gray-700",children:[e,i&&o.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),o.jsx("input",{id:n,name:n,type:t,value:r,onChange:s,placeholder:l,disabled:a,required:i,className:`
          w-full rounded-md border px-3 py-2 text-sm shadow-sm
          focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500
          ${a?"bg-gray-100 cursor-not-allowed":"bg-white"}
          ${c?"border-red-400 focus:border-red-500 focus:ring-red-500":"border-gray-300"}
        `,...d}),c&&o.jsx("p",{className:"text-sm text-red-600",children:c})]}),ce=({label:e,name:t,value:n,onChange:r,options:s=[],required:i=!1,disabled:a=!1,placeholder:l="-- Chọn --",error:c="",className:u="",...d})=>o.jsxs("div",{className:`flex flex-col gap-1 ${u}`,children:[e&&o.jsxs("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:[e,i&&o.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),o.jsxs("select",{id:t,name:t,value:n,onChange:h=>{r&&r({target:{name:t,value:h.target.value}})},disabled:a,required:i,className:`
          w-full rounded-md border px-3 py-2 text-sm shadow-sm
          focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500
          ${a?"bg-gray-100 cursor-not-allowed":"bg-white"}
          ${c?"border-red-400 focus:border-red-500 focus:ring-red-500":"border-gray-300"}
          appearance-none
        `,...d,children:[o.jsx("option",{value:"",disabled:!0,hidden:!0,children:l}),s.map(h=>o.jsx("option",{value:h.value,children:h.label},h.value))]}),c&&o.jsx("p",{className:"text-sm text-red-600",children:c})]}),tn=({label:e,value:t,onChange:n,rows:r=3,required:s=!1,className:i="",name:a,id:l,placeholder:c="",disabled:u=!1,readOnly:d=!1,error:h=null})=>o.jsxs("div",{children:[e&&o.jsxs("label",{htmlFor:l,className:"block text-sm font-medium text-gray-700 mb-1",children:[e," ",s&&o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{id:l,name:a,rows:r,value:t||"",onChange:n,required:s,placeholder:c,disabled:u,readOnly:d,className:`
          block w-full rounded-md border-gray-300 shadow-sm
          focus:border-indigo-500 focus:ring-indigo-500
          ${h?"border-red-500":""}
          ${i}
        `}),h&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:h})]}),dN=async(e,t="default",n=null)=>{var i,a,l,c,u,d,h,m;const r=new FormData;r.append("file",e),n||(n={"user-avatar":"USER_AVATAR","room-image":"ROOM_IMAGE","building-image":"BUILDING_IMAGE","vehicle-image":"VEHICLE_IMAGE","maintenance-request":"MAINTENANCE_IMAGE",default:"OTHER"}[t]||"OTHER"),r.append("mediaType",n);const s=P.loading(`Đang tải lên: ${e.name}...`);try{const x=await W.post("/media/upload",r,{headers:{"Content-Type":"multipart/form-data"}});if((i=x.data)!=null&&i.success&&((l=(a=x.data)==null?void 0:a.data)!=null&&l.id))return P.success(`Đã tải lên: ${x.data.data.filename||e.name}`,{id:s}),x.data.data;throw new Error(((c=x.data)==null?void 0:c.message)||"Upload file không thành công.")}catch(x){throw console.error("Lỗi service uploadMedia:",((u=x.response)==null?void 0:u.data)||x.message),P.error(((h=(d=x.response)==null?void 0:d.data)==null?void 0:h.message)||`Lỗi khi tải lên: ${e.name}`,{id:s}),((m=x.response)==null?void 0:m.data)||x}},hN=async e=>{var t,n,r,s,i;try{const a=await W.get(`/media/${e}`);if((t=a.data)!=null&&t.success&&((n=a.data)!=null&&n.data))return a.data.data;throw new Error(((r=a.data)==null?void 0:r.message)||`Không tìm thấy media với ID ${e}.`)}catch(a){throw console.error(`Lỗi service getMediaById (${e}):`,((s=a.response)==null?void 0:s.data)||a.message),((i=a.response)==null?void 0:i.data)||a}},fN={uploadMedia:dN,getMediaById:hN},mN=({label:e="Tải ảnh lên",multiple:t=!1,maxFiles:n=5,maxSizeMB:r=5,accept:s="image/*",initialImageUrls:i=[],onUploadComplete:a,onFilesChange:l,className:c="",disabled:u=!1})=>{const[d,h]=v.useState([]),[m,x]=v.useState([]),[f,w]=v.useState([...i]),[b,g]=v.useState(!1),[y,p]=v.useState(null),j=v.useRef(null);v.useEffect(()=>{w([...i]);const S=[...i],k=d.map(T=>URL.createObjectURL(T)),_=[...S,...k];return x(_),l&&l({existingUrls:f,newFiles:d}),()=>{k.forEach(T=>URL.revokeObjectURL(T))}},[i,d]);const N=S=>{p(null);const k=Array.from(S.target.files);if(!k.length)return;let _=f.length+d.length;const T=[],O=[];let $=!1;k.forEach(Y=>{if(t&&_>=n){P.error(`Chỉ được chọn tối đa ${n} ảnh.`),$=!0;return}if(Y.size>r*1024*1024){P.error(`Ảnh "${Y.name}" (${(Y.size/1024/1024).toFixed(1)}MB) vượt quá ${r}MB.`),$=!0;return}d.some(A=>A.name===Y.name&&A.size===Y.size)||(T.push(Y),O.push(URL.createObjectURL(Y)),_++)}),$||(t?h(Y=>[...Y,...T]):(d.forEach(Y=>URL.revokeObjectURL(URL.createObjectURL(Y))),h(T),w([]))),S.target.value=null},C=S=>{const k=f.length,_=[...d],T=[...f];if(S<k)T.splice(S,1),w(T);else{const O=S-k,$=_[O];URL.revokeObjectURL(URL.createObjectURL($)),_.splice(O,1),h(_)}l&&l({existingUrls:T,newFiles:_})},E="http://localhost:5002/uploads";return o.jsxs("div",{className:`space-y-3 ${c}`,children:[o.jsx("label",{className:"block text-sm font-medium leading-6 text-gray-900",children:e}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:`file-upload-${e.replace(/\s+/g,"-")}`,className:`relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500 border border-dashed border-gray-300 px-4 py-2 inline-flex items-center ${u||b?"opacity-50 cursor-not-allowed":""}`,children:[o.jsx(_d,{className:"-ml-0.5 mr-1.5 h-5 w-5","aria-hidden":"true"}),o.jsx("span",{children:"Chọn ảnh"}),o.jsx("input",{id:`file-upload-${e.replace(/\s+/g,"-")}`,ref:j,name:"imageUpload",type:"file",multiple:t,accept:s,onChange:N,className:"sr-only",disabled:u||b})]}),t&&o.jsx("span",{className:"ml-3 text-xs text-gray-500",children:`${f.length+d.length} / ${n} ảnh`})]}),m.length>0&&o.jsx("div",{className:"mt-2 grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-3",children:m.map((S,k)=>{k<f.length;const _=S.startsWith("blob:")||S.startsWith("http")?S:`${E}${S.startsWith("/")?"":"/"}${S}`;return o.jsxs("div",{className:"relative group aspect-square border rounded-md overflow-hidden",children:[o.jsx("img",{src:_,alt:`Preview ${k+1}`,className:"object-cover w-full h-full bg-gray-100",onError:T=>{T.target.onerror=null,T.target.src="src/assets/default-avatar.png"}}),!u&&!b&&o.jsx("button",{type:"button",onClick:()=>C(k),className:"absolute top-1 right-1 bg-red-600/80 hover:bg-red-700 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity z-10",title:"Xóa ảnh",children:o.jsx(Mt,{className:"h-3.5 w-3.5"})})]},k)})}),b&&o.jsxs("div",{className:"text-sm text-gray-600 flex items-center",children:[o.jsx(ee,{size:"sm",className:"mr-2"})," Đang xử lý ảnh..."]}),y&&o.jsxs("div",{className:"text-xs text-red-600 flex items-center",children:[o.jsx(mu,{className:"h-4 w-4 mr-1"})," ",y]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[`Cho phép ${s.replace("image/","").toUpperCase()}. Tối đa ${r}MB/ảnh.`,t&&` Tối đa ${n} ảnh.`]})]})},$t=({children:e,color:t="gray",className:n="",...r})=>{const s={gray:"bg-gray-100 text-gray-600 ring-gray-500/10",red:"bg-red-100 text-red-700 ring-red-600/10",yellow:"bg-yellow-100 text-yellow-800 ring-yellow-600/20",green:"bg-green-100 text-green-700 ring-green-600/20",blue:"bg-blue-100 text-blue-700 ring-blue-700/10",indigo:"bg-indigo-100 text-indigo-700 ring-indigo-700/10",purple:"bg-purple-100 text-purple-700 ring-purple-700/10",pink:"bg-pink-100 text-pink-700 ring-pink-700/10"},i=s[t]||s.gray;return o.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ${i} ${n}`,...r,children:e})},Bt=({columns:e,data:t=[],currentPage:n=1,totalPages:r=1,onPageChange:s,totalRecords:i=0,recordsPerPage:a=10,showingText:l="",outOfText:c="trên tổng số",recordsText:u="bản ghi",pageText:d="Trang"})=>{const h=()=>{const m=[],f=Math.max(1,r||1),w=Math.min(Math.max(1,n||1),f);let b=Math.max(1,w-Math.floor(5/2)),g=Math.min(f,b+5-1);g-b+1<5&&b>1&&(b=Math.max(1,g-5+1));for(let y=b;y<=g;y++)m.push(y);return m};return o.jsxs("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg",children:[i>0&&o.jsxs("div",{className:"px-4 py-2 bg-gray-50 text-sm text-gray-600 border-b border-gray-200",children:[l," ","("," ",Math.min(t.length,a)," ",c," ",i," ",u," ",")",r>1&&` - ${d} ${n}/${r}`]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsx("tr",{children:e.map((m,x)=>o.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",style:{minWidth:m.minWidth||"auto",fontSize:"0.7rem"},children:m.Header},x))})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length>0?t.map((m,x)=>o.jsx("tr",{className:"hover:bg-gray-50",children:e.map((f,w)=>o.jsx("td",{className:"px-3 py-3 text-sm text-gray-600 whitespace-nowrap text-center",children:f.Cell?f.Cell({value:m[f.accessor],row:{original:m}}):f.accessor&&f.accessor.includes(".")?f.accessor.split(".").reduce((b,g)=>b&&b[g],m):m[f.accessor]},w))},x)):o.jsx("tr",{children:o.jsx("td",{colSpan:e.length,className:"px-3 py-4 text-center text-gray-500",children:"Không có dữ liệu"})})})]})}),r>1&&o.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 bg-gray-50 px-4 py-2",children:[o.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[o.jsx("button",{onClick:()=>s(n-1),disabled:n===1,className:`relative inline-flex items-center rounded-md border px-3 py-1 text-sm font-medium ${n===1?"border-gray-300 bg-white text-gray-300 cursor-not-allowed":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:"Trước"}),o.jsx("button",{onClick:()=>s(n+1),disabled:n===r,className:`relative ml-3 inline-flex items-center rounded-md border px-3 py-1 text-sm font-medium ${n===r?"border-gray-300 bg-white text-gray-300 cursor-not-allowed":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:"Sau"})]}),o.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[o.jsx("div",{children:o.jsxs("p",{className:"text-sm text-gray-700",children:[d," ",o.jsx("span",{className:"font-medium",children:n})," / ",o.jsx("span",{className:"font-medium",children:r})]})}),o.jsx("div",{children:o.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[o.jsxs("button",{onClick:()=>s(n-1),disabled:n===1,className:`relative inline-flex items-center rounded-l-md px-2 py-1 text-gray-400 ring-1 ring-inset ring-gray-300 ${n===1?"cursor-not-allowed":"hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:[o.jsx("span",{className:"sr-only",children:"Trang trước"}),o.jsx(Ej,{className:"h-4 w-4","aria-hidden":"true"})]}),h().length>0&&h()[0]>1&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>s(1),className:`relative inline-flex items-center px-3 py-1 text-sm font-semibold ${n===1?"bg-indigo-600 text-white focus-visible:outline-indigo-600 z-10":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:"1"}),h().length>0&&h()[0]>2&&o.jsx("span",{className:"relative inline-flex items-center px-3 py-1 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300 focus:outline-offset-0",children:"..."})]}),h().map(m=>o.jsx("button",{onClick:()=>s(m),className:`relative inline-flex items-center px-3 py-1 text-sm font-semibold ${n===m?"bg-indigo-600 text-white focus-visible:outline-indigo-600 z-10":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:m},m)),h().length>0&&h()[h().length-1]<r&&o.jsxs(o.Fragment,{children:[h().length>0&&h()[h().length-1]<r-1&&o.jsx("span",{className:"relative inline-flex items-center px-3 py-1 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300 focus:outline-offset-0",children:"..."}),o.jsx("button",{onClick:()=>s(r),className:`relative inline-flex items-center px-3 py-1 text-sm font-semibold ${n===r?"bg-indigo-600 text-white focus-visible:outline-indigo-600 z-10":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:r})]}),o.jsxs("button",{onClick:()=>s(n+1),disabled:n===r,className:`relative inline-flex items-center rounded-r-md px-2 py-1 text-gray-400 ring-1 ring-inset ring-gray-300 ${n===r?"cursor-not-allowed":"hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:[o.jsx("span",{className:"sr-only",children:"Trang sau"}),o.jsx(Tj,{className:"h-4 w-4","aria-hidden":"true"})]})]})})]})]})]})},Rd=({columns:e=[],data:t=[],className:n="",currentPage:r=1,totalPages:s=1,onPageChange:i=()=>{}})=>{const a=Array.isArray(t)&&t.length>0,l=Array.isArray(e)&&e.length>0;return!a||!l?o.jsxs("div",{className:`bg-white shadow border border-gray-200 sm:rounded-lg ${n}`,children:[o.jsx("div",{className:"text-center text-gray-500 py-8",children:"Không có dữ liệu hiển thị."}),s>1&&o.jsx("div",{className:"border-t border-gray-200",children:o.jsx(Bt,{columns:e,currentPage:r,totalPages:s,onPageChange:i})})]}):o.jsx("div",{className:`flow-root shadow border border-gray-200 sm:rounded-lg ${n}`,children:o.jsx("div",{className:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8",children:o.jsxs("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:[o.jsx("div",{className:"overflow-hidden ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsx("tr",{children:e.map((c,u)=>o.jsx("th",{scope:"col",className:"py-3.5 px-3 text-center text-sm font-semibold text-gray-900",children:c.Header},typeof c.accessor=="string"?c.accessor:`col-${u}`))})}),o.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:t.map((c,u)=>o.jsx("tr",{className:"hover:bg-gray-50",children:e.map((d,h)=>{let m=null;if(typeof d.accessor=="function")try{m=d.accessor(c)}catch(x){console.error("Error accessing row data:",x),m=null}else if(typeof d.accessor=="string")try{m=d.accessor.split(".").reduce((x,f)=>(x||{})[f],c)}catch(x){console.error("Error accessing nested row data:",x),m=null}return o.jsx("td",{className:"whitespace-nowrap py-4 px-3 text-sm text-gray-700 text-center",children:d.Cell?(()=>{try{return d.Cell({value:m,row:{original:c,index:u}})}catch(x){return console.error("Error rendering cell:",x),"-"}})():m??"-"},`cell-${u}-${h}`)})},c.id||`row-${u}`))})]})}),s>1&&o.jsx("div",{className:"border-t border-gray-200",children:o.jsx(Bt,{columns:e,currentPage:r,totalPages:s,onPageChange:i})})]})})})},gN=({label:e,options:t=[],selectedValues:n=[],onChange:r,disabled:s=!1,className:i="",error:a=null})=>{const l=c=>{const{value:u,checked:d}=c.target,h=parseInt(u,10);let m;d?m=[...n,h]:m=n.filter(x=>x!==h),r(m)};return o.jsxs("fieldset",{className:i,children:[e&&o.jsx("legend",{className:"block text-sm font-medium leading-6 text-gray-900 mb-1",children:e}),o.jsxs("div",{className:"space-y-2",children:[t.length===0&&o.jsx("p",{className:"text-sm text-gray-500 italic",children:"Không có lựa chọn nào."}),t.map(c=>o.jsxs("div",{className:"relative flex items-start",children:[o.jsx("div",{className:"flex h-6 items-center",children:o.jsx("input",{id:`multiselect-${e}-${c.value}`,name:e,type:"checkbox",value:c.value,checked:n.includes(c.value),onChange:l,disabled:s,className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600 disabled:opacity-50"})}),o.jsx("div",{className:"ml-3 text-sm leading-6",children:o.jsx("label",{htmlFor:`multiselect-${e}-${c.value}`,className:`font-medium text-gray-900 ${s?"text-gray-500":""}`,children:c.label})})]},c.value))]}),a&&o.jsx("p",{className:"mt-1 text-xs text-red-600",children:a})]})};function Co(e){"@babel/helpers - typeof";return Co=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Co(e)}function Gn(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function qe(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function sn(e){qe(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Co(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function pN(e,t){qe(2,arguments);var n=sn(e).getTime(),r=Gn(t);return new Date(n+r)}var xN={};function hl(){return xN}function yN(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var lx=6e4,cx=36e5;function vN(e){return qe(1,arguments),e instanceof Date||Co(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function bN(e){if(qe(1,arguments),!vN(e)&&typeof e!="number")return!1;var t=sn(e);return!isNaN(Number(t))}function wN(e,t){qe(2,arguments);var n=Gn(t);return pN(e,-n)}var jN=864e5;function NN(e){qe(1,arguments);var t=sn(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),s=n-r;return Math.floor(s/jN)+1}function ko(e){qe(1,arguments);var t=1,n=sn(e),r=n.getUTCDay(),s=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function ux(e){qe(1,arguments);var t=sn(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=ko(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var a=ko(i);return t.getTime()>=s.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function SN(e){qe(1,arguments);var t=ux(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=ko(n);return r}var CN=6048e5;function kN(e){qe(1,arguments);var t=sn(e),n=ko(t).getTime()-SN(t).getTime();return Math.round(n/CN)+1}function Eo(e,t){var n,r,s,i,a,l,c,u;qe(1,arguments);var d=hl(),h=Gn((n=(r=(s=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=sn(e),x=m.getUTCDay(),f=(x<h?7:0)+x-h;return m.setUTCDate(m.getUTCDate()-f),m.setUTCHours(0,0,0,0),m}function dx(e,t){var n,r,s,i,a,l,c,u;qe(1,arguments);var d=sn(e),h=d.getUTCFullYear(),m=hl(),x=Gn((n=(r=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:m.firstWeekContainsDate)!==null&&r!==void 0?r:(c=m.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(x>=1&&x<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(h+1,0,x),f.setUTCHours(0,0,0,0);var w=Eo(f,t),b=new Date(0);b.setUTCFullYear(h,0,x),b.setUTCHours(0,0,0,0);var g=Eo(b,t);return d.getTime()>=w.getTime()?h+1:d.getTime()>=g.getTime()?h:h-1}function EN(e,t){var n,r,s,i,a,l,c,u;qe(1,arguments);var d=hl(),h=Gn((n=(r=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:d.firstWeekContainsDate)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),m=dx(e,t),x=new Date(0);x.setUTCFullYear(m,0,h),x.setUTCHours(0,0,0,0);var f=Eo(x,t);return f}var _N=6048e5;function TN(e,t){qe(1,arguments);var n=sn(e),r=Eo(n,t).getTime()-EN(n,t).getTime();return Math.round(r/_N)+1}function ae(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var kn={y:function(t,n){var r=t.getUTCFullYear(),s=r>0?r:1-r;return ae(n==="yy"?s%100:s,n.length)},M:function(t,n){var r=t.getUTCMonth();return n==="M"?String(r+1):ae(r+1,2)},d:function(t,n){return ae(t.getUTCDate(),n.length)},a:function(t,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(t,n){return ae(t.getUTCHours()%12||12,n.length)},H:function(t,n){return ae(t.getUTCHours(),n.length)},m:function(t,n){return ae(t.getUTCMinutes(),n.length)},s:function(t,n){return ae(t.getUTCSeconds(),n.length)},S:function(t,n){var r=n.length,s=t.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return ae(i,n.length)}},Ar={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},PN={G:function(t,n,r){var s=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(t,n,r){if(n==="yo"){var s=t.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return kn.y(t,n)},Y:function(t,n,r,s){var i=dx(t,s),a=i>0?i:1-i;if(n==="YY"){var l=a%100;return ae(l,2)}return n==="Yo"?r.ordinalNumber(a,{unit:"year"}):ae(a,n.length)},R:function(t,n){var r=ux(t);return ae(r,n.length)},u:function(t,n){var r=t.getUTCFullYear();return ae(r,n.length)},Q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return ae(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return ae(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,n,r){var s=t.getUTCMonth();switch(n){case"M":case"MM":return kn.M(t,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(t,n,r){var s=t.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return ae(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(t,n,r,s){var i=TN(t,s);return n==="wo"?r.ordinalNumber(i,{unit:"week"}):ae(i,n.length)},I:function(t,n,r){var s=kN(t);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):ae(s,n.length)},d:function(t,n,r){return n==="do"?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):kn.d(t,n)},D:function(t,n,r){var s=NN(t);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):ae(s,n.length)},E:function(t,n,r){var s=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(t,n,r,s){var i=t.getUTCDay(),a=(i-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return ae(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,n,r,s){var i=t.getUTCDay(),a=(i-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return ae(a,n.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,n,r){var s=t.getUTCDay(),i=s===0?7:s;switch(n){case"i":return String(i);case"ii":return ae(i,n.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(t,n,r){var s=t.getUTCHours(),i=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,n,r){var s=t.getUTCHours(),i;switch(s===12?i=Ar.noon:s===0?i=Ar.midnight:i=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,n,r){var s=t.getUTCHours(),i;switch(s>=17?i=Ar.evening:s>=12?i=Ar.afternoon:s>=4?i=Ar.morning:i=Ar.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,n,r){if(n==="ho"){var s=t.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return kn.h(t,n)},H:function(t,n,r){return n==="Ho"?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):kn.H(t,n)},K:function(t,n,r){var s=t.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):ae(s,n.length)},k:function(t,n,r){var s=t.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):ae(s,n.length)},m:function(t,n,r){return n==="mo"?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):kn.m(t,n)},s:function(t,n,r){return n==="so"?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):kn.s(t,n)},S:function(t,n){return kn.S(t,n)},X:function(t,n,r,s){var i=s._originalDate||t,a=i.getTimezoneOffset();if(a===0)return"Z";switch(n){case"X":return Ff(a);case"XXXX":case"XX":return hr(a);case"XXXXX":case"XXX":default:return hr(a,":")}},x:function(t,n,r,s){var i=s._originalDate||t,a=i.getTimezoneOffset();switch(n){case"x":return Ff(a);case"xxxx":case"xx":return hr(a);case"xxxxx":case"xxx":default:return hr(a,":")}},O:function(t,n,r,s){var i=s._originalDate||t,a=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+$f(a,":");case"OOOO":default:return"GMT"+hr(a,":")}},z:function(t,n,r,s){var i=s._originalDate||t,a=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+$f(a,":");case"zzzz":default:return"GMT"+hr(a,":")}},t:function(t,n,r,s){var i=s._originalDate||t,a=Math.floor(i.getTime()/1e3);return ae(a,n.length)},T:function(t,n,r,s){var i=s._originalDate||t,a=i.getTime();return ae(a,n.length)}};function $f(e,t){var n=e>0?"-":"+",r=Math.abs(e),s=Math.floor(r/60),i=r%60;if(i===0)return n+String(s);var a=t;return n+String(s)+a+ae(i,2)}function Ff(e,t){if(e%60===0){var n=e>0?"-":"+";return n+ae(Math.abs(e)/60,2)}return hr(e,t)}function hr(e,t){var n=t||"",r=e>0?"-":"+",s=Math.abs(e),i=ae(Math.floor(s/60),2),a=ae(s%60,2);return r+i+n+a}var Bf=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},hx=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},MN=function(t,n){var r=t.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return Bf(t,n);var a;switch(s){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;case"PPPP":default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",Bf(s,n)).replace("{{time}}",hx(i,n))},IN={p:hx,P:MN},RN=["D","DD"],DN=["YY","YYYY"];function AN(e){return RN.indexOf(e)!==-1}function LN(e){return DN.indexOf(e)!==-1}function zf(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var ON={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$N=function(t,n,r){var s,i=ON[t];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function rs(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var FN={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},BN={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zN={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},UN={date:rs({formats:FN,defaultWidth:"full"}),time:rs({formats:BN,defaultWidth:"full"}),dateTime:rs({formats:zN,defaultWidth:"full"})},HN={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},WN=function(t,n,r,s){return HN[t]};function Qt(e){return function(t,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):i;s=e.formattingValues[a]||e.formattingValues[i]}else{var l=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return s[u]}}var VN={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},YN={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qN={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},KN={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},XN={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},QN={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},GN=function(t,n){var r=Number(t),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},ZN={ordinalNumber:GN,era:Qt({values:VN,defaultWidth:"wide"}),quarter:Qt({values:YN,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Qt({values:qN,defaultWidth:"wide"}),day:Qt({values:KN,defaultWidth:"wide"}),dayPeriod:Qt({values:XN,defaultWidth:"wide",formattingValues:QN,defaultFormattingWidth:"wide"})};function Gt(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;var a=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?e5(l,function(h){return h.test(a)}):JN(l,function(h){return h.test(a)}),u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;var d=t.slice(a.length);return{value:u,rest:d}}}function JN(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function e5(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function fx(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var s=r[0],i=t.match(e.parsePattern);if(!i)return null;var a=e.valueCallback?e.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;var l=t.slice(s.length);return{value:a,rest:l}}}var t5=/^(\d+)(th|st|nd|rd)?/i,n5=/\d+/i,r5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},s5={any:[/^b/i,/^(a|c)/i]},i5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},a5={any:[/1/i,/2/i,/3/i,/4/i]},o5={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},l5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},c5={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},u5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},d5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},h5={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},f5={ordinalNumber:fx({matchPattern:t5,parsePattern:n5,valueCallback:function(t){return parseInt(t,10)}}),era:Gt({matchPatterns:r5,defaultMatchWidth:"wide",parsePatterns:s5,defaultParseWidth:"any"}),quarter:Gt({matchPatterns:i5,defaultMatchWidth:"wide",parsePatterns:a5,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Gt({matchPatterns:o5,defaultMatchWidth:"wide",parsePatterns:l5,defaultParseWidth:"any"}),day:Gt({matchPatterns:c5,defaultMatchWidth:"wide",parsePatterns:u5,defaultParseWidth:"any"}),dayPeriod:Gt({matchPatterns:d5,defaultMatchWidth:"any",parsePatterns:h5,defaultParseWidth:"any"})},m5={code:"en-US",formatDistance:$N,formatLong:UN,formatRelative:WN,localize:ZN,match:f5,options:{weekStartsOn:0,firstWeekContainsDate:1}},g5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,p5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,x5=/^'([^]*?)'?$/,y5=/''/g,v5=/[a-zA-Z]/;function Ce(e,t,n){var r,s,i,a,l,c,u,d,h,m,x,f,w,b,g,y,p,j;qe(2,arguments);var N=String(t),C=hl(),E=(r=(s=n==null?void 0:n.locale)!==null&&s!==void 0?s:C.locale)!==null&&r!==void 0?r:m5,S=Gn((i=(a=(l=(c=n==null?void 0:n.firstWeekContainsDate)!==null&&c!==void 0?c:n==null||(u=n.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&l!==void 0?l:C.firstWeekContainsDate)!==null&&a!==void 0?a:(h=C.locale)===null||h===void 0||(m=h.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=Gn((x=(f=(w=(b=n==null?void 0:n.weekStartsOn)!==null&&b!==void 0?b:n==null||(g=n.locale)===null||g===void 0||(y=g.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&w!==void 0?w:C.weekStartsOn)!==null&&f!==void 0?f:(p=C.locale)===null||p===void 0||(j=p.options)===null||j===void 0?void 0:j.weekStartsOn)!==null&&x!==void 0?x:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!E.localize)throw new RangeError("locale must contain localize property");if(!E.formatLong)throw new RangeError("locale must contain formatLong property");var _=sn(e);if(!bN(_))throw new RangeError("Invalid time value");var T=yN(_),O=wN(_,T),$={firstWeekContainsDate:S,weekStartsOn:k,locale:E,_originalDate:_},Y=N.match(p5).map(function(A){var R=A[0];if(R==="p"||R==="P"){var H=IN[R];return H(A,E.formatLong)}return A}).join("").match(g5).map(function(A){if(A==="''")return"'";var R=A[0];if(R==="'")return b5(A);var H=PN[R];if(H)return!(n!=null&&n.useAdditionalWeekYearTokens)&&LN(A)&&zf(A,t,String(e)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&AN(A)&&zf(A,t,String(e)),H(O,A,E.localize,$);if(R.match(v5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return A}).join("");return Y}function b5(e){var t=e.match(x5);return t?t[1].replace(y5,"'"):e}function De(e,t){var n;qe(1,arguments);var r=Gn((n=void 0)!==null&&n!==void 0?n:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var s=S5(e),i;if(s.date){var a=C5(s.date,r);i=k5(a.restDateString,a.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var l=i.getTime(),c=0,u;if(s.time&&(c=E5(s.time),isNaN(c)))return new Date(NaN);if(s.timezone){if(u=_5(s.timezone),isNaN(u))return new Date(NaN)}else{var d=new Date(l+c),h=new Date(0);return h.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),h}return new Date(l+c+u)}var ma={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},w5=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,j5=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,N5=/^([+-])(\d{2})(?::?(\d{2}))?$/;function S5(e){var t={},n=e.split(ma.dateTimeDelimiter),r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],ma.timeZoneDelimiter.test(t.date)&&(t.date=e.split(ma.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){var s=ma.timezone.exec(r);s?(t.time=r.replace(s[1],""),t.timezone=s[1]):t.time=r}return t}function C5(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?s:i*100,restDateString:e.slice((r[1]||r[2]).length)}}function k5(e,t){if(t===null)return new Date(NaN);var n=e.match(w5);if(!n)return new Date(NaN);var r=!!n[4],s=Rs(n[1]),i=Rs(n[2])-1,a=Rs(n[3]),l=Rs(n[4]),c=Rs(n[5])-1;if(r)return R5(t,l,c)?T5(t,l,c):new Date(NaN);var u=new Date(0);return!M5(t,i,a)||!I5(t,s)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(s,a)),u)}function Rs(e){return e?parseInt(e):1}function E5(e){var t=e.match(j5);if(!t)return NaN;var n=Ql(t[1]),r=Ql(t[2]),s=Ql(t[3]);return D5(n,r,s)?n*cx+r*lx+s*1e3:NaN}function Ql(e){return e&&parseFloat(e.replace(",","."))||0}function _5(e){if(e==="Z")return 0;var t=e.match(N5);if(!t)return 0;var n=t[1]==="+"?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return A5(r,s)?n*(r*cx+s*lx):NaN}function T5(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var s=r.getUTCDay()||7,i=(t-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+i),r}var P5=[31,null,31,30,31,30,31,31,30,31,30,31];function mx(e){return e%400===0||e%4===0&&e%100!==0}function M5(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(P5[t]||(mx(e)?29:28))}function I5(e,t){return t>=1&&t<=(mx(e)?366:365)}function R5(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function D5(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function A5(e,t){return t>=0&&t<=59}const Ee=({title:e,children:t,className:n=""})=>o.jsxs("div",{className:`bg-white p-6 rounded-lg shadow ${n}`,children:[e&&o.jsx("div",{className:"mb-4",children:o.jsx("h2",{className:"text-lg font-medium text-gray-800",children:e})}),t]}),Dd=({children:e,activeTab:t,onChange:n})=>{const[r,s]=v.useState(t||""),i=v.useRef(null);v.useEffect(()=>{if(t)s(t);else if(v.Children.count(e)>0){const c=v.Children.toArray(e)[0].props.id;s(c)}},[t,e]);const a=c=>{s(c),n&&n(c)},l=v.Children.toArray(e);return o.jsxs("div",{children:[o.jsx("div",{className:"border-b border-gray-200",ref:i,children:o.jsx("nav",{className:"flex -mb-px space-x-8 overflow-x-auto px-4","aria-label":"Tabs",children:l.map(c=>{const{id:u,label:d,icon:h}=c.props,m=r===u;return o.jsxs("button",{id:`tab-${u}`,"aria-controls":`tabpanel-${u}`,"aria-selected":m,role:"tab",className:`group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap
                  ${m?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>a(u),children:[h&&o.jsx(h,{className:`-ml-0.5 mr-2 h-5 w-5 ${m?"text-indigo-500":"text-gray-400 group-hover:text-gray-500"}`,"aria-hidden":"true"}),d]},u)})})}),o.jsx("div",{className:"mt-2",children:l.map(c=>v.cloneElement(c,{key:c.props.id,isActive:r===c.props.id,onClick:()=>a(c.props.id)}))})]})},Zt=({id:e,label:t,icon:n,children:r,isActive:s,onClick:i})=>o.jsx("div",{role:"tabpanel",hidden:!s,id:`tabpanel-${e}`,"aria-labelledby":`tab-${e}`,className:s?"block":"hidden",children:r}),L5=()=>{const[e,t]=v.useState(""),[n,r]=v.useState(""),[s,i]=v.useState(""),{login:a,user:l,isLoading:c}=bt(),u=se(),d=Nn(),[h,m]=v.useState(!1);v.useEffect(()=>{var f,w;if(!c&&l){const b=((w=(f=d.state)==null?void 0:f.from)==null?void 0:w.pathname)||"/";console.log(`[Login Page] User authenticated. Redirecting to: ${b}`),u(b,{replace:!0})}},[c,l,u,d.state]);const x=async f=>{if(f.preventDefault(),i(""),!h){m(!0);try{await a({email:e,password:n})||i("Email hoặc mật khẩu không chính xác. Vui lòng thử lại.")}catch(w){console.error("[Login Page] Login failed:",w),i(w.message||"Đăng nhập thất bại. Vui lòng thử lại.")}finally{m(!1)}}};return c?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:o.jsx(ee,{size:"lg"})}):l?null:o.jsxs("div",{className:"min-h-screen flex items-center justify-center relative bg-gray-100 overflow-hidden",children:[" ",o.jsx("div",{className:"absolute inset-0 z-0 bg-cover bg-center",style:{backgroundImage:'url("/loginformbackground.jpg")'}}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-600/70 via-purple-700/60 to-black/70"}),o.jsx("div",{className:"w-full max-w-md z-10 px-4 sm:px-0",children:o.jsxs("div",{className:"bg-white/95 backdrop-blur-sm px-6 py-8 sm:px-10 sm:py-10 rounded-xl shadow-2xl border border-white/10",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("img",{className:"mx-auto h-12 w-auto mb-4",src:"/LOGO.svg",alt:"Dormitory Management System"}),o.jsx("h2",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"QUẢN LÝ KÝ TÚC XÁ"}),o.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Đăng nhập để tiếp tục"})]}),s&&o.jsx("div",{role:"alert",className:"mb-4 rounded border-s-4 border-red-500 bg-red-50 p-3",children:o.jsx("p",{className:"text-sm text-red-700",children:s})}),o.jsxs("form",{className:"space-y-5",onSubmit:x,children:[o.jsx("div",{children:o.jsx(D,{label:"Email",id:"email",type:"email",name:"email",autoComplete:"email",required:!0,value:e,onChange:f=>t(f.target.value),placeholder:"Nhập địa chỉ email",disabled:h})}),o.jsx("div",{children:o.jsx(D,{label:"Mật khẩu",id:"password",type:"password",name:"password",autoComplete:"current-password",required:!0,value:n,onChange:f=>r(f.target.value),placeholder:"Nhập mật khẩu",disabled:h})}),o.jsx("div",{className:"text-right text-sm",children:o.jsx(Le,{to:"/forgot-password",className:"font-semibold text-indigo-600 hover:text-indigo-500",children:"Quên mật khẩu?"})}),o.jsx("div",{children:o.jsx(U,{type:"submit",className:"w-full",disabled:h,isLoading:h,children:"Đăng nhập"})})]}),o.jsxs("div",{className:"mt-6 text-sm text-center",children:[o.jsx("span",{className:"text-gray-600",children:"Chưa có tài khoản? "}),o.jsx(Le,{to:"/register",className:"font-semibold text-indigo-600 hover:text-indigo-500",children:"Đăng ký ngay"})]}),o.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500 border-t border-gray-200 pt-4",children:[o.jsx("p",{className:"font-medium",children:"Tài khoản thử nghiệm:"}),o.jsx("p",{children:"Admin: admin@example.com / admin123"}),o.jsx("p",{children:"Staff: staff1@example.com / staff123"}),o.jsx("p",{children:"Student: student1@example.com / student123"})]})]})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ki(e){return e+.5|0}const Ln=(e,t,n)=>Math.max(Math.min(e,n),t);function Ys(e){return Ln(Ki(e*2.55),0,255)}function qn(e){return Ln(Ki(e*255),0,255)}function hn(e){return Ln(Ki(e/2.55)/100,0,1)}function Uf(e){return Ln(Ki(e*100),0,100)}const wt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},xu=[..."0123456789ABCDEF"],O5=e=>xu[e&15],$5=e=>xu[(e&240)>>4]+xu[e&15],ga=e=>(e&240)>>4===(e&15),F5=e=>ga(e.r)&&ga(e.g)&&ga(e.b)&&ga(e.a);function B5(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&wt[e[1]]*17,g:255&wt[e[2]]*17,b:255&wt[e[3]]*17,a:t===5?wt[e[4]]*17:255}:(t===7||t===9)&&(n={r:wt[e[1]]<<4|wt[e[2]],g:wt[e[3]]<<4|wt[e[4]],b:wt[e[5]]<<4|wt[e[6]],a:t===9?wt[e[7]]<<4|wt[e[8]]:255})),n}const z5=(e,t)=>e<255?t(e):"";function U5(e){var t=F5(e)?O5:$5;return e?"#"+t(e.r)+t(e.g)+t(e.b)+z5(e.a,t):void 0}const H5=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function gx(e,t,n){const r=t*Math.min(n,1-n),s=(i,a=(i+e/30)%12)=>n-r*Math.max(Math.min(a-3,9-a,1),-1);return[s(0),s(8),s(4)]}function W5(e,t,n){const r=(s,i=(s+e/60)%6)=>n-n*t*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function V5(e,t,n){const r=gx(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)r[s]*=1-t-n,r[s]+=t;return r}function Y5(e,t,n,r,s){return e===s?(t-n)/r+(t<n?6:0):t===s?(n-e)/r+2:(e-t)/r+4}function Ad(e){const n=e.r/255,r=e.g/255,s=e.b/255,i=Math.max(n,r,s),a=Math.min(n,r,s),l=(i+a)/2;let c,u,d;return i!==a&&(d=i-a,u=l>.5?d/(2-i-a):d/(i+a),c=Y5(n,r,s,d,i),c=c*60+.5),[c|0,u||0,l]}function Ld(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(qn)}function Od(e,t,n){return Ld(gx,e,t,n)}function q5(e,t,n){return Ld(V5,e,t,n)}function K5(e,t,n){return Ld(W5,e,t,n)}function px(e){return(e%360+360)%360}function X5(e){const t=H5.exec(e);let n=255,r;if(!t)return;t[5]!==r&&(n=t[6]?Ys(+t[5]):qn(+t[5]));const s=px(+t[2]),i=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?r=q5(s,i,a):t[1]==="hsv"?r=K5(s,i,a):r=Od(s,i,a),{r:r[0],g:r[1],b:r[2],a:n}}function Q5(e,t){var n=Ad(e);n[0]=px(n[0]+t),n=Od(n),e.r=n[0],e.g=n[1],e.b=n[2]}function G5(e){if(!e)return;const t=Ad(e),n=t[0],r=Uf(t[1]),s=Uf(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${s}%, ${hn(e.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const Hf={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Wf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Z5(){const e={},t=Object.keys(Wf),n=Object.keys(Hf);let r,s,i,a,l;for(r=0;r<t.length;r++){for(a=l=t[r],s=0;s<n.length;s++)i=n[s],l=l.replace(i,Hf[i]);i=parseInt(Wf[a],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let pa;function J5(e){pa||(pa=Z5(),pa.transparent=[0,0,0,0]);const t=pa[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const eS=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function tS(e){const t=eS.exec(e);let n=255,r,s,i;if(t){if(t[7]!==r){const a=+t[7];n=t[8]?Ys(a):Ln(a*255,0,255)}return r=+t[1],s=+t[3],i=+t[5],r=255&(t[2]?Ys(r):Ln(r,0,255)),s=255&(t[4]?Ys(s):Ln(s,0,255)),i=255&(t[6]?Ys(i):Ln(i,0,255)),{r,g:s,b:i,a:n}}}function nS(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${hn(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Gl=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Lr=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function rS(e,t,n){const r=Lr(hn(e.r)),s=Lr(hn(e.g)),i=Lr(hn(e.b));return{r:qn(Gl(r+n*(Lr(hn(t.r))-r))),g:qn(Gl(s+n*(Lr(hn(t.g))-s))),b:qn(Gl(i+n*(Lr(hn(t.b))-i))),a:e.a+n*(t.a-e.a)}}function xa(e,t,n){if(e){let r=Ad(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,t===0?360:1)),r=Od(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function xx(e,t){return e&&Object.assign(t||{},e)}function Vf(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=qn(e[3]))):(t=xx(e,{r:0,g:0,b:0,a:1}),t.a=qn(t.a)),t}function sS(e){return e.charAt(0)==="r"?tS(e):X5(e)}class Ri{constructor(t){if(t instanceof Ri)return t;const n=typeof t;let r;n==="object"?r=Vf(t):n==="string"&&(r=B5(t)||J5(t)||sS(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=xx(this._rgb);return t&&(t.a=hn(t.a)),t}set rgb(t){this._rgb=Vf(t)}rgbString(){return this._valid?nS(this._rgb):void 0}hexString(){return this._valid?U5(this._rgb):void 0}hslString(){return this._valid?G5(this._rgb):void 0}mix(t,n){if(t){const r=this.rgb,s=t.rgb;let i;const a=n===i?.5:n,l=2*a-1,c=r.a-s.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-u,r.r=255&u*r.r+i*s.r+.5,r.g=255&u*r.g+i*s.g+.5,r.b=255&u*r.b+i*s.b+.5,r.a=a*r.a+(1-a)*s.a,this.rgb=r}return this}interpolate(t,n){return t&&(this._rgb=rS(this._rgb,t._rgb,n)),this}clone(){return new Ri(this.rgb)}alpha(t){return this._rgb.a=qn(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Ki(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return xa(this._rgb,2,t),this}darken(t){return xa(this._rgb,2,-t),this}saturate(t){return xa(this._rgb,1,t),this}desaturate(t){return xa(this._rgb,1,-t),this}rotate(t){return Q5(this._rgb,t),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function on(){}const iS=(()=>{let e=0;return()=>e++})();function ct(e){return e==null}function Oe(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function re(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function wn(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Vt(e,t){return wn(e)?e:t}function le(e,t){return typeof e>"u"?t:e}const aS=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,yx=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function fe(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function oe(e,t,n,r){let s,i,a;if(Oe(e))for(i=e.length,s=0;s<i;s++)t.call(n,e[s],s);else if(re(e))for(a=Object.keys(e),i=a.length,s=0;s<i;s++)t.call(n,e[a[s]],a[s])}function _o(e,t){let n,r,s,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(s=e[n],i=t[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function To(e){if(Oe(e))return e.map(To);if(re(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let s=0;for(;s<r;++s)t[n[s]]=To(e[n[s]]);return t}return e}function vx(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function oS(e,t,n,r){if(!vx(e))return;const s=t[e],i=n[e];re(s)&&re(i)?Di(s,i,r):t[e]=To(i)}function Di(e,t,n){const r=Oe(t)?t:[t],s=r.length;if(!re(e))return e;n=n||{};const i=n.merger||oS;let a;for(let l=0;l<s;++l){if(a=r[l],!re(a))continue;const c=Object.keys(a);for(let u=0,d=c.length;u<d;++u)i(c[u],e,a,n)}return e}function oi(e,t){return Di(e,t,{merger:lS})}function lS(e,t,n){if(!vx(e))return;const r=t[e],s=n[e];re(r)&&re(s)?oi(r,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=To(s))}const Yf={"":e=>e,x:e=>e.x,y:e=>e.y};function cS(e){const t=e.split("."),n=[];let r="";for(const s of t)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function uS(e){const t=cS(e);return n=>{for(const r of t){if(r==="")break;n=n&&n[r]}return n}}function Ai(e,t){return(Yf[t]||(Yf[t]=uS(t)))(e)}function $d(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Po=e=>typeof e<"u",Zn=e=>typeof e=="function",qf=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function dS(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Re=Math.PI,Se=2*Re,Mo=Number.POSITIVE_INFINITY,hS=Re/180,Pe=Re/2,ar=Re/4,Kf=Re*2/3,Xf=Math.log10,Qf=Math.sign;function fS(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(n|0)&&t.push(n),t.sort((s,i)=>s-i).pop(),t}function Io(e){return!isNaN(parseFloat(e))&&isFinite(e)}function yr(e){return e*(Re/180)}function mS(e){return e*(180/Re)}function bx(e,t){const n=t.x-e.x,r=t.y-e.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Re&&(i+=Se),{angle:i,distance:s}}function gS(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function or(e){return(e%Se+Se)%Se}function Ro(e,t,n,r){const s=or(e),i=or(t),a=or(n),l=or(i-s),c=or(a-s),u=or(s-i),d=or(s-a);return s===i||s===a||r&&i===a||l>c&&u<d}function Ct(e,t,n){return Math.max(t,Math.min(n,e))}function pS(e){return Ct(e,-32768,32767)}function qs(e,t,n,r=1e-6){return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function Fd(e,t,n){n=n||(a=>e[a]<t);let r=e.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const yu=(e,t,n,r)=>Fd(e,n,r?s=>{const i=e[s][t];return i<n||i===n&&e[s+1][t]===n}:s=>e[s][t]<n),xS=(e,t,n)=>Fd(e,n,r=>e[r][t]>=n);function yS(e,t,n){let r=0,s=e.length;for(;r<s&&e[r]<t;)r++;for(;s>r&&e[s-1]>n;)s--;return r>0||s<e.length?e.slice(r,s):e}const wx=["push","pop","shift","splice","unshift"];function vS(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),wx.forEach(n=>{const r="_onData"+$d(n),s=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...i){const a=s.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...i)}),a}})})}function Gf(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(t);s!==-1&&r.splice(s,1),!(r.length>0)&&(wx.forEach(i=>{delete e[i]}),delete e._chartjs)}function bS(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const jx=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Nx(e,t){let n=[],r=!1;return function(...s){n=s,r||(r=!0,jx.call(window,()=>{r=!1,e.apply(t,n)}))}}function wS(e,t){let n;return function(...r){return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}const Sx=e=>e==="start"?"left":e==="end"?"right":"center",ht=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,jS=(e,t,n,r)=>e===(r?"left":"right")?n:e==="center"?(t+n)/2:t,ya=e=>e===0||e===1,Zf=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Se/n)),Jf=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Se/n)+1,li={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Pe)+1,easeOutSine:e=>Math.sin(e*Pe),easeInOutSine:e=>-.5*(Math.cos(Re*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>ya(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>ya(e)?e:Zf(e,.075,.3),easeOutElastic:e=>ya(e)?e:Jf(e,.075,.3),easeInOutElastic(e){return ya(e)?e:e<.5?.5*Zf(e*2,.1125,.45):.5+.5*Jf(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-li.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?li.easeInBounce(e*2)*.5:li.easeOutBounce(e*2-1)*.5+.5};function Cx(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function em(e){return Cx(e)?e:new Ri(e)}function Zl(e){return Cx(e)?e:new Ri(e).saturate(.5).darken(.1).hexString()}const NS=["x","y","borderWidth","radius","tension"],SS=["color","borderColor","backgroundColor"];function CS(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:SS},numbers:{type:"number",properties:NS}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function kS(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const tm=new Map;function ES(e,t){t=t||{};const n=e+JSON.stringify(t);let r=tm.get(n);return r||(r=new Intl.NumberFormat(e,t),tm.set(n,r)),r}function kx(e,t,n){return ES(t,n).format(e)}const Ex={values(e){return Oe(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const r=this.chart.options.locale;let s,i=e;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),i=_S(e,n)}const a=Xf(Math.abs(i)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),kx(e,r,c)},logarithmic(e,t,n){if(e===0)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(Xf(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?Ex.numeric.call(this,e,t,n):""}};function _S(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var TS={formatters:Ex};function PS(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:TS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Tr=Object.create(null),vu=Object.create(null);function ci(e,t){if(!t)return e;const n=t.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];e=e[i]||(e[i]=Object.create(null))}return e}function Jl(e,t,n){return typeof t=="string"?Di(ci(e,t),n):Di(ci(e,""),t)}class MS{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Zl(s.backgroundColor),this.hoverBorderColor=(r,s)=>Zl(s.borderColor),this.hoverColor=(r,s)=>Zl(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Jl(this,t,n)}get(t){return ci(this,t)}describe(t,n){return Jl(vu,t,n)}override(t,n){return Jl(Tr,t,n)}route(t,n,r,s){const i=ci(this,t),a=ci(this,r),l="_"+n;Object.defineProperties(i,{[l]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],u=a[s];return re(c)?Object.assign({},u,c):le(c,u)},set(c){this[l]=c}}})}apply(t){t.forEach(n=>n(this))}}var we=new MS({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[CS,kS,PS]);function IS(e){return!e||ct(e.size)||ct(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function nm(e,t,n,r,s){let i=t[s];return i||(i=t[s]=e.measureText(s).width,n.push(s)),i>r&&(r=i),r}function lr(e,t,n){const r=e.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((t-s)*r)/r+s}function rm(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function sm(e,t,n,r){_x(e,t,n,r,null)}function _x(e,t,n,r,s){let i,a,l,c,u,d,h,m;const x=t.pointStyle,f=t.rotation,w=t.radius;let b=(f||0)*hS;if(x&&typeof x=="object"&&(i=x.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(n,r),e.rotate(b),e.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),e.restore();return}if(!(isNaN(w)||w<=0)){switch(e.beginPath(),x){default:s?e.ellipse(n,r,s/2,w,0,0,Se):e.arc(n,r,w,0,Se),e.closePath();break;case"triangle":d=s?s/2:w,e.moveTo(n+Math.sin(b)*d,r-Math.cos(b)*w),b+=Kf,e.lineTo(n+Math.sin(b)*d,r-Math.cos(b)*w),b+=Kf,e.lineTo(n+Math.sin(b)*d,r-Math.cos(b)*w),e.closePath();break;case"rectRounded":u=w*.516,c=w-u,a=Math.cos(b+ar)*c,h=Math.cos(b+ar)*(s?s/2-u:c),l=Math.sin(b+ar)*c,m=Math.sin(b+ar)*(s?s/2-u:c),e.arc(n-h,r-l,u,b-Re,b-Pe),e.arc(n+m,r-a,u,b-Pe,b),e.arc(n+h,r+l,u,b,b+Pe),e.arc(n-m,r+a,u,b+Pe,b+Re),e.closePath();break;case"rect":if(!f){c=Math.SQRT1_2*w,d=s?s/2:c,e.rect(n-d,r-c,2*d,2*c);break}b+=ar;case"rectRot":h=Math.cos(b)*(s?s/2:w),a=Math.cos(b)*w,l=Math.sin(b)*w,m=Math.sin(b)*(s?s/2:w),e.moveTo(n-h,r-l),e.lineTo(n+m,r-a),e.lineTo(n+h,r+l),e.lineTo(n-m,r+a),e.closePath();break;case"crossRot":b+=ar;case"cross":h=Math.cos(b)*(s?s/2:w),a=Math.cos(b)*w,l=Math.sin(b)*w,m=Math.sin(b)*(s?s/2:w),e.moveTo(n-h,r-l),e.lineTo(n+h,r+l),e.moveTo(n+m,r-a),e.lineTo(n-m,r+a);break;case"star":h=Math.cos(b)*(s?s/2:w),a=Math.cos(b)*w,l=Math.sin(b)*w,m=Math.sin(b)*(s?s/2:w),e.moveTo(n-h,r-l),e.lineTo(n+h,r+l),e.moveTo(n+m,r-a),e.lineTo(n-m,r+a),b+=ar,h=Math.cos(b)*(s?s/2:w),a=Math.cos(b)*w,l=Math.sin(b)*w,m=Math.sin(b)*(s?s/2:w),e.moveTo(n-h,r-l),e.lineTo(n+h,r+l),e.moveTo(n+m,r-a),e.lineTo(n-m,r+a);break;case"line":a=s?s/2:Math.cos(b)*w,l=Math.sin(b)*w,e.moveTo(n-a,r-l),e.lineTo(n+a,r+l);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(b)*(s?s/2:w),r+Math.sin(b)*w);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Tx(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Bd(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function zd(e){e.restore()}function RS(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),ct(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function DS(e,t,n,r,s){if(s.strikethrough||s.underline){const i=e.measureText(r),a=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,d=s.strikethrough?(c+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(a,d),e.lineTo(l,d),e.stroke()}}function AS(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Do(e,t,n,r,s,i={}){const a=Oe(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(e.save(),e.font=s.string,RS(e,i),c=0;c<a.length;++c)u=a[c],i.backdrop&&AS(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),ct(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(u,n,r,i.maxWidth)),e.fillText(u,n,r,i.maxWidth),DS(e,n,r,u,i),r+=Number(s.lineHeight);e.restore()}function bu(e,t){const{x:n,y:r,w:s,h:i,radius:a}=t;e.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*Re,Re,!0),e.lineTo(n,r+i-a.bottomLeft),e.arc(n+a.bottomLeft,r+i-a.bottomLeft,a.bottomLeft,Re,Pe,!0),e.lineTo(n+s-a.bottomRight,r+i),e.arc(n+s-a.bottomRight,r+i-a.bottomRight,a.bottomRight,Pe,0,!0),e.lineTo(n+s,r+a.topRight),e.arc(n+s-a.topRight,r+a.topRight,a.topRight,0,-Pe,!0),e.lineTo(n+a.topLeft,r)}const LS=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,OS=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function $S(e,t){const n=(""+e).match(LS);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const FS=e=>+e||0;function Ud(e,t){const n={},r=re(t),s=r?Object.keys(t):t,i=re(e)?r?a=>le(e[a],e[t[a]]):a=>e[a]:()=>e;for(const a of s)n[a]=FS(i(a));return n}function BS(e){return Ud(e,{top:"y",right:"x",bottom:"y",left:"x"})}function ui(e){return Ud(e,["topLeft","topRight","bottomLeft","bottomRight"])}function zt(e){const t=BS(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function st(e,t){e=e||{},t=t||we.font;let n=le(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let r=le(e.style,t.style);r&&!(""+r).match(OS)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:le(e.family,t.family),lineHeight:$S(le(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:le(e.weight,t.weight),string:""};return s.string=IS(s),s}function va(e,t,n,r){let s,i,a;for(s=0,i=e.length;s<i;++s)if(a=e[s],a!==void 0&&a!==void 0)return a}function zS(e,t,n){const{min:r,max:s}=e,i=yx(t,(s-r)/2),a=(l,c)=>n&&l===0?0:l+c;return{min:a(r,-Math.abs(i)),max:a(s,i)}}function js(e,t){return Object.assign(Object.create(e),t)}function Hd(e,t=[""],n,r,s=()=>e[0]){const i=n||e;typeof r>"u"&&(r=Rx("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:r,_getTarget:s,override:l=>Hd([l,...e],t,i,r)};return new Proxy(a,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return Mx(l,c,()=>XS(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return am(l).includes(c)},ownKeys(l){return am(l)},set(l,c,u){const d=l._storage||(l._storage=s());return l[c]=d[c]=u,delete l._keys,!0}})}function fs(e,t,n,r){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:Px(e,r),setContext:i=>fs(e,i,n,r),override:i=>fs(e.override(i),t,n,r)};return new Proxy(s,{deleteProperty(i,a){return delete i[a],delete e[a],!0},get(i,a,l){return Mx(i,a,()=>HS(i,a,l))},getOwnPropertyDescriptor(i,a){return i._descriptors.allKeys?Reflect.has(e,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,a)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,a){return Reflect.has(e,a)},ownKeys(){return Reflect.ownKeys(e)},set(i,a,l){return e[a]=l,delete i[a],!0}})}function Px(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Zn(n)?n:()=>n,isIndexable:Zn(r)?r:()=>r}}const US=(e,t)=>e?e+$d(t):t,Wd=(e,t)=>re(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Mx(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const r=n();return e[t]=r,r}function HS(e,t,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:a}=e;let l=r[t];return Zn(l)&&a.isScriptable(t)&&(l=WS(t,l,e,n)),Oe(l)&&l.length&&(l=VS(t,l,e,a.isIndexable)),Wd(t,l)&&(l=fs(l,s,i&&i[t],a)),l}function WS(e,t,n,r){const{_proxy:s,_context:i,_subProxy:a,_stack:l}=n;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,a||r);return l.delete(e),Wd(e,c)&&(c=Vd(s._scopes,s,e,c)),c}function VS(e,t,n,r){const{_proxy:s,_context:i,_subProxy:a,_descriptors:l}=n;if(typeof i.index<"u"&&r(e))return t[i.index%t.length];if(re(t[0])){const c=t,u=s._scopes.filter(d=>d!==c);t=[];for(const d of c){const h=Vd(u,s,e,d);t.push(fs(h,i,a&&a[e],l))}}return t}function Ix(e,t,n){return Zn(e)?e(t,n):e}const YS=(e,t)=>e===!0?t:typeof e=="string"?Ai(t,e):void 0;function qS(e,t,n,r,s){for(const i of t){const a=YS(n,i);if(a){e.add(a);const l=Ix(a._fallback,n,s);if(typeof l<"u"&&l!==n&&l!==r)return l}else if(a===!1&&typeof r<"u"&&n!==r)return null}return!1}function Vd(e,t,n,r){const s=t._rootScopes,i=Ix(t._fallback,n,r),a=[...e,...s],l=new Set;l.add(r);let c=im(l,a,n,i||n,r);return c===null||typeof i<"u"&&i!==n&&(c=im(l,a,i,c,r),c===null)?!1:Hd(Array.from(l),[""],s,i,()=>KS(t,n,r))}function im(e,t,n,r,s){for(;n;)n=qS(e,t,n,r,s);return n}function KS(e,t,n){const r=e._getTarget();t in r||(r[t]={});const s=r[t];return Oe(s)&&re(n)?n:s||{}}function XS(e,t,n,r){let s;for(const i of t)if(s=Rx(US(i,e),n),typeof s<"u")return Wd(e,s)?Vd(n,r,e,s):s}function Rx(e,t){for(const n of t){if(!n)continue;const r=n[e];if(typeof r<"u")return r}}function am(e){let t=e._keys;return t||(t=e._keys=QS(e._scopes)),t}function QS(e){const t=new Set;for(const n of e)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))t.add(r);return Array.from(t)}function Yd(){return typeof window<"u"&&typeof document<"u"}function qd(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Ao(e,t,n){let r;return typeof e=="string"?(r=parseInt(e,10),e.indexOf("%")!==-1&&(r=r/100*t.parentNode[n])):r=e,r}const fl=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function GS(e,t){return fl(e).getPropertyValue(t)}const ZS=["top","right","bottom","left"];function jr(e,t,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=ZS[s];r[i]=parseFloat(e[t+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const JS=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function eC(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:s,offsetY:i}=r;let a=!1,l,c;if(JS(s,i,e.target))l=s,c=i;else{const u=t.getBoundingClientRect();l=r.clientX-u.left,c=r.clientY-u.top,a=!0}return{x:l,y:c,box:a}}function fr(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,s=fl(n),i=s.boxSizing==="border-box",a=jr(s,"padding"),l=jr(s,"border","width"),{x:c,y:u,box:d}=eC(e,n),h=a.left+(d&&l.left),m=a.top+(d&&l.top);let{width:x,height:f}=t;return i&&(x-=a.width+l.width,f-=a.height+l.height),{x:Math.round((c-h)/x*n.width/r),y:Math.round((u-m)/f*n.height/r)}}function tC(e,t,n){let r,s;if(t===void 0||n===void 0){const i=e&&qd(e);if(!i)t=e.clientWidth,n=e.clientHeight;else{const a=i.getBoundingClientRect(),l=fl(i),c=jr(l,"border","width"),u=jr(l,"padding");t=a.width-u.width-c.width,n=a.height-u.height-c.height,r=Ao(l.maxWidth,i,"clientWidth"),s=Ao(l.maxHeight,i,"clientHeight")}}return{width:t,height:n,maxWidth:r||Mo,maxHeight:s||Mo}}const ba=e=>Math.round(e*10)/10;function nC(e,t,n,r){const s=fl(e),i=jr(s,"margin"),a=Ao(s.maxWidth,e,"clientWidth")||Mo,l=Ao(s.maxHeight,e,"clientHeight")||Mo,c=tC(e,t,n);let{width:u,height:d}=c;if(s.boxSizing==="content-box"){const m=jr(s,"border","width"),x=jr(s,"padding");u-=x.width+m.width,d-=x.height+m.height}return u=Math.max(0,u-i.width),d=Math.max(0,r?u/r:d-i.height),u=ba(Math.min(u,a,c.maxWidth)),d=ba(Math.min(d,l,c.maxHeight)),u&&!d&&(d=ba(u/2)),(t!==void 0||n!==void 0)&&r&&c.height&&d>c.height&&(d=c.height,u=ba(Math.floor(d*r))),{width:u,height:d}}function om(e,t,n){const r=t||1,s=Math.floor(e.height*r),i=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),e.currentDevicePixelRatio!==r||a.height!==s||a.width!==i?(e.currentDevicePixelRatio=r,a.height=s,a.width=i,e.ctx.setTransform(r,0,0,r,0,0),!0):!1}const rC=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Yd()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function lm(e,t){const n=GS(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}const sC=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},iC=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function ss(e,t,n){return e?sC(t,n):iC()}function Dx(e,t){let n,r;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function Ax(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class aC{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,r,s){const i=n.listeners[s],a=n.duration;i.forEach(l=>l({chart:t,initial:n.initial,numSteps:a,currentStep:Math.min(r-n.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=jx.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let a=i.length-1,l=!1,c;for(;a>=0;--a)c=i[a],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(t),l=!0):(i[a]=i[i.length-1],i.pop());l&&(s.draw(),this._notify(s,r,t,"progress")),i.length||(r.running=!1,this._notify(s,r,t,"complete"),r.initial=!1),n+=i.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let r=n.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,r)),r}listen(t,n,r){this._getAnims(t).listeners[n].push(r)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ln=new aC;const cm="transparent",oC={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const r=em(e||cm),s=r.valid&&em(t||cm);return s&&s.valid?s.mix(r,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class lC{constructor(t,n,r,s){const i=n[r];s=va([t.to,s,i,t.from]);const a=va([t.from,i,s]);this._active=!0,this._fn=t.fn||oC[t.type||typeof a],this._easing=li[t.easing]||li.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=r,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(t,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,a=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=va([t.to,n,s,t.from]),this._from=va([t.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,r=this._duration,s=this._prop,i=this._from,a=this._loop,l=this._to;let c;if(this._active=i!==l&&(a||n<r),!this._active){this._target[s]=l,this._notify(!0);return}if(n<0){this._target[s]=i;return}c=n/r%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,r)=>{t.push({res:n,rej:r})})}_notify(t){const n=t?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class Lx{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!re(t))return;const n=Object.keys(we.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const i=t[s];if(!re(i))return;const a={};for(const l of n)a[l]=i[l];(Oe(i.properties)&&i.properties||[s]).forEach(l=>{(l===s||!r.has(l))&&r.set(l,a)})})}_animateOptions(t,n){const r=n.options,s=uC(t,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&cC(t.options.$animations,r).then(()=>{t.options=r},()=>{}),i}_createAnimations(t,n){const r=this._properties,s=[],i=t.$animations||(t.$animations={}),a=Object.keys(n),l=Date.now();let c;for(c=a.length-1;c>=0;--c){const u=a[c];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(t,n));continue}const d=n[u];let h=i[u];const m=r.get(u);if(h)if(m&&h.active()){h.update(m,d,l);continue}else h.cancel();if(!m||!m.duration){t[u]=d;continue}i[u]=h=new lC(m,t,u,d),s.push(h)}return s}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const r=this._createAnimations(t,n);if(r.length)return ln.add(this._chart,r),!0}}function cC(e,t){const n=[],r=Object.keys(t);for(let s=0;s<r.length;s++){const i=e[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function uC(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function um(e,t){const n=e&&e.options||{},r=n.reverse,s=n.min===void 0?t:0,i=n.max===void 0?t:0;return{start:r?i:s,end:r?s:i}}function dC(e,t,n){if(n===!1)return!1;const r=um(e,n),s=um(t,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function hC(e){let t,n,r,s;return re(e)?(t=e.top,n=e.right,r=e.bottom,s=e.left):t=n=r=s=e,{top:t,right:n,bottom:r,left:s,disabled:e===!1}}function Ox(e,t){const n=[],r=e._getSortedDatasetMetas(t);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function dm(e,t,n,r={}){const s=e.keys,i=r.mode==="single";let a,l,c,u;if(t===null)return;let d=!1;for(a=0,l=s.length;a<l;++a){if(c=+s[a],c===n){if(d=!0,r.all)continue;break}u=e.values[c],wn(u)&&(i||t===0||Qf(t)===Qf(u))&&(t+=u)}return!d&&!r.all?0:t}function fC(e,t){const{iScale:n,vScale:r}=t,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",a=Object.keys(e),l=new Array(a.length);let c,u,d;for(c=0,u=a.length;c<u;++c)d=a[c],l[c]={[s]:d,[i]:e[d]};return l}function ec(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function mC(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function gC(e){const{min:t,max:n,minDefined:r,maxDefined:s}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function pC(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function hm(e,t,n,r){for(const s of t.getMatchingVisibleMetas(r).reverse()){const i=e[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function fm(e,t){const{chart:n,_cachedMeta:r}=e,s=n._stacks||(n._stacks={}),{iScale:i,vScale:a,index:l}=r,c=i.axis,u=a.axis,d=mC(i,a,r),h=t.length;let m;for(let x=0;x<h;++x){const f=t[x],{[c]:w,[u]:b}=f,g=f._stacks||(f._stacks={});m=g[u]=pC(s,d,w),m[l]=b,m._top=hm(m,a,!0,r.type),m._bottom=hm(m,a,!1,r.type);const y=m._visualValues||(m._visualValues={});y[l]=b}}function tc(e,t){const n=e.scales;return Object.keys(n).filter(r=>n[r].axis===t).shift()}function xC(e,t){return js(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function yC(e,t,n){return js(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Ds(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const s of t){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const nc=e=>e==="reset"||e==="none",mm=(e,t)=>t?e:Object.assign({},e),vC=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:Ox(n,!0),values:null};class di{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=ec(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Ds(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(h,m,x,f)=>h==="x"?m:h==="r"?f:x,i=n.xAxisID=le(r.xAxisID,tc(t,"x")),a=n.yAxisID=le(r.yAxisID,tc(t,"y")),l=n.rAxisID=le(r.rAxisID,tc(t,"r")),c=n.indexAxis,u=n.iAxisID=s(c,i,a,l),d=n.vAxisID=s(c,a,i,l);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Gf(this._data,this),t._stacked&&Ds(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),r=this._data;if(re(n)){const s=this._cachedMeta;this._data=fC(n,s)}else if(r!==n){if(r){Gf(r,this);const s=this._cachedMeta;Ds(s),s._parsed=[]}n&&Object.isExtensible(n)&&vS(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=ec(n.vScale,n),n.stack!==r.stack&&(s=!0,Ds(n),n.stack=r.stack),this._resyncElements(t),(s||i!==n._stacked)&&(fm(this,n._parsed),n._stacked=ec(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:a}=r,l=i.axis;let c=t===0&&n===s.length?!0:r._sorted,u=t>0&&r._parsed[t-1],d,h,m;if(this._parsing===!1)r._parsed=s,r._sorted=!0,m=s;else{Oe(s[t])?m=this.parseArrayData(r,s,t,n):re(s[t])?m=this.parseObjectData(r,s,t,n):m=this.parsePrimitiveData(r,s,t,n);const x=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<n;++d)r._parsed[d+t]=h=m[d],c&&(x()&&(c=!1),u=h);r._sorted=c}a&&fm(this,m)}parsePrimitiveData(t,n,r,s){const{iScale:i,vScale:a}=t,l=i.axis,c=a.axis,u=i.getLabels(),d=i===a,h=new Array(s);let m,x,f;for(m=0,x=s;m<x;++m)f=m+r,h[m]={[l]:d||i.parse(u[f],f),[c]:a.parse(n[f],f)};return h}parseArrayData(t,n,r,s){const{xScale:i,yScale:a}=t,l=new Array(s);let c,u,d,h;for(c=0,u=s;c<u;++c)d=c+r,h=n[d],l[c]={x:i.parse(h[0],d),y:a.parse(h[1],d)};return l}parseObjectData(t,n,r,s){const{xScale:i,yScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(s);let d,h,m,x;for(d=0,h=s;d<h;++d)m=d+r,x=n[m],u[d]={x:i.parse(Ai(x,l),m),y:a.parse(Ai(x,c),m)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,r){const s=this.chart,i=this._cachedMeta,a=n[t.axis],l={keys:Ox(s,!0),values:n._stacks[t.axis]._visualValues};return dm(l,a,i.index,{mode:r})}updateRangeFromParsed(t,n,r,s){const i=r[n.axis];let a=i===null?NaN:i;const l=s&&r._stacks[n.axis];s&&l&&(s.values=l,a=dm(s,i,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&t===r.iScale,a=s.length,l=this._getOtherScale(t),c=vC(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=gC(l);let m,x;function f(){x=s[m];const w=x[l.axis];return!wn(x[t.axis])||d>w||h<w}for(m=0;m<a&&!(!f()&&(this.updateRangeFromParsed(u,t,x,c),i));++m);if(i){for(m=a-1;m>=0;--m)if(!f()){this.updateRangeFromParsed(u,t,x,c);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,r=[];let s,i,a;for(s=0,i=n.length;s<i;++s)a=n[s][t.axis],wn(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(t);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=hC(le(this.options.clip,dC(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(t,i,l,c),d=l;d<l+c;++d){const h=s[d];h.hidden||(h.active&&u?a.push(h):h.draw(t,i))}for(d=0;d<a.length;++d)a[d].draw(t,i)}getStyle(t,n){const r=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,n,r){const s=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];i=a.$context||(a.$context=yC(this.getContext(),t,a)),i.parsed=this.getParsed(t),i.raw=s.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=xC(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",r){const s=n==="active",i=this._cachedDataOpts,a=t+"-"+n,l=i[a],c=this.enableOptionSharing&&Po(r);if(l)return mm(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],m=u.getOptionScopes(this.getDataset(),d),x=Object.keys(we.elements[t]),f=()=>this.getContext(r,s,n),w=u.resolveNamedOptions(m,x,f,h);return w.$shared&&(w.$shared=c,i[a]=Object.freeze(mm(w,c))),w}_resolveAnimations(t,n,r){const s=this.chart,i=this._cachedDataOpts,a=`animation-${n}`,l=i[a];if(l)return l;let c;if(s.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,n),m=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(m,this.getContext(t,r,n))}const u=new Lx(s,c&&c.animations);return c&&c._cacheable&&(i[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||nc(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const r=this.resolveDataElementOptions(t,n),s=this._sharedOptions,i=this.getSharedOptions(r),a=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:a}}updateElement(t,n,r,s){nc(s)?Object.assign(t,r):this._resolveAnimations(n,s).update(t,r)}updateSharedOptions(t,n,r){t&&!nc(n)&&this._resolveAnimations(void 0,n).update(t,r)}_setStyle(t,n,r,s){t.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(t,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(t,n,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,n,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,r=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const s=r.length,i=n.length,a=Math.min(i,s);a&&this.parse(0,a),i>s?this._insertElements(s,i-s,t):i<s&&this._removeElements(i,s-i)}_insertElements(t,n,r=!0){const s=this._cachedMeta,i=s.data,a=t+n;let l;const c=u=>{for(u.length+=n,l=u.length-1;l>=a;l--)u[l]=u[l-n]};for(c(i),l=t;l<a;++l)i[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(t,n),r&&this.updateElements(i,t,n,"reset")}updateElements(t,n,r,s){}_removeElements(t,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(t,n);r._stacked&&Ds(r,s)}r.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,r,s]=t;this[n](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}J(di,"defaults",{}),J(di,"datasetElementType",null),J(di,"dataElementType",null);function bC(e,t,n){let r=1,s=1,i=0,a=0;if(t<Se){const l=e,c=l+t,u=Math.cos(l),d=Math.sin(l),h=Math.cos(c),m=Math.sin(c),x=(p,j,N)=>Ro(p,l,c,!0)?1:Math.max(j,j*n,N,N*n),f=(p,j,N)=>Ro(p,l,c,!0)?-1:Math.min(j,j*n,N,N*n),w=x(0,u,h),b=x(Pe,d,m),g=f(Re,u,h),y=f(Re+Pe,d,m);r=(w-g)/2,s=(b-y)/2,i=-(w+g)/2,a=-(b+y)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:a}}class Ks extends di{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=c=>+r[c];if(re(r[t])){const{key:c="value"}=this._parsing;i=u=>+Ai(r[u],c)}let a,l;for(a=t,l=t+n;a<l;++a)s._parsed[a]=i(a)}}_getRotation(){return yr(this.options.rotation-90)}_getCircumference(){return yr(this.options.circumference)}_getRotationExtents(){let t=Se,n=-Se;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),a=s._getCircumference();t=Math.min(t,i),n=Math.max(n,i+a)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-a)/2,0),c=Math.min(aS(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:m,ratioY:x,offsetX:f,offsetY:w}=bC(h,d,c),b=(r.width-a)/m,g=(r.height-a)/x,y=Math.max(Math.min(b,g)/2,0),p=yx(this.options.radius,y),j=Math.max(p*c,0),N=(p-j)/this._getVisibleDatasetWeightTotal();this.offsetX=f*p,this.offsetY=w*p,s.total=this.calculateTotal(),this.outerRadius=p-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*u,0),this.updateElements(i,0,i.length,t)}_circumference(t,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*i/Se)}updateElements(t,n,r,s){const i=s==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,d=(l.left+l.right)/2,h=(l.top+l.bottom)/2,m=i&&u.animateScale,x=m?0:this.innerRadius,f=m?0:this.outerRadius,{sharedOptions:w,includeOptions:b}=this._getSharedOptions(n,s);let g=this._getRotation(),y;for(y=0;y<n;++y)g+=this._circumference(y,i);for(y=n;y<n+r;++y){const p=this._circumference(y,i),j=t[y],N={x:d+this.offsetX,y:h+this.offsetY,startAngle:g,endAngle:g+p,circumference:p,outerRadius:f,innerRadius:x};b&&(N.options=w||this.resolveDataElementOptions(y,j.active?"active":s)),g+=p,this.updateElement(j,y,N,s)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let r=0,s;for(s=0;s<n.length;s++){const i=t._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Se*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=kx(n._parsed[t],r.options.locale);return{label:s[t]||"",value:i}}getMaxBorderWidth(t){let n=0;const r=this.chart;let s,i,a,l,c;if(!t){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),t=a.data,l=a.controller;break}}if(!t)return 0;for(s=0,i=t.length;s<i;++s)c=l.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let r=0,s=t.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(t){return Math.max(le(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}J(Ks,"id","doughnut"),J(Ks,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),J(Ks,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),J(Ks,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:s}}=t.legend.options;return n.labels.map((i,a)=>{const c=t.getDatasetMeta(0).controller.getStyle(a);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class wu extends Ks{}J(wu,"id","pie"),J(wu,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function cr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Kd{constructor(t){J(this,"options");this.options=t||{}}static override(t){Object.assign(Kd.prototype,t)}init(){}formats(){return cr()}parse(){return cr()}format(){return cr()}add(){return cr()}diff(){return cr()}startOf(){return cr()}endOf(){return cr()}}var wC={_date:Kd};function jC(e,t,n,r){const{controller:s,data:i,_sorted:a}=e,l=s._cachedMeta.iScale;if(l&&t===l.axis&&t!=="r"&&a&&i.length){const c=l._reversePixels?xS:yu;if(r){if(s._sharedOptions){const u=i[0],d=typeof u.getRange=="function"&&u.getRange(t);if(d){const h=c(i,t,n-d),m=c(i,t,n+d);return{lo:h.lo,hi:m.hi}}}}else return c(i,t,n)}return{lo:0,hi:i.length-1}}function Xi(e,t,n,r,s){const i=e.getSortedVisibleDatasetMetas(),a=n[t];for(let l=0,c=i.length;l<c;++l){const{index:u,data:d}=i[l],{lo:h,hi:m}=jC(i[l],t,a,s);for(let x=h;x<=m;++x){const f=d[x];f.skip||r(f,u,x)}}}function NC(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(r,s){const i=t?Math.abs(r.x-s.x):0,a=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function rc(e,t,n,r,s){const i=[];return!s&&!e.isPointInArea(t)||Xi(e,n,t,function(l,c,u){!s&&!Tx(l,e.chartArea,0)||l.inRange(t.x,t.y,r)&&i.push({element:l,datasetIndex:c,index:u})},!0),i}function SC(e,t,n,r){let s=[];function i(a,l,c){const{startAngle:u,endAngle:d}=a.getProps(["startAngle","endAngle"],r),{angle:h}=bx(a,{x:t.x,y:t.y});Ro(h,u,d)&&s.push({element:a,datasetIndex:l,index:c})}return Xi(e,n,t,i),s}function CC(e,t,n,r,s,i){let a=[];const l=NC(n);let c=Number.POSITIVE_INFINITY;function u(d,h,m){const x=d.inRange(t.x,t.y,s);if(r&&!x)return;const f=d.getCenterPoint(s);if(!(!!i||e.isPointInArea(f))&&!x)return;const b=l(t,f);b<c?(a=[{element:d,datasetIndex:h,index:m}],c=b):b===c&&a.push({element:d,datasetIndex:h,index:m})}return Xi(e,n,t,u),a}function sc(e,t,n,r,s,i){return!i&&!e.isPointInArea(t)?[]:n==="r"&&!r?SC(e,t,n,s):CC(e,t,n,r,s,i)}function gm(e,t,n,r,s){const i=[],a=n==="x"?"inXRange":"inYRange";let l=!1;return Xi(e,n,t,(c,u,d)=>{c[a]&&c[a](t[n],s)&&(i.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(t.x,t.y,s))}),r&&!l?[]:i}var kC={evaluateInteractionItems:Xi,modes:{index(e,t,n,r){const s=fr(t,e),i=n.axis||"x",a=n.includeInvisible||!1,l=n.intersect?rc(e,s,i,r,a):sc(e,s,i,!1,r,a),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,h=u.data[d];h&&!h.skip&&c.push({element:h,datasetIndex:u.index,index:d})}),c):[]},dataset(e,t,n,r){const s=fr(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;let l=n.intersect?rc(e,s,i,r,a):sc(e,s,i,!1,r,a);if(l.length>0){const c=l[0].datasetIndex,u=e.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(e,t,n,r){const s=fr(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return rc(e,s,i,r,a)},nearest(e,t,n,r){const s=fr(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return sc(e,s,i,n.intersect,r,a)},x(e,t,n,r){const s=fr(t,e);return gm(e,s,"x",n.intersect,r)},y(e,t,n,r){const s=fr(t,e);return gm(e,s,"y",n.intersect,r)}}};const $x=["left","top","right","bottom"];function As(e,t){return e.filter(n=>n.pos===t)}function pm(e,t){return e.filter(n=>$x.indexOf(n.pos)===-1&&n.box.axis===t)}function Ls(e,t){return e.sort((n,r)=>{const s=t?r:n,i=t?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function EC(e){const t=[];let n,r,s,i,a,l;for(n=0,r=(e||[]).length;n<r;++n)s=e[n],{position:i,options:{stack:a,stackWeight:l=1}}=s,t.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&i+a,stackWeight:l});return t}function _C(e){const t={};for(const n of e){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!$x.includes(s))continue;const a=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return t}function TC(e,t){const n=_C(e),{vBoxMaxWidth:r,hBoxMaxHeight:s}=t;let i,a,l;for(i=0,a=e.length;i<a;++i){l=e[i];const{fullSize:c}=l.box,u=n[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*r:c&&t.availableWidth,l.height=s):(l.width=r,l.height=d?d*s:c&&t.availableHeight)}return n}function PC(e){const t=EC(e),n=Ls(t.filter(u=>u.box.fullSize),!0),r=Ls(As(t,"left"),!0),s=Ls(As(t,"right")),i=Ls(As(t,"top"),!0),a=Ls(As(t,"bottom")),l=pm(t,"x"),c=pm(t,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(c).concat(a).concat(l),chartArea:As(t,"chartArea"),vertical:r.concat(s).concat(c),horizontal:i.concat(a).concat(l)}}function xm(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function Fx(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function MC(e,t,n,r){const{pos:s,box:i}=n,a=e.maxPadding;if(!re(s)){n.size&&(e[s]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,e[s]+=n.size}i.getPadding&&Fx(a,i.getPadding());const l=Math.max(0,t.outerWidth-xm(a,e,"left","right")),c=Math.max(0,t.outerHeight-xm(a,e,"top","bottom")),u=l!==e.w,d=c!==e.h;return e.w=l,e.h=c,n.horizontal?{same:u,other:d}:{same:d,other:u}}function IC(e){const t=e.maxPadding;function n(r){const s=Math.max(t[r]-e[r],0);return e[r]+=s,s}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function RC(e,t){const n=t.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(a=>{i[a]=Math.max(t[a],n[a])}),i}return r(e?["left","right"]:["top","bottom"])}function Xs(e,t,n,r){const s=[];let i,a,l,c,u,d;for(i=0,a=e.length,u=0;i<a;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,RC(l.horizontal,t));const{same:h,other:m}=MC(t,n,l,r);u|=h&&s.length,d=d||m,c.fullSize||s.push(l)}return u&&Xs(s,t,n,r)||d}function wa(e,t,n,r,s){e.top=n,e.left=t,e.right=t+r,e.bottom=n+s,e.width=r,e.height=s}function ym(e,t,n,r){const s=n.padding;let{x:i,y:a}=t;for(const l of e){const c=l.box,u=r[l.stack]||{count:1,placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const h=t.w*d,m=u.size||c.height;Po(u.start)&&(a=u.start),c.fullSize?wa(c,s.left,a,n.outerWidth-s.right-s.left,m):wa(c,t.left+u.placed,a,h,m),u.start=a,u.placed+=h,a=c.bottom}else{const h=t.h*d,m=u.size||c.width;Po(u.start)&&(i=u.start),c.fullSize?wa(c,i,s.top,m,n.outerHeight-s.bottom-s.top):wa(c,i,t.top+u.placed,m,h),u.start=i,u.placed+=h,i=c.right}}t.x=i,t.y=a}var On={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const s=zt(e.options.layout.padding),i=Math.max(t-s.width,0),a=Math.max(n-s.height,0),l=PC(e.boxes),c=l.vertical,u=l.horizontal;oe(e.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const d=c.reduce((w,b)=>b.box.options&&b.box.options.display===!1?w:w+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/d,hBoxMaxHeight:a/2}),m=Object.assign({},s);Fx(m,zt(r));const x=Object.assign({maxPadding:m,w:i,h:a,x:s.left,y:s.top},s),f=TC(c.concat(u),h);Xs(l.fullSize,x,h,f),Xs(c,x,h,f),Xs(u,x,h,f)&&Xs(c,x,h,f),IC(x),ym(l.leftAndTop,x,h,f),x.x+=x.w,x.y+=x.h,ym(l.rightAndBottom,x,h,f),e.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},oe(l.chartArea,w=>{const b=w.box;Object.assign(b,e.chartArea),b.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class Bx{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,r){}removeEventListener(t,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,r,s){return n=Math.max(0,n||t.width),r=r||t.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(t){return!0}updateConfig(t){}}class DC extends Bx{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Ya="$chartjs",AC={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},vm=e=>e===null||e==="";function LC(e,t){const n=e.style,r=e.getAttribute("height"),s=e.getAttribute("width");if(e[Ya]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",vm(s)){const i=lm(e,"width");i!==void 0&&(e.width=i)}if(vm(r))if(e.style.height==="")e.height=e.width/(t||2);else{const i=lm(e,"height");i!==void 0&&(e.height=i)}return e}const zx=rC?{passive:!0}:!1;function OC(e,t,n){e&&e.addEventListener(t,n,zx)}function $C(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,zx)}function FC(e,t){const n=AC[e.type]||e.type,{x:r,y:s}=fr(e,t);return{type:n,chart:t,native:e,x:r!==void 0?r:null,y:s!==void 0?s:null}}function Lo(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function BC(e,t,n){const r=e.canvas,s=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||Lo(l.addedNodes,r),a=a&&!Lo(l.removedNodes,r);a&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function zC(e,t,n){const r=e.canvas,s=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||Lo(l.removedNodes,r),a=a&&!Lo(l.addedNodes,r);a&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Li=new Map;let bm=0;function Ux(){const e=window.devicePixelRatio;e!==bm&&(bm=e,Li.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function UC(e,t){Li.size||window.addEventListener("resize",Ux),Li.set(e,t)}function HC(e){Li.delete(e),Li.size||window.removeEventListener("resize",Ux)}function WC(e,t,n){const r=e.canvas,s=r&&qd(r);if(!s)return;const i=Nx((l,c)=>{const u=s.clientWidth;n(l,c),u<s.clientWidth&&n()},window),a=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||i(u,d)});return a.observe(s),UC(e,i),a}function ic(e,t,n){n&&n.disconnect(),t==="resize"&&HC(e)}function VC(e,t,n){const r=e.canvas,s=Nx(i=>{e.ctx!==null&&n(FC(i,e))},e);return OC(r,t,s),s}class YC extends Bx{acquireContext(t,n){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(LC(t,n),r):null}releaseContext(t){const n=t.canvas;if(!n[Ya])return!1;const r=n[Ya].initial;["height","width"].forEach(i=>{const a=r[i];ct(a)?n.removeAttribute(i):n.setAttribute(i,a)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Ya],!0}addEventListener(t,n,r){this.removeEventListener(t,n);const s=t.$proxies||(t.$proxies={}),a={attach:BC,detach:zC,resize:WC}[n]||VC;s[n]=a(t,n,r)}removeEventListener(t,n){const r=t.$proxies||(t.$proxies={}),s=r[n];if(!s)return;({attach:ic,detach:ic,resize:ic}[n]||$C)(t,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,r,s){return nC(t,n,r,s)}isAttached(t){const n=t&&qd(t);return!!(n&&n.isConnected)}}function qC(e){return!Yd()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?DC:YC}class Pr{constructor(){J(this,"x");J(this,"y");J(this,"active",!1);J(this,"options");J(this,"$animations")}tooltipPosition(t){const{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}hasValue(){return Io(this.x)&&Io(this.y)}getProps(t,n){const r=this.$animations;if(!n||!r)return this;const s={};return t.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}J(Pr,"defaults",{}),J(Pr,"defaultRoutes");function KC(e,t){const n=e.options.ticks,r=XC(e),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?GC(t):[],a=i.length,l=i[0],c=i[a-1],u=[];if(a>s)return ZC(t,u,i,a/s),u;const d=QC(i,t,s);if(a>0){let h,m;const x=a>1?Math.round((c-l)/(a-1)):null;for(ja(t,u,d,ct(x)?0:l-x,l),h=0,m=a-1;h<m;h++)ja(t,u,d,i[h],i[h+1]);return ja(t,u,d,c,ct(x)?t.length:c+x),u}return ja(t,u,d),u}function XC(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(r,s))}function QC(e,t,n){const r=JC(e),s=t.length/n;if(!r)return Math.max(s,1);const i=fS(r);for(let a=0,l=i.length-1;a<l;a++){const c=i[a];if(c>s)return c}return Math.max(s,1)}function GC(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}function ZC(e,t,n,r){let s=0,i=n[0],a;for(r=Math.ceil(r),a=0;a<e.length;a++)a===i&&(t.push(e[a]),s++,i=n[s*r])}function ja(e,t,n,r,s){const i=le(r,0),a=Math.min(le(s,e.length),e.length);let l=0,c,u,d;for(n=Math.ceil(n),s&&(c=s-r,n=c/Math.floor(c/n)),d=i;d<0;)l++,d=Math.round(i+l*n);for(u=Math.max(i,0);u<a;u++)u===d&&(t.push(e[u]),l++,d=Math.round(i+l*n))}function JC(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}const ek=e=>e==="left"?"right":e==="right"?"left":e,wm=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,jm=(e,t)=>Math.min(t||e,e);function Nm(e,t){const n=[],r=e.length/t,s=e.length;let i=0;for(;i<s;i+=r)n.push(e[Math.floor(i)]);return n}function tk(e,t,n){const r=e.ticks.length,s=Math.min(t,r-1),i=e._startPixel,a=e._endPixel,l=1e-6;let c=e.getPixelForTick(s),u;if(!(n&&(r===1?u=Math.max(c-i,a-c):t===0?u=(e.getPixelForTick(1)-c)/2:u=(c-e.getPixelForTick(s-1))/2,c+=s<t?u:-u,c<i-l||c>a+l)))return c}function nk(e,t){oe(e,n=>{const r=n.gc,s=r.length/2;let i;if(s>t){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function Os(e){return e.drawTicks?e.tickLength:0}function Sm(e,t){if(!e.display)return 0;const n=st(e.font,t),r=zt(e.padding);return(Oe(e.text)?e.text.length:1)*n.lineHeight+r.height}function rk(e,t){return js(e,{scale:t,type:"scale"})}function sk(e,t,n){return js(e,{tick:n,index:t,type:"tick"})}function ik(e,t,n){let r=Sx(e);return(n&&t!=="right"||!n&&t==="right")&&(r=ek(r)),r}function ak(e,t,n,r){const{top:s,left:i,bottom:a,right:l,chart:c}=e,{chartArea:u,scales:d}=c;let h=0,m,x,f;const w=a-s,b=l-i;if(e.isHorizontal()){if(x=ht(r,i,l),re(n)){const g=Object.keys(n)[0],y=n[g];f=d[g].getPixelForValue(y)+w-t}else n==="center"?f=(u.bottom+u.top)/2+w-t:f=wm(e,n,t);m=l-i}else{if(re(n)){const g=Object.keys(n)[0],y=n[g];x=d[g].getPixelForValue(y)-b+t}else n==="center"?x=(u.left+u.right)/2-b+t:x=wm(e,n,t);f=ht(r,a,s),h=n==="left"?-Pe:Pe}return{titleX:x,titleY:f,maxWidth:m,rotation:h}}class ml extends Pr{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return t=Vt(t,Number.POSITIVE_INFINITY),n=Vt(n,Number.NEGATIVE_INFINITY),r=Vt(r,Number.POSITIVE_INFINITY),s=Vt(s,Number.NEGATIVE_INFINITY),{min:Vt(t,r),max:Vt(n,s),minDefined:wn(t),maxDefined:wn(n)}}getMinMax(t){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),a;if(s&&i)return{min:n,max:r};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)a=l[c].controller.getMinMax(this,t),s||(n=Math.min(n,a.min)),i||(r=Math.max(r,a.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Vt(n,Vt(r,n)),max:Vt(r,Vt(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){fe(this.options.beforeUpdate,[this])}update(t,n,r){const{beginAtZero:s,grace:i,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=zS(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?Nm(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=KC(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,t=!t),this._startPixel=n,this._endPixel=r,this._reversePixels=t,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){fe(this.options.afterUpdate,[this])}beforeSetDimensions(){fe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){fe(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),fe(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){fe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r],i.label=fe(n.callback,[i.value,r,t],this)}afterTickToLabelConversion(){fe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){fe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,r=jm(this.ticks.length,t.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let a=s,l,c,u;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const d=this._getLabelSizes(),h=d.widest.width,m=d.highest.height,x=Ct(this.chart.width-h,0,this.maxWidth);l=t.offset?this.maxWidth/r:x/(r-1),h+6>l&&(l=x/(r-(t.offset?.5:1)),c=this.maxHeight-Os(t.grid)-n.padding-Sm(t.title,this.chart.options.font),u=Math.sqrt(h*h+m*m),a=mS(Math.min(Math.asin(Ct((d.highest.height+6)/l,-1,1)),Math.asin(Ct(c/u,-1,1))-Math.asin(Ct(m/u,-1,1)))),a=Math.max(s,Math.min(i,a))),this.labelRotation=a}afterCalculateLabelRotation(){fe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){fe(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const c=Sm(s,n.options.font);if(l?(t.width=this.maxWidth,t.height=Os(i)+c):(t.height=this.maxHeight,t.width=Os(i)+c),r.display&&this.ticks.length){const{first:u,last:d,widest:h,highest:m}=this._getLabelSizes(),x=r.padding*2,f=yr(this.labelRotation),w=Math.cos(f),b=Math.sin(f);if(l){const g=r.mirror?0:b*h.width+w*m.height;t.height=Math.min(this.maxHeight,t.height+g+x)}else{const g=r.mirror?0:w*h.width+b*m.height;t.width=Math.min(this.maxWidth,t.width+g+x)}this._calculatePadding(u,d,b,w)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,r,s){const{ticks:{align:i,padding:a},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,x=0;c?u?(m=s*t.width,x=r*n.height):(m=r*t.height,x=s*n.width):i==="start"?x=n.width:i==="end"?m=t.width:i!=="inner"&&(m=t.width/2,x=n.width/2),this.paddingLeft=Math.max((m-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((x-h+a)*this.width/(this.width-h),0)}else{let d=n.height/2,h=t.height/2;i==="start"?(d=0,h=t.height):i==="end"&&(d=n.height,h=0),this.paddingTop=d+a,this.paddingBottom=h+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){fe(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,r;for(n=0,r=t.length;n<r;n++)ct(t[n].label)&&(t.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=Nm(r,n)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,r){const{ctx:s,_longestTextCache:i}=this,a=[],l=[],c=Math.floor(n/jm(n,r));let u=0,d=0,h,m,x,f,w,b,g,y,p,j,N;for(h=0;h<n;h+=c){if(f=t[h].label,w=this._resolveTickFontOptions(h),s.font=b=w.string,g=i[b]=i[b]||{data:{},gc:[]},y=w.lineHeight,p=j=0,!ct(f)&&!Oe(f))p=nm(s,g.data,g.gc,p,f),j=y;else if(Oe(f))for(m=0,x=f.length;m<x;++m)N=f[m],!ct(N)&&!Oe(N)&&(p=nm(s,g.data,g.gc,p,N),j+=y);a.push(p),l.push(j),u=Math.max(p,u),d=Math.max(j,d)}nk(i,n);const C=a.indexOf(u),E=l.indexOf(d),S=k=>({width:a[k]||0,height:l[k]||0});return{first:S(0),last:S(n-1),widest:S(C),highest:S(E),widths:a,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return pS(this._alignToPixels?lr(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const r=n[t];return r.$context||(r.$context=sk(this.getContext(),t,r))}return this.$context||(this.$context=rk(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=yr(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),a=t.autoSkipPadding||0,l=i?i.widest.width+a:0,c=i?i.highest.height+a:0;return this.isHorizontal()?c*r>l*s?l/r:c/s:c*s<l*r?c/r:l/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:a,border:l}=s,c=i.offset,u=this.isHorizontal(),h=this.ticks.length+(c?1:0),m=Os(i),x=[],f=l.setContext(this.getContext()),w=f.display?f.width:0,b=w/2,g=function(R){return lr(r,R,w)};let y,p,j,N,C,E,S,k,_,T,O,$;if(a==="top")y=g(this.bottom),E=this.bottom-m,k=y-b,T=g(t.top)+b,$=t.bottom;else if(a==="bottom")y=g(this.top),T=t.top,$=g(t.bottom)-b,E=y+b,k=this.top+m;else if(a==="left")y=g(this.right),C=this.right-m,S=y-b,_=g(t.left)+b,O=t.right;else if(a==="right")y=g(this.left),_=t.left,O=g(t.right)-b,C=y+b,S=this.left+m;else if(n==="x"){if(a==="center")y=g((t.top+t.bottom)/2+.5);else if(re(a)){const R=Object.keys(a)[0],H=a[R];y=g(this.chart.scales[R].getPixelForValue(H))}T=t.top,$=t.bottom,E=y+b,k=E+m}else if(n==="y"){if(a==="center")y=g((t.left+t.right)/2);else if(re(a)){const R=Object.keys(a)[0],H=a[R];y=g(this.chart.scales[R].getPixelForValue(H))}C=y-b,S=C-m,_=t.left,O=t.right}const Y=le(s.ticks.maxTicksLimit,h),A=Math.max(1,Math.ceil(h/Y));for(p=0;p<h;p+=A){const R=this.getContext(p),H=i.setContext(R),L=l.setContext(R),B=H.lineWidth,z=H.color,G=L.dash||[],X=L.dashOffset,Be=H.tickWidth,I=H.tickColor,q=H.tickBorderDash||[],Z=H.tickBorderDashOffset;j=tk(this,p,c),j!==void 0&&(N=lr(r,j,B),u?C=S=_=O=N:E=k=T=$=N,x.push({tx1:C,ty1:E,tx2:S,ty2:k,x1:_,y1:T,x2:O,y2:$,width:B,color:z,borderDash:G,borderDashOffset:X,tickWidth:Be,tickColor:I,tickBorderDash:q,tickBorderDashOffset:Z}))}return this._ticksLength=h,this._borderValue=y,x}_computeLabelItems(t){const n=this.axis,r=this.options,{position:s,ticks:i}=r,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:h}=i,m=Os(r.grid),x=m+d,f=h?-d:x,w=-yr(this.labelRotation),b=[];let g,y,p,j,N,C,E,S,k,_,T,O,$="middle";if(s==="top")C=this.bottom-f,E=this._getXAxisLabelAlignment();else if(s==="bottom")C=this.top+f,E=this._getXAxisLabelAlignment();else if(s==="left"){const A=this._getYAxisLabelAlignment(m);E=A.textAlign,N=A.x}else if(s==="right"){const A=this._getYAxisLabelAlignment(m);E=A.textAlign,N=A.x}else if(n==="x"){if(s==="center")C=(t.top+t.bottom)/2+x;else if(re(s)){const A=Object.keys(s)[0],R=s[A];C=this.chart.scales[A].getPixelForValue(R)+x}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")N=(t.left+t.right)/2-x;else if(re(s)){const A=Object.keys(s)[0],R=s[A];N=this.chart.scales[A].getPixelForValue(R)}E=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(c==="start"?$="top":c==="end"&&($="bottom"));const Y=this._getLabelSizes();for(g=0,y=l.length;g<y;++g){p=l[g],j=p.label;const A=i.setContext(this.getContext(g));S=this.getPixelForTick(g)+i.labelOffset,k=this._resolveTickFontOptions(g),_=k.lineHeight,T=Oe(j)?j.length:1;const R=T/2,H=A.color,L=A.textStrokeColor,B=A.textStrokeWidth;let z=E;a?(N=S,E==="inner"&&(g===y-1?z=this.options.reverse?"left":"right":g===0?z=this.options.reverse?"right":"left":z="center"),s==="top"?u==="near"||w!==0?O=-T*_+_/2:u==="center"?O=-Y.highest.height/2-R*_+_:O=-Y.highest.height+_/2:u==="near"||w!==0?O=_/2:u==="center"?O=Y.highest.height/2-R*_:O=Y.highest.height-T*_,h&&(O*=-1),w!==0&&!A.showLabelBackdrop&&(N+=_/2*Math.sin(w))):(C=S,O=(1-T)*_/2);let G;if(A.showLabelBackdrop){const X=zt(A.backdropPadding),Be=Y.heights[g],I=Y.widths[g];let q=O-X.top,Z=0-X.left;switch($){case"middle":q-=Be/2;break;case"bottom":q-=Be;break}switch(E){case"center":Z-=I/2;break;case"right":Z-=I;break;case"inner":g===y-1?Z-=I:g>0&&(Z-=I/2);break}G={left:Z,top:q,width:I+X.width,height:Be+X.height,color:A.backdropColor}}b.push({label:j,font:k,textOffset:O,options:{rotation:w,color:H,strokeColor:L,strokeWidth:B,textAlign:z,textBaseline:$,translation:[N,C],backdrop:G}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-yr(this.labelRotation))return t==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,a=this._getLabelSizes(),l=t+i,c=a.widest.width;let u,d;return n==="left"?s?(d=this.right+i,r==="near"?u="left":r==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,r==="near"?u="right":r==="center"?(u="center",d-=c/2):(u="left",d=this.left)):n==="right"?s?(d=this.left+i,r==="near"?u="right":r==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,r==="near"?u="left":r==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:r,top:s,width:i,height:a}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(r,s,i,a),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===t);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,a;const l=(c,u,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(i=0,a=s.length;i<a;++i){const c=s[i];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),a=r.display?i.width:0;if(!a)return;const l=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,h,m;this.isHorizontal()?(u=lr(t,this.left,a)-a/2,d=lr(t,this.right,l)+l/2,h=m=c):(h=lr(t,this.top,a)-a/2,m=lr(t,this.bottom,l)+l/2,u=d=c),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,h),n.lineTo(d,m),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Bd(r,s);const i=this.getLabelItems(t);for(const a of i){const l=a.options,c=a.font,u=a.label,d=a.textOffset;Do(r,u,0,d,c,l)}s&&zd(r)}drawTitle(){const{ctx:t,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=st(r.font),a=zt(r.padding),l=r.align;let c=i.lineHeight/2;n==="bottom"||n==="center"||re(n)?(c+=a.bottom,Oe(r.text)&&(c+=i.lineHeight*(r.text.length-1))):c+=a.top;const{titleX:u,titleY:d,maxWidth:h,rotation:m}=ak(this,c,n,l);Do(t,r.text,0,0,i,{color:r.color,maxWidth:h,rotation:m,textAlign:ik(l,n,s),textBaseline:"middle",translation:[u,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,r=le(t.grid&&t.grid.z,-1),s=le(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==ml.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,a;for(i=0,a=n.length;i<a;++i){const l=n[i];l[r]===this.id&&(!t||l.type===t)&&s.push(l)}return s}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return st(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Na{constructor(t,n,r){this.type=t,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let r;ck(n)&&(r=this.register(n));const s=this.items,i=t.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in s||(s[i]=t,ok(t,a,r),this.override&&we.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const n=this.items,r=t.id,s=this.scope;r in n&&delete n[r],s&&r in we[s]&&(delete we[s][r],this.override&&delete Tr[r])}}function ok(e,t,n){const r=Di(Object.create(null),[n?we.get(n):{},we.get(t),e.defaults]);we.set(t,r),e.defaultRoutes&&lk(t,e.defaultRoutes),e.descriptors&&we.describe(t,e.descriptors)}function lk(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),s=r.pop(),i=[e].concat(r).join("."),a=t[n].split("."),l=a.pop(),c=a.join(".");we.route(i,s,c,l)})}function ck(e){return"id"in e&&"defaults"in e}class uk{constructor(){this.controllers=new Na(di,"datasets",!0),this.elements=new Na(Pr,"elements"),this.plugins=new Na(Object,"plugins"),this.scales=new Na(ml,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(t,i,s):oe(s,a=>{const l=r||this._getRegistryForType(a);this._exec(t,l,a)})})}_exec(t,n,r){const s=$d(t);fe(r["before"+s],[],r),n[t](r),fe(r["after"+s],[],r)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(t))return r}return this.plugins}_get(t,n,r){const s=n.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return s}}var Kt=new uk;class dk{constructor(){this._init=[]}notify(t,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=s?this._descriptors(t).filter(s):this._descriptors(t),a=this._notify(i,t,n,r);return n==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,n,r,s){s=s||{};for(const i of t){const a=i.plugin,l=a[r],c=[n,s,i.options];if(fe(l,c,a)===!1&&s.cancelable)return!1}return!0}invalidate(){ct(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const r=t&&t.config,s=le(r.options&&r.options.plugins,{}),i=hk(r);return s===!1&&!n?[]:mk(t,i,s,n)}_notifyStateChanges(t){const n=this._oldCache||[],r=this._cache,s=(i,a)=>i.filter(l=>!a.some(c=>l.plugin.id===c.plugin.id));this._notify(s(n,r),t,"stop"),this._notify(s(r,n),t,"start")}}function hk(e){const t={},n=[],r=Object.keys(Kt.plugins.items);for(let i=0;i<r.length;i++)n.push(Kt.getPlugin(r[i]));const s=e.plugins||[];for(let i=0;i<s.length;i++){const a=s[i];n.indexOf(a)===-1&&(n.push(a),t[a.id]=!0)}return{plugins:n,localIds:t}}function fk(e,t){return!t&&e===!1?null:e===!0?{}:e}function mk(e,{plugins:t,localIds:n},r,s){const i=[],a=e.getContext();for(const l of t){const c=l.id,u=fk(r[c],s);u!==null&&i.push({plugin:l,options:gk(e.config,{plugin:l,local:n[c]},u,a)})}return i}function gk(e,{plugin:t,local:n},r,s){const i=e.pluginScopeKeys(t),a=e.getOptionScopes(r,i);return n&&t.defaults&&a.push(t.defaults),e.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ju(e,t){const n=we.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function pk(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function xk(e,t){return e===t?"_index_":"_value_"}function Cm(e){if(e==="x"||e==="y"||e==="r")return e}function yk(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Nu(e,...t){if(Cm(e))return e;for(const n of t){const r=n.axis||yk(n.position)||e.length>1&&Cm(e[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function km(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function vk(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(r=>r.xAxisID===e||r.yAxisID===e);if(n.length)return km(e,"x",n[0])||km(e,"y",n[0])}return{}}function bk(e,t){const n=Tr[e.type]||{scales:{}},r=t.scales||{},s=ju(e.type,t),i=Object.create(null);return Object.keys(r).forEach(a=>{const l=r[a];if(!re(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=Nu(a,l,vk(a,e),we.scales[l.type]),u=xk(c,s),d=n.scales||{};i[a]=oi(Object.create(null),[{axis:c},l,d[c],d[u]])}),e.data.datasets.forEach(a=>{const l=a.type||e.type,c=a.indexAxis||ju(l,t),d=(Tr[l]||{}).scales||{};Object.keys(d).forEach(h=>{const m=pk(h,c),x=a[m+"AxisID"]||m;i[x]=i[x]||Object.create(null),oi(i[x],[{axis:m},r[x],d[h]])})}),Object.keys(i).forEach(a=>{const l=i[a];oi(l,[we.scales[l.type],we.scale])}),i}function Hx(e){const t=e.options||(e.options={});t.plugins=le(t.plugins,{}),t.scales=bk(e,t)}function Wx(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function wk(e){return e=e||{},e.data=Wx(e.data),Hx(e),e}const Em=new Map,Vx=new Set;function Sa(e,t){let n=Em.get(e);return n||(n=t(),Em.set(e,n),Vx.add(n)),n}const $s=(e,t,n)=>{const r=Ai(t,n);r!==void 0&&e.add(r)};class jk{constructor(t){this._config=wk(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Wx(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Hx(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Sa(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Sa(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Sa(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,r=this.type;return Sa(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const r=this._scopeCache;let s=r.get(t);return(!s||n)&&(s=new Map,r.set(t,s)),s}getOptionScopes(t,n,r){const{options:s,type:i}=this,a=this._cachedScopes(t,r),l=a.get(n);if(l)return l;const c=new Set;n.forEach(d=>{t&&(c.add(t),d.forEach(h=>$s(c,t,h))),d.forEach(h=>$s(c,s,h)),d.forEach(h=>$s(c,Tr[i]||{},h)),d.forEach(h=>$s(c,we,h)),d.forEach(h=>$s(c,vu,h))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),Vx.has(n)&&a.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,Tr[n]||{},we.datasets[n]||{},{type:n},we,vu]}resolveNamedOptions(t,n,r,s=[""]){const i={$shared:!0},{resolver:a,subPrefixes:l}=_m(this._resolverCache,t,s);let c=a;if(Sk(a,n)){i.$shared=!1,r=Zn(r)?r():r;const u=this.createResolver(t,r,l);c=fs(a,r,u)}for(const u of n)i[u]=c[u];return i}createResolver(t,n,r=[""],s){const{resolver:i}=_m(this._resolverCache,t,r);return re(n)?fs(i,n,void 0,s):i}}function _m(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const s=n.join();let i=r.get(s);return i||(i={resolver:Hd(t,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},r.set(s,i)),i}const Nk=e=>re(e)&&Object.getOwnPropertyNames(e).some(t=>Zn(e[t]));function Sk(e,t){const{isScriptable:n,isIndexable:r}=Px(e);for(const s of t){const i=n(s),a=r(s),l=(a||i)&&e[s];if(i&&(Zn(l)||Nk(l))||a&&Oe(l))return!0}return!1}var Ck="4.4.7";const kk=["top","bottom","left","right","chartArea"];function Tm(e,t){return e==="top"||e==="bottom"||kk.indexOf(e)===-1&&t==="x"}function Pm(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function Mm(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),fe(n&&n.onComplete,[e],t)}function Ek(e){const t=e.chart,n=t.options.animation;fe(n&&n.onProgress,[e],t)}function Yx(e){return Yd()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const qa={},Im=e=>{const t=Yx(e);return Object.values(qa).filter(n=>n.canvas===t).pop()};function _k(e,t,n){const r=Object.keys(e);for(const s of r){const i=+s;if(i>=t){const a=e[s];delete e[s],(n>0||i>t)&&(e[i+n]=a)}}}function Tk(e,t,n,r){return!n||e.type==="mouseout"?null:r?t:e}function Ca(e,t,n){return e.options.clip?e[n]:t[n]}function Pk(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:Ca(n,t,"left"),right:Ca(n,t,"right"),top:Ca(r,t,"top"),bottom:Ca(r,t,"bottom")}:t}var En;let gl=(En=class{static register(...t){Kt.add(...t),Rm()}static unregister(...t){Kt.remove(...t),Rm()}constructor(t,n){const r=this.config=new jk(n),s=Yx(t),i=Im(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||qC(s)),this.platform.updateConfig(r);const l=this.platform.acquireContext(s,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=iS(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new dk,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=wS(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],qa[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}ln.listen(this,"complete",Mm),ln.listen(this,"progress",Ek),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return ct(t)?n&&i?i:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Kt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():om(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return rm(this.canvas,this.ctx),this}stop(){return ln.stop(this),this}resize(t,n){ln.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,n,i),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,om(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),fe(r.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};oe(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const t=this.options,n=t.scales,r=this.scales,s=Object.keys(r).reduce((a,l)=>(a[l]=!1,a),{});let i=[];n&&(i=i.concat(Object.keys(n).map(a=>{const l=n[a],c=Nu(a,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),oe(i,a=>{const l=a.options,c=l.id,u=Nu(c,l),d=le(l.type,a.dtype);(l.position===void 0||Tm(l.position,u)!==Tm(a.dposition))&&(l.position=a.dposition),s[c]=!0;let h=null;if(c in r&&r[c].type===d)h=r[c];else{const m=Kt.getScale(d);h=new m({id:c,type:d,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(l,t)}),oe(s,(a,l)=>{a||delete r[l]}),oe(r,a=>{On.configure(this,a,a.options),On.addBox(this,a)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,r=t.length;if(t.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);t.splice(n,r-n)}this._sortedMetasets=t.slice(0).sort(Pm("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let a=this.getDatasetMeta(r);const l=i.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=l,a.indexAxis=i.indexAxis||ju(l,this.options),a.order=i.order||0,a.index=r,a.label=""+i.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const c=Kt.getController(l),{datasetElementType:u,dataElementType:d}=we.datasets[l];Object.assign(c,{dataElementType:Kt.getElement(d),datasetElementType:u&&Kt.getElement(u)}),a.controller=new c(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){oe(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:h}=this.getDatasetMeta(u),m=!s&&i.indexOf(h)===-1;h.buildOrUpdateElements(m),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||oe(i,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Pm("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){oe(this.scales,t=>{On.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!qf(n,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const a=r==="_removeElements"?-i:i;_k(t,s,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(t.filter(a=>a[0]===i).map((a,l)=>l+","+a.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!qf(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;On.update(this,this.width,this.height,t);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],oe(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Zn(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const r=this.getDatasetMeta(t),s={meta:r,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ln.has(this)?this.attached&&!ln.running(this)&&ln.start(this):(this.draw(),Mm({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const a=n[s];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,r=t._clip,s=!r.disabled,i=Pk(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(s&&Bd(n,{left:r.left===!1?0:i.left-r.left,right:r.right===!1?this.width:i.right+r.right,top:r.top===!1?0:i.top-r.top,bottom:r.bottom===!1?this.height:i.bottom+r.bottom}),t.controller.draw(),s&&zd(n),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return Tx(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,r,s){const i=kC.modes[n];return typeof i=="function"?i(this,t,r,s):[]}getDatasetMeta(t){const n=this.data.datasets[t],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=js(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(t,n){const r=this.getDatasetMeta(t);r.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(t),a=i.controller._resolveAnimations(void 0,s);Po(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(i,{visible:r}),this.update(l=>l.datasetIndex===t?s:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),ln.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),rm(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete qa[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,r=(i,a)=>{n.addEventListener(this,i,a),t[i]=a},s=(i,a,l)=>{i.offsetX=a,i.offsetY=l,this._eventHandler(i)};oe(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,r=(c,u)=>{n.addEventListener(this,c,u),t[c]=u},s=(c,u)=>{t[c]&&(n.removeEventListener(this,c,u),delete t[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let a;const l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",i),r("detach",a)};a=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",l)},n.isAttached(this.canvas)?l():a()}unbindEvents(){oe(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},oe(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,r){const s=r?"set":"remove";let i,a,l,c;for(n==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){a=t[l];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],r=t.map(({datasetIndex:i,index:a})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[a],index:a}});!_o(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(t,n,r){return this._plugins.notify(this,t,n,r)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,r){const s=this.options.hover,i=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=i(n,t),l=r?t:i(t,n);a.length&&this.updateHoverStyle(a,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(t,n){const r={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(t,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(t,n,r){const{_active:s=[],options:i}=this,a=n,l=this._getActiveElements(t,s,r,a),c=dS(t),u=Tk(t,this._lastEvent,r,c);r&&(this._lastEvent=null,fe(i.onHover,[t,l,this],this),c&&fe(i.onClick,[t,l,this],this));const d=!_o(l,s);return(d||n)&&(this._active=l,this._updateHoverStyles(l,s,n)),this._lastEvent=u,d}_getActiveElements(t,n,r,s){if(t.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,s)}},J(En,"defaults",we),J(En,"instances",qa),J(En,"overrides",Tr),J(En,"registry",Kt),J(En,"version",Ck),J(En,"getChart",Im),En);function Rm(){return oe(gl.instances,e=>e._plugins.invalidate())}function Mk(e,t,n){const{startAngle:r,pixelMargin:s,x:i,y:a,outerRadius:l,innerRadius:c}=t;let u=s/l;e.beginPath(),e.arc(i,a,l,r-u,n+u),c>s?(u=s/c,e.arc(i,a,c,n+u,r-u,!0)):e.arc(i,a,s,n+Pe,r-Pe),e.closePath(),e.clip()}function Ik(e){return Ud(e,["outerStart","outerEnd","innerStart","innerEnd"])}function Rk(e,t,n,r){const s=Ik(e.options.borderRadius),i=(n-t)/2,a=Math.min(i,r*t/2),l=c=>{const u=(n-Math.min(i,c))*r/2;return Ct(c,0,Math.min(i,u))};return{outerStart:l(s.outerStart),outerEnd:l(s.outerEnd),innerStart:Ct(s.innerStart,0,a),innerEnd:Ct(s.innerEnd,0,a)}}function Or(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function Oo(e,t,n,r,s,i){const{x:a,y:l,startAngle:c,pixelMargin:u,innerRadius:d}=t,h=Math.max(t.outerRadius+r+n-u,0),m=d>0?d+r+n+u:0;let x=0;const f=s-c;if(r){const A=d>0?d-r:0,R=h>0?h-r:0,H=(A+R)/2,L=H!==0?f*H/(H+r):f;x=(f-L)/2}const w=Math.max(.001,f*h-n/Re)/h,b=(f-w)/2,g=c+b+x,y=s-b-x,{outerStart:p,outerEnd:j,innerStart:N,innerEnd:C}=Rk(t,m,h,y-g),E=h-p,S=h-j,k=g+p/E,_=y-j/S,T=m+N,O=m+C,$=g+N/T,Y=y-C/O;if(e.beginPath(),i){const A=(k+_)/2;if(e.arc(a,l,h,k,A),e.arc(a,l,h,A,_),j>0){const B=Or(S,_,a,l);e.arc(B.x,B.y,j,_,y+Pe)}const R=Or(O,y,a,l);if(e.lineTo(R.x,R.y),C>0){const B=Or(O,Y,a,l);e.arc(B.x,B.y,C,y+Pe,Y+Math.PI)}const H=(y-C/m+(g+N/m))/2;if(e.arc(a,l,m,y-C/m,H,!0),e.arc(a,l,m,H,g+N/m,!0),N>0){const B=Or(T,$,a,l);e.arc(B.x,B.y,N,$+Math.PI,g-Pe)}const L=Or(E,g,a,l);if(e.lineTo(L.x,L.y),p>0){const B=Or(E,k,a,l);e.arc(B.x,B.y,p,g-Pe,k)}}else{e.moveTo(a,l);const A=Math.cos(k)*h+a,R=Math.sin(k)*h+l;e.lineTo(A,R);const H=Math.cos(_)*h+a,L=Math.sin(_)*h+l;e.lineTo(H,L)}e.closePath()}function Dk(e,t,n,r,s){const{fullCircles:i,startAngle:a,circumference:l}=t;let c=t.endAngle;if(i){Oo(e,t,n,r,c,s);for(let u=0;u<i;++u)e.fill();isNaN(l)||(c=a+(l%Se||Se))}return Oo(e,t,n,r,c,s),e.fill(),c}function Ak(e,t,n,r,s){const{fullCircles:i,startAngle:a,circumference:l,options:c}=t,{borderWidth:u,borderJoinStyle:d,borderDash:h,borderDashOffset:m}=c,x=c.borderAlign==="inner";if(!u)return;e.setLineDash(h||[]),e.lineDashOffset=m,x?(e.lineWidth=u*2,e.lineJoin=d||"round"):(e.lineWidth=u,e.lineJoin=d||"bevel");let f=t.endAngle;if(i){Oo(e,t,n,r,f,s);for(let w=0;w<i;++w)e.stroke();isNaN(l)||(f=a+(l%Se||Se))}x&&Mk(e,t,f),i||(Oo(e,t,n,r,f,s),e.stroke())}class Qs extends Pr{constructor(n){super();J(this,"circumference");J(this,"endAngle");J(this,"fullCircles");J(this,"innerRadius");J(this,"outerRadius");J(this,"pixelMargin");J(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.getProps(["x","y"],s),{angle:a,distance:l}=bx(i,{x:n,y:r}),{startAngle:c,endAngle:u,innerRadius:d,outerRadius:h,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),x=(this.options.spacing+this.options.borderWidth)/2,f=le(m,u-c),w=Ro(a,c,u)&&c!==u,b=f>=Se||w,g=qs(l,d+x,h+x);return b&&g}getCenterPoint(n){const{x:r,y:s,startAngle:i,endAngle:a,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:u,spacing:d}=this.options,h=(i+a)/2,m=(l+c+d+u)/2;return{x:r+Math.cos(h)*m,y:s+Math.sin(h)*m}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:s}=this,i=(r.offset||0)/4,a=(r.spacing||0)/2,l=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=s>Se?Math.floor(s/Se):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const c=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(c)*i,Math.sin(c)*i);const u=1-Math.sin(Math.min(Re,s||0)),d=i*u;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,Dk(n,this,d,a,l),Ak(n,this,d,a,l),n.restore()}}J(Qs,"id","arc"),J(Qs,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),J(Qs,"defaultRoutes",{backgroundColor:"backgroundColor"}),J(Qs,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});const Dm=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}},Lk=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Am extends Pr{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,r){this.maxWidth=t,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=fe(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(r=>t.filter(r,this.chart.data))),t.sort&&(n=n.sort((r,s)=>t.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,s=st(r.font),i=s.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=Dm(r,i);let u,d;n.font=s.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(a,i,l,c)+10):(d=this.maxHeight,u=this._fitCols(a,s,l,c)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,n,r,s){const{ctx:i,maxWidth:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=s+l;let h=t;i.textAlign="left",i.textBaseline="middle";let m=-1,x=-d;return this.legendItems.forEach((f,w)=>{const b=r+n/2+i.measureText(f.text).width;(w===0||u[u.length-1]+b+2*l>a)&&(h+=d,u[u.length-(w>0?0:1)]=0,x+=d,m++),c[w]={left:0,top:x,row:m,width:b,height:s},u[u.length-1]+=b+l}),h}_fitCols(t,n,r,s){const{ctx:i,maxHeight:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=a-t;let h=l,m=0,x=0,f=0,w=0;return this.legendItems.forEach((b,g)=>{const{itemWidth:y,itemHeight:p}=Ok(r,n,i,b,s);g>0&&x+p+2*l>d&&(h+=m+l,u.push({width:m,height:x}),f+=m+l,w++,m=x=0),c[g]={left:f,top:x,col:w,width:y,height:p},m=Math.max(m,y),x+=p+l}),h+=m,u.push({width:m,height:x}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,a=ss(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=ht(r,this.left+s,this.right-this.lineWidths[l]);for(const u of n)l!==u.row&&(l=u.row,c=ht(r,this.left+s,this.right-this.lineWidths[l])),u.top+=this.top+t+s,u.left=a.leftForLtr(a.x(c),u.width),c+=u.width+s}else{let l=0,c=ht(r,this.top+t+s,this.bottom-this.columnSizes[l].height);for(const u of n)u.col!==l&&(l=u.col,c=ht(r,this.top+t+s,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+s,u.left=a.leftForLtr(a.x(u.left),u.width),c+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Bd(t,this),this._draw(),zd(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:a}=t,l=we.color,c=ss(t.rtl,this.left,this.width),u=st(a.font),{padding:d}=a,h=u.size,m=h/2;let x;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:f,boxHeight:w,itemHeight:b}=Dm(a,h),g=function(C,E,S){if(isNaN(f)||f<=0||isNaN(w)||w<0)return;s.save();const k=le(S.lineWidth,1);if(s.fillStyle=le(S.fillStyle,l),s.lineCap=le(S.lineCap,"butt"),s.lineDashOffset=le(S.lineDashOffset,0),s.lineJoin=le(S.lineJoin,"miter"),s.lineWidth=k,s.strokeStyle=le(S.strokeStyle,l),s.setLineDash(le(S.lineDash,[])),a.usePointStyle){const _={radius:w*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:k},T=c.xPlus(C,f/2),O=E+m;_x(s,_,T,O,a.pointStyleWidth&&f)}else{const _=E+Math.max((h-w)/2,0),T=c.leftForLtr(C,f),O=ui(S.borderRadius);s.beginPath(),Object.values(O).some($=>$!==0)?bu(s,{x:T,y:_,w:f,h:w,radius:O}):s.rect(T,_,f,w),s.fill(),k!==0&&s.stroke()}s.restore()},y=function(C,E,S){Do(s,S.text,C,E+b/2,u,{strikethrough:S.hidden,textAlign:c.textAlign(S.textAlign)})},p=this.isHorizontal(),j=this._computeTitleHeight();p?x={x:ht(i,this.left+d,this.right-r[0]),y:this.top+d+j,line:0}:x={x:this.left+d,y:ht(i,this.top+j+d,this.bottom-n[0].height),line:0},Dx(this.ctx,t.textDirection);const N=b+d;this.legendItems.forEach((C,E)=>{s.strokeStyle=C.fontColor,s.fillStyle=C.fontColor;const S=s.measureText(C.text).width,k=c.textAlign(C.textAlign||(C.textAlign=a.textAlign)),_=f+m+S;let T=x.x,O=x.y;c.setWidth(this.width),p?E>0&&T+_+d>this.right&&(O=x.y+=N,x.line++,T=x.x=ht(i,this.left+d,this.right-r[x.line])):E>0&&O+N>this.bottom&&(T=x.x=T+n[x.line].width+d,x.line++,O=x.y=ht(i,this.top+j+d,this.bottom-n[x.line].height));const $=c.x(T);if(g($,O,C),T=jS(k,T+f+m,p?T+_:this.right,t.rtl),y(c.x(T),O,C),p)x.x+=_+d;else if(typeof C.text!="string"){const Y=u.lineHeight;x.y+=qx(C,Y)+d}else x.y+=N}),Ax(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,r=st(n.font),s=zt(n.padding);if(!n.display)return;const i=ss(t.rtl,this.left,this.width),a=this.ctx,l=n.position,c=r.size/2,u=s.top+c;let d,h=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),d=this.top+u,h=ht(t.align,h,this.right-m);else{const f=this.columnSizes.reduce((w,b)=>Math.max(w,b.height),0);d=u+ht(t.align,this.top,this.bottom-f-t.labels.padding-this._computeTitleHeight())}const x=ht(l,h,h+m);a.textAlign=i.textAlign(Sx(l)),a.textBaseline="middle",a.strokeStyle=n.color,a.fillStyle=n.color,a.font=r.string,Do(a,n.text,x,d,r)}_computeTitleHeight(){const t=this.options.title,n=st(t.font),r=zt(t.padding);return t.display?n.lineHeight+r.height:0}_getLegendItemAt(t,n){let r,s,i;if(qs(t,this.left,this.right)&&qs(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],qs(t,s.left,s.left+s.width)&&qs(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(t){const n=this.options;if(!Bk(t.type,n))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,i=Lk(s,r);s&&!i&&fe(n.onLeave,[t,s,this],this),this._hoveredItem=r,r&&!i&&fe(n.onHover,[t,r,this],this)}else r&&fe(n.onClick,[t,r,this],this)}}function Ok(e,t,n,r,s){const i=$k(r,e,t,n),a=Fk(s,r,t.lineHeight);return{itemWidth:i,itemHeight:a}}function $k(e,t,n,r){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((i,a)=>i.length>a.length?i:a)),t+n.size/2+r.measureText(s).width}function Fk(e,t,n){let r=e;return typeof t.text!="string"&&(r=qx(t,n)),r}function qx(e,t){const n=e.text?e.text.length:0;return t*n}function Bk(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var zk={id:"legend",_element:Am,start(e,t,n){const r=e.legend=new Am({ctx:e.ctx,options:n,chart:e});On.configure(e,r,n),On.addBox(e,r)},stop(e){On.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;On.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),t.hidden=!0):(s.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:a,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(n?0:void 0),d=zt(u.borderWidth);return{text:t[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:a&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};const Gs={average(e){if(!e.length)return!1;let t,n,r=new Set,s=0,i=0;for(t=0,n=e.length;t<n;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();r.add(c.x),s+=c.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((l,c)=>l+c)/r.size,y:s/i}},nearest(e,t){if(!e.length)return!1;let n=t.x,r=t.y,s=Number.POSITIVE_INFINITY,i,a,l;for(i=0,a=e.length;i<a;++i){const c=e[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=gS(t,u);d<s&&(s=d,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,r=c.y}return{x:n,y:r}}};function Yt(e,t){return t&&(Oe(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function cn(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function Uk(e,t){const{element:n,datasetIndex:r,index:s}=t,i=e.getDatasetMeta(r).controller,{label:a,value:l}=i.getLabelAndValue(s);return{chart:e,label:a,parsed:i.getParsed(s),raw:e.data.datasets[r].data[s],formattedValue:l,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function Lm(e,t){const n=e.chart.ctx,{body:r,footer:s,title:i}=e,{boxWidth:a,boxHeight:l}=t,c=st(t.bodyFont),u=st(t.titleFont),d=st(t.footerFont),h=i.length,m=s.length,x=r.length,f=zt(t.padding);let w=f.height,b=0,g=r.reduce((j,N)=>j+N.before.length+N.lines.length+N.after.length,0);if(g+=e.beforeBody.length+e.afterBody.length,h&&(w+=h*u.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),g){const j=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;w+=x*j+(g-x)*c.lineHeight+(g-1)*t.bodySpacing}m&&(w+=t.footerMarginTop+m*d.lineHeight+(m-1)*t.footerSpacing);let y=0;const p=function(j){b=Math.max(b,n.measureText(j).width+y)};return n.save(),n.font=u.string,oe(e.title,p),n.font=c.string,oe(e.beforeBody.concat(e.afterBody),p),y=t.displayColors?a+2+t.boxPadding:0,oe(r,j=>{oe(j.before,p),oe(j.lines,p),oe(j.after,p)}),y=0,n.font=d.string,oe(e.footer,p),n.restore(),b+=f.width,{width:b,height:w}}function Hk(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}function Wk(e,t,n,r){const{x:s,width:i}=r,a=n.caretSize+n.caretPadding;if(e==="left"&&s+i+a>t.width||e==="right"&&s-i-a<0)return!0}function Vk(e,t,n,r){const{x:s,width:i}=n,{width:a,chartArea:{left:l,right:c}}=e;let u="center";return r==="center"?u=s<=(l+c)/2?"left":"right":s<=i/2?u="left":s>=a-i/2&&(u="right"),Wk(u,e,t,n)&&(u="center"),u}function Om(e,t,n){const r=n.yAlign||t.yAlign||Hk(e,n);return{xAlign:n.xAlign||t.xAlign||Vk(e,t,n,r),yAlign:r}}function Yk(e,t){let{x:n,width:r}=e;return t==="right"?n-=r:t==="center"&&(n-=r/2),n}function qk(e,t,n){let{y:r,height:s}=e;return t==="top"?r+=n:t==="bottom"?r-=s+n:r-=s/2,r}function $m(e,t,n,r){const{caretSize:s,caretPadding:i,cornerRadius:a}=e,{xAlign:l,yAlign:c}=n,u=s+i,{topLeft:d,topRight:h,bottomLeft:m,bottomRight:x}=ui(a);let f=Yk(t,l);const w=qk(t,c,u);return c==="center"?l==="left"?f+=u:l==="right"&&(f-=u):l==="left"?f-=Math.max(d,m)+s:l==="right"&&(f+=Math.max(h,x)+s),{x:Ct(f,0,r.width-t.width),y:Ct(w,0,r.height-t.height)}}function ka(e,t,n){const r=zt(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-r.right:e.x+r.left}function Fm(e){return Yt([],cn(e))}function Kk(e,t,n){return js(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function Bm(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Kx={beforeTitle:on,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:on,beforeBody:on,beforeLabel:on,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return ct(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:on,afterBody:on,beforeFooter:on,footer:on,afterFooter:on};function et(e,t,n,r){const s=e[t].call(n,r);return typeof s>"u"?Kx[t].call(n,r):s}class Su extends Pr{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new Lx(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Kk(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:r}=n,s=et(r,"beforeTitle",this,t),i=et(r,"title",this,t),a=et(r,"afterTitle",this,t);let l=[];return l=Yt(l,cn(s)),l=Yt(l,cn(i)),l=Yt(l,cn(a)),l}getBeforeBody(t,n){return Fm(et(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:r}=n,s=[];return oe(t,i=>{const a={before:[],lines:[],after:[]},l=Bm(r,i);Yt(a.before,cn(et(l,"beforeLabel",this,i))),Yt(a.lines,et(l,"label",this,i)),Yt(a.after,cn(et(l,"afterLabel",this,i))),s.push(a)}),s}getAfterBody(t,n){return Fm(et(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:r}=n,s=et(r,"beforeFooter",this,t),i=et(r,"footer",this,t),a=et(r,"afterFooter",this,t);let l=[];return l=Yt(l,cn(s)),l=Yt(l,cn(i)),l=Yt(l,cn(a)),l}_createItems(t){const n=this._active,r=this.chart.data,s=[],i=[],a=[];let l=[],c,u;for(c=0,u=n.length;c<u;++c)l.push(Uk(this.chart,n[c]));return t.filter&&(l=l.filter((d,h,m)=>t.filter(d,h,m,r))),t.itemSort&&(l=l.sort((d,h)=>t.itemSort(d,h,r))),oe(l,d=>{const h=Bm(t.callbacks,d);s.push(et(h,"labelColor",this,d)),i.push(et(h,"labelPointStyle",this,d)),a.push(et(h,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=l,l}update(t,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,a=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const l=Gs[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const c=this._size=Lm(this,r),u=Object.assign({},l,c),d=Om(this.chart,r,u),h=$m(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,r,s){const i=this.getCaretPosition(t,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(t,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:a,cornerRadius:l}=r,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=ui(l),{x:m,y:x}=t,{width:f,height:w}=n;let b,g,y,p,j,N;return i==="center"?(j=x+w/2,s==="left"?(b=m,g=b-a,p=j+a,N=j-a):(b=m+f,g=b+a,p=j-a,N=j+a),y=b):(s==="left"?g=m+Math.max(c,d)+a:s==="right"?g=m+f-Math.max(u,h)-a:g=this.caretX,i==="top"?(p=x,j=p-a,b=g-a,y=g+a):(p=x+w,j=p+a,b=g+a,y=g-a),N=p),{x1:b,x2:g,x3:y,y1:p,y2:j,y3:N}}drawTitle(t,n,r){const s=this.title,i=s.length;let a,l,c;if(i){const u=ss(r.rtl,this.x,this.width);for(t.x=ka(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",a=st(r.titleFont),l=r.titleSpacing,n.fillStyle=r.titleColor,n.font=a.string,c=0;c<i;++c)n.fillText(s[c],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+l,c+1===i&&(t.y+=r.titleMarginBottom-l)}}_drawColorBox(t,n,r,s,i){const a=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=i,d=st(i.bodyFont),h=ka(this,"left",i),m=s.x(h),x=c<d.lineHeight?(d.lineHeight-c)/2:0,f=n.y+x;if(i.usePointStyle){const w={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=s.leftForLtr(m,u)+u/2,g=f+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,sm(t,w,b,g),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,sm(t,w,b,g)}else{t.lineWidth=re(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const w=s.leftForLtr(m,u),b=s.leftForLtr(s.xPlus(m,1),u-2),g=ui(a.borderRadius);Object.values(g).some(y=>y!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,bu(t,{x:w,y:f,w:u,h:c,radius:g}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),bu(t,{x:b,y:f+1,w:u-2,h:c-2,radius:g}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(w,f,u,c),t.strokeRect(w,f,u,c),t.fillStyle=a.backgroundColor,t.fillRect(b,f+1,u-2,c-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=r,h=st(r.bodyFont);let m=h.lineHeight,x=0;const f=ss(r.rtl,this.x,this.width),w=function(S){n.fillText(S,f.x(t.x+x),t.y+m/2),t.y+=m+i},b=f.textAlign(a);let g,y,p,j,N,C,E;for(n.textAlign=a,n.textBaseline="middle",n.font=h.string,t.x=ka(this,b,r),n.fillStyle=r.bodyColor,oe(this.beforeBody,w),x=l&&b!=="right"?a==="center"?u/2+d:u+2+d:0,j=0,C=s.length;j<C;++j){for(g=s[j],y=this.labelTextColors[j],n.fillStyle=y,oe(g.before,w),p=g.lines,l&&p.length&&(this._drawColorBox(n,t,j,f,r),m=Math.max(h.lineHeight,c)),N=0,E=p.length;N<E;++N)w(p[N]),m=h.lineHeight;oe(g.after,w)}x=0,m=h.lineHeight,oe(this.afterBody,w),t.y-=i}drawFooter(t,n,r){const s=this.footer,i=s.length;let a,l;if(i){const c=ss(r.rtl,this.x,this.width);for(t.x=ka(this,r.footerAlign,r),t.y+=r.footerMarginTop,n.textAlign=c.textAlign(r.footerAlign),n.textBaseline="middle",a=st(r.footerFont),n.fillStyle=r.footerColor,n.font=a.string,l=0;l<i;++l)n.fillText(s[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,n,r,s){const{xAlign:i,yAlign:a}=this,{x:l,y:c}=t,{width:u,height:d}=r,{topLeft:h,topRight:m,bottomLeft:x,bottomRight:f}=ui(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(l+h,c),a==="top"&&this.drawCaret(t,n,r,s),n.lineTo(l+u-m,c),n.quadraticCurveTo(l+u,c,l+u,c+m),a==="center"&&i==="right"&&this.drawCaret(t,n,r,s),n.lineTo(l+u,c+d-f),n.quadraticCurveTo(l+u,c+d,l+u-f,c+d),a==="bottom"&&this.drawCaret(t,n,r,s),n.lineTo(l+x,c+d),n.quadraticCurveTo(l,c+d,l,c+d-x),a==="center"&&i==="left"&&this.drawCaret(t,n,r,s),n.lineTo(l,c+h),n.quadraticCurveTo(l,c,l+h,c),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const a=Gs[t.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=Lm(this,t),c=Object.assign({},a,this._size),u=Om(n,t,c),d=$m(t,c,u,n);(s._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=zt(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=r,this.drawBackground(i,t,s,n),Dx(t,n.textDirection),i.y+=a.top,this.drawTitle(i,t,n),this.drawBody(i,t,n),this.drawFooter(i,t,n),Ax(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const r=this._active,s=t.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!_o(r,s),a=this._positionChanged(s,n);(i||a)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],a=this._getActiveElements(t,i,n,r),l=this._positionChanged(a,t),c=n||!_o(a,i)||l;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,r,s){const i=this.options;if(t.type==="mouseout")return[];if(!s)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,i.mode,i,r);return i.reverse&&a.reverse(),a}_positionChanged(t,n){const{caretX:r,caretY:s,options:i}=this,a=Gs[i.position].call(this,t,n);return a!==!1&&(r!==a.x||s!==a.y)}}J(Su,"positioners",Gs);var Xk={id:"tooltip",_element:Su,positioners:Gs,afterInit(e,t,n){n&&(e.tooltip=new Su({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Kx},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const pl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},nt=Object.keys(pl);function zm(e,t){return e-t}function Um(e,t){if(ct(t))return null;const n=e._adapter,{parser:r,round:s,isoWeekday:i}=e._parseOpts;let a=t;return typeof r=="function"&&(a=r(a)),wn(a)||(a=typeof r=="string"?n.parse(a,r):n.parse(a)),a===null?null:(s&&(a=s==="week"&&(Io(i)||i===!0)?n.startOf(a,"isoWeek",i):n.startOf(a,s)),+a)}function Hm(e,t,n,r){const s=nt.length;for(let i=nt.indexOf(e);i<s-1;++i){const a=pl[nt[i]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-t)/(l*a.size))<=r)return nt[i]}return nt[s-1]}function Qk(e,t,n,r,s){for(let i=nt.length-1;i>=nt.indexOf(n);i--){const a=nt[i];if(pl[a].common&&e._adapter.diff(s,r,a)>=t-1)return a}return nt[n?nt.indexOf(n):0]}function Gk(e){for(let t=nt.indexOf(e)+1,n=nt.length;t<n;++t)if(pl[nt[t]].common)return nt[t]}function Wm(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:r,hi:s}=Fd(n,t),i=n[r]>=t?n[r]:n[s];e[i]=!0}}function Zk(e,t,n,r){const s=e._adapter,i=+s.startOf(t[0].value,r),a=t[t.length-1].value;let l,c;for(l=i;l<=a;l=+s.add(l,1,r))c=n[l],c>=0&&(t[c].major=!0);return t}function Vm(e,t,n){const r=[],s={},i=t.length;let a,l;for(a=0;a<i;++a)l=t[a],s[l]=a,r.push({value:l,major:!1});return i===0||!n?r:Zk(e,r,s,n)}class $o extends ml{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const r=t.time||(t.time={}),s=this._adapter=new wC._date(t.adapters.date);s.init(n),oi(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:Um(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,r=t.time.unit||"day";let{min:s,max:i,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=wn(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=wn(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],r=t[t.length-1]),{min:n,max:r}}buildTicks(){const t=this.options,n=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,a=this.max,l=yS(s,i,a);return this._unit=n.unit||(r.autoSkip?Hm(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):Qk(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Gk(this._unit),this.initOffsets(s),t.reverse&&l.reverse(),Vm(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,r=0,s,i;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?n=1-s:n=(this.getDecimalForValue(t[1])-s)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?r=i:r=(i-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;n=Ct(n,0,a),r=Ct(r,0,a),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const t=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,a=i.unit||Hm(i.minUnit,n,r,this._getLabelCapacity(n)),l=le(s.ticks.stepSize,1),c=a==="week"?i.isoWeekday:!1,u=Io(c)||c===!0,d={};let h=n,m,x;if(u&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,u?"day":a),t.diff(r,n,a)>1e5*l)throw new Error(n+" and "+r+" are too far apart with stepSize of "+l+" "+a);const f=s.ticks.source==="data"&&this.getDataTimestamps();for(m=h,x=0;m<r;m=+t.add(m,l,a),x++)Wm(d,m,f);return(m===r||s.bounds==="ticks"||x===1)&&Wm(d,m,f),Object.keys(d).sort(zm).map(w=>+w)}getLabelForValue(t){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(t,r.tooltipFormat):n.format(t,r.displayFormats.datetime)}format(t,n){const s=this.options.time.displayFormats,i=this._unit,a=n||s[i];return this._adapter.format(t,a)}_tickFormatFunction(t,n,r,s){const i=this.options,a=i.ticks.callback;if(a)return fe(a,[t,n,r],this);const l=i.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],m=r[n],x=u&&h&&m&&m.major;return this._adapter.format(t,s||(x?h:d))}generateTickLabels(t){let n,r,s;for(n=0,r=t.length;n<r;++n)s=t[n],s.label=this._tickFormatFunction(s.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,r=this.ctx.measureText(t).width,s=yr(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),a=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*i+l*a,h:r*a+l*i}}_getLabelCapacity(t){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(t,0,Vm(this,[t],this._majorUnit),s),a=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,r;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)t=t.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,r;if(t.length)return t;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)t.push(Um(this,s[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return bS(t.sort(zm))}}J($o,"id","time"),J($o,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ea(e,t,n){let r=0,s=e.length-1,i,a,l,c;n?(t>=e[r].pos&&t<=e[s].pos&&({lo:r,hi:s}=yu(e,"pos",t)),{pos:i,time:l}=e[r],{pos:a,time:c}=e[s]):(t>=e[r].time&&t<=e[s].time&&({lo:r,hi:s}=yu(e,"time",t)),{time:i,pos:l}=e[r],{time:a,pos:c}=e[s]);const u=a-i;return u?l+(c-l)*(t-i)/u:l}class Ym extends $o{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Ea(n,this.min),this._tableRange=Ea(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:r}=this,s=[],i=[];let a,l,c,u,d;for(a=0,l=t.length;a<l;++a)u=t[a],u>=n&&u<=r&&s.push(u);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(a=0,l=s.length;a<l;++a)d=s[a+1],c=s[a-1],u=s[a],Math.round((d+c)/2)!==u&&i.push({time:u,pos:a/(l-1)});return i}_generate(){const t=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?t=this.normalize(n.concat(r)):t=n.length?n:r,t=this._cache.all=t,t}getDecimalForValue(t){return(Ea(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return Ea(this._table,r*this._tableRange+this._minPos,!0)}}J(Ym,"id","timeseries"),J(Ym,"defaults",$o.defaults);const Xx="label";function qm(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Jk(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function Qx(e,t){e.labels=t}function Gx(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Xx;const r=[];e.datasets=t.map(s=>{const i=e.datasets.find(a=>a[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function eE(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xx;const n={labels:[],datasets:[]};return Qx(n,e.labels),Gx(n,e.datasets,t),n}function tE(e,t){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:a,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h,...m}=e,x=v.useRef(null),f=v.useRef(),w=()=>{x.current&&(f.current=new gl(x.current,{type:a,data:eE(l,i),options:c&&{...c},plugins:u}),qm(t,f.current))},b=()=>{qm(t,null),f.current&&(f.current.destroy(),f.current=null)};return v.useEffect(()=>{!s&&f.current&&c&&Jk(f.current,c)},[s,c]),v.useEffect(()=>{!s&&f.current&&Qx(f.current.config.data,l.labels)},[s,l.labels]),v.useEffect(()=>{!s&&f.current&&l.datasets&&Gx(f.current.config.data,l.datasets,i)},[s,l.datasets]),v.useEffect(()=>{f.current&&(s?(b(),setTimeout(w)):f.current.update(h))},[s,c,l.labels,l.datasets,h]),v.useEffect(()=>{f.current&&(b(),setTimeout(w))},[a]),v.useEffect(()=>(w(),()=>b()),[]),Fi.createElement("canvas",Object.assign({ref:x,role:"img",height:n,width:r},m),d)}const nE=v.forwardRef(tE);function rE(e,t){return gl.register(t),v.forwardRef((n,r)=>Fi.createElement(nE,Object.assign({},n,{ref:r,type:e})))}const sE=rE("pie",wu);gl.register(Qs,Xk,zk);const iE=()=>{var m,x;const{user:e,isLoading:t}=bt(),[n,r]=v.useState(null),[s,i]=v.useState(null),[a,l]=v.useState(!0),[c,u]=v.useState(null);v.useEffect(()=>{(async()=>{var w,b,g,y,p,j;if(!(!e||t)){l(!0),u(null);try{if(e.role==="ADMIN"||e.role==="STAFF"){const[N,C,E,S]=await Promise.allSettled([W.get("/dashboard/stats"),W.get("/rooms"),W.get("/maintenance?status=PENDING&limit=1"),W.get("/invoices?status=UNPAID&limit=1")]),k=N.status==="fulfilled"?(w=N.value.data)==null?void 0:w.data:null,_=(k==null?void 0:k.totalStudents)??0,T=(k==null?void 0:k.availableRooms)??0,O=(k==null?void 0:k.pendingMaintenance)??0,$=(k==null?void 0:k.unpaidInvoices)??0;let Y={total:0,available:T,occupied:0,maintenance:0};if(C.status==="fulfilled"&&((b=C.value.data)!=null&&b.data)){const A=C.value.data.data;Y.total=A.length,A.forEach(R=>{R.status==="OCCUPIED"||R.status==="FULL"?Y.occupied++:R.status==="UNDER_MAINTENANCE"&&Y.maintenance++})}r({totalStudents:_,roomStats:Y,pendingMaintenance:O,pendingInvoices:$})}else if(e.role==="STUDENT"){const N=(g=e.profile)==null?void 0:g.id;if(!N)throw new Error("Không tìm thấy thông tin hồ sơ sinh viên.");const[C,E]=await Promise.allSettled([(y=e.profile)!=null&&y.roomId?W.get(`/rooms/${e.profile.roomId}`):Promise.resolve({status:"fulfilled",value:{data:{data:null}}}),W.get(`/invoices?studentId=${N}&status=UNPAID`)]),S=C.status==="fulfilled"?(p=C.value.data)==null?void 0:p.data:null,k=E.status==="fulfilled"?((j=E.value.data)==null?void 0:j.data)??[]:[];i({currentRoom:S,pendingInvoicesCount:k.length})}}catch(N){console.error("Lỗi khi tải dữ liệu Dashboard:",N),u("Không thể tải dữ liệu cho bảng điều khiển.")}finally{l(!1)}}})()},[e,t]);const d=v.useMemo(()=>{if(!(n!=null&&n.roomStats))return null;const{available:f,occupied:w,maintenance:b}=n.roomStats;return{labels:["Phòng trống","Đang ở/Đầy","Đang bảo trì"],datasets:[{data:[f,w,b],backgroundColor:["rgba(52, 211, 153, 0.7)","rgba(59, 130, 246, 0.7)","rgba(245, 158, 11, 0.7)"],borderColor:["rgba(5, 150, 105, 1)","rgba(37, 99, 235, 1)","rgba(217, 119, 6, 1)"],borderWidth:1}]}},[n]),h={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},tooltip:{callbacks:{label:function(f){let w=f.label||"";if(w&&(w+=": "),f.parsed!==null){const b=f.dataset.data.reduce((p,j)=>p+j,0),g=f.parsed,y=b>0?(g/b*100).toFixed(1)+"%":"0%";w+=`${g} (${y})`}return w}}}}};if(a||t)return o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{})});if(c)return o.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[o.jsx("strong",{className:"font-bold",children:"Lỗi!"}),o.jsxs("span",{className:"block sm:inline",children:[" ",c]})]});if(e&&(e.role==="ADMIN"||e.role==="STAFF")&&n)return o.jsxs("div",{className:"space-y-6",children:[o.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Bảng điều khiển"}),o.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[o.jsxs(Ee,{children:[o.jsx("div",{className:"p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(ox,{className:"h-6 w-6 text-blue-500","aria-hidden":"true"})}),o.jsx("div",{className:"ml-5 w-0 flex-1",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Tổng Sinh viên"}),o.jsx("dd",{className:"text-2xl font-semibold text-gray-900",children:n.totalStudents})]})})]})}),o.jsx("div",{className:"bg-gray-50 px-5 py-3 rounded-b-lg",children:o.jsx("div",{className:"text-sm",children:o.jsx(Le,{to:"/students",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Xem chi tiết"})})})]}),o.jsxs(Ee,{children:[o.jsx("div",{className:"p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(gu,{className:"h-6 w-6 text-green-500","aria-hidden":"true"})}),o.jsx("div",{className:"ml-5 w-0 flex-1",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Phòng Trống"}),o.jsx("dd",{className:"text-2xl font-semibold text-gray-900",children:n.roomStats.available})]})})]})}),o.jsx("div",{className:"bg-gray-50 px-5 py-3 rounded-b-lg",children:o.jsx("div",{className:"text-sm",children:o.jsx(Le,{to:"/rooms",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Xem chi tiết"})})})]}),o.jsxs(Ee,{children:[o.jsx("div",{className:"p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(So,{className:"h-6 w-6 text-yellow-500","aria-hidden":"true"})}),o.jsx("div",{className:"ml-5 w-0 flex-1",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"YC Bảo trì Chờ xử lý"}),o.jsx("dd",{className:"text-2xl font-semibold text-gray-900",children:n.pendingMaintenance})]})})]})}),o.jsx("div",{className:"bg-gray-50 px-5 py-3 rounded-b-lg",children:o.jsx("div",{className:"text-sm",children:o.jsx(Le,{to:"/maintenance",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Xem chi tiết"})})})]}),o.jsxs(Ee,{children:[o.jsx("div",{className:"p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(fu,{className:"h-6 w-6 text-red-500","aria-hidden":"true"})}),o.jsx("div",{className:"ml-5 w-0 flex-1",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Hóa đơn Chưa thanh toán"}),o.jsx("dd",{className:"text-2xl font-semibold text-gray-900",children:n.pendingInvoices})]})})]})}),o.jsx("div",{className:"bg-gray-50 px-5 py-3 rounded-b-lg",children:o.jsx("div",{className:"text-sm",children:o.jsx(Le,{to:"/invoices",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Xem chi tiết"})})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[o.jsx(Ee,{className:"lg:col-span-2",children:o.jsxs("div",{className:"p-5",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Trạng thái phòng"}),d?o.jsxs("div",{className:"h-64 md:h-80",children:[" ",o.jsx(sE,{data:d,options:h})]}):o.jsx("p",{className:"text-gray-500",children:"Không có dữ liệu phòng."})]})}),o.jsx(Ee,{children:o.jsxs("div",{className:"p-5",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Hoạt động gần đây"}),o.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[o.jsx("li",{children:"- Yêu cầu bảo trì mới từ phòng A101."}),o.jsx("li",{children:"- Sinh viên Nguyễn Văn B vừa đăng ký xe."}),o.jsx("li",{children:"- Hóa đơn tháng 5 đã được tạo."})]}),o.jsx(Le,{to:"#",className:"mt-4 inline-block text-sm font-medium text-indigo-600 hover:text-indigo-500",children:"Xem tất cả"})]})})]})]});if(e&&e.role==="STUDENT"&&s){const{currentRoom:f,pendingInvoicesCount:w}=s;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("h1",{className:"text-2xl font-semibold text-gray-900",children:["Chào mừng, ",((m=e.profile)==null?void 0:m.fullName)||e.name||e.email,"!"]}),o.jsx(Ee,{children:o.jsxs("div",{className:"p-5",children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[o.jsx(gu,{className:"h-5 w-5 mr-2 text-indigo-500"}),"Phòng ở hiện tại"]}),f?o.jsxs("div",{children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Tòa nhà:"})," ",((x=f.building)==null?void 0:x.name)||"N/A"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Số phòng:"})," ",f.number]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Loại phòng:"})," ",f.type]}),o.jsx(Le,{to:"/rooms",className:"mt-3 inline-block text-sm font-medium text-indigo-600 hover:text-indigo-500",children:"Xem chi tiết phòng"})]}):o.jsx("p",{className:"text-gray-600",children:"Bạn chưa được xếp phòng."})]})}),o.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2",children:[o.jsx(Ee,{children:o.jsxs("div",{className:"p-5",children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[o.jsx(fu,{className:"h-5 w-5 mr-2 text-red-500"}),"Hóa đơn & Thanh toán"]}),w>0?o.jsxs("p",{className:"text-red-600",children:["Bạn có ",w," hóa đơn chưa thanh toán."]}):o.jsx("p",{className:"text-green-600",children:"Không có hóa đơn nào cần thanh toán."}),o.jsx(Le,{to:"/profile",className:"mt-3 inline-block text-sm font-medium text-indigo-600 hover:text-indigo-500",children:"Xem hóa đơn của bạn"})," "]})}),o.jsx(Ee,{children:o.jsxs("div",{className:"p-5",children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[o.jsx(So,{className:"h-5 w-5 mr-2 text-yellow-500"}),"Bảo trì & Sửa chữa"]}),o.jsx("p",{className:"text-gray-600 mb-3",children:"Gặp sự cố trong phòng? Gửi yêu cầu ngay."}),o.jsx(Le,{to:"/maintenance/request",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Gửi yêu cầu mới"})]})})]})]})}return o.jsx("div",{children:"Không có dữ liệu hiển thị cho bảng điều khiển."})},Km=({studentComponent:e,staffComponent:t,adminComponent:n})=>{const{user:r,isLoading:s}=bt();return s?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{size:"lg"})}):(r==null?void 0:r.role)==="ADMIN"&&n?n:(r==null?void 0:r.role)==="ADMIN"||(r==null?void 0:r.role)==="STAFF"?t:e},aE=async(e={})=>{var t,n,r,s,i,a;try{const l=await W.get("/students",{params:e});if((t=l.data)!=null&&t.success||((n=l.data)==null?void 0:n.status)==="success"){if((r=l.data.data)!=null&&r.students)return l.data.data;if(Array.isArray(l.data.data))return{students:l.data.data,meta:{total:l.data.data.length,currentPage:e.page||1,totalPages:Math.ceil(l.data.data.length/(e.limit||10))}};if(l.data.data)return{students:l.data.data,meta:l.data.meta||{total:l.data.results||l.data.data.length,currentPage:e.page||1,totalPages:Math.ceil((l.data.results||l.data.data.length)/(e.limit||10))}}}throw console.warn("Unexpected API response structure:",l.data),new Error(((s=l.data)==null?void 0:s.message)||"Lấy danh sách sinh viên thất bại.")}catch(l){throw console.error("Lỗi service getAllStudents:",((i=l.response)==null?void 0:i.data)||l.message),((a=l.response)==null?void 0:a.data)||l}},oE=async e=>{var t,n,r,s,i;try{const a=await W.get(`/students/${e}`);if((t=a.data)!=null&&t.success&&((n=a.data)!=null&&n.data))return a.data.data;throw new Error(((r=a.data)==null?void 0:r.message)||`Không tìm thấy sinh viên với ID ${e}.`)}catch(a){throw console.error(`Lỗi service getStudentById (${e}):`,((s=a.response)==null?void 0:s.data)||a.message),((i=a.response)==null?void 0:i.data)||a}},lE=async e=>{var t,n,r,s,i;try{const a=await W.get(`/students/by-user/${e}`);if(((t=a.data)==null?void 0:t.status)==="success"&&((n=a.data)!=null&&n.data))return a.data.data;throw new Error(((r=a.data)==null?void 0:r.message)||`Không tìm thấy sinh viên với User ID ${e}.`)}catch(a){throw console.error(`Lỗi service getStudentByUserId (${e}):`,((s=a.response)==null?void 0:s.data)||a.message),((i=a.response)==null?void 0:i.data)||a}},cE=async e=>{var t,n,r,s,i;try{const a=await W.get(`/students/by-profile/${e}`);if(((t=a.data)==null?void 0:t.status)==="success"&&((n=a.data)!=null&&n.data))return a.data.data;throw new Error(((r=a.data)==null?void 0:r.message)||`Không tìm thấy sinh viên với Profile ID ${e}.`)}catch(a){throw console.error(`Lỗi service getStudentByProfileId (${e}):`,((s=a.response)==null?void 0:s.data)||a.message),((i=a.response)==null?void 0:i.data)||a}},uE=async e=>{var t,n,r,s,i,a,l;try{const c=await W.post("/students",e);if((t=c.data)!=null&&t.success&&((n=c.data)!=null&&n.data))return c.data.data;throw new Error(((r=c.data)==null?void 0:r.message)||"Tạo hồ sơ sinh viên thất bại.")}catch(c){throw console.error("Lỗi service createStudent:",((s=c.response)==null?void 0:s.data)||c.message),(a=(i=c.response)==null?void 0:i.data)!=null&&a.errors?c.response.data:((l=c.response)==null?void 0:l.data)||c}},dE=async(e,t)=>{var n,r,s,i,a,l,c;try{const u=await W.put(`/students/${e}`,t);if((n=u.data)!=null&&n.success&&((r=u.data)!=null&&r.data))return u.data.data;throw new Error(((s=u.data)==null?void 0:s.message)||"Cập nhật hồ sơ sinh viên thất bại.")}catch(u){throw console.error(`Lỗi service updateStudent (${e}):`,((i=u.response)==null?void 0:i.data)||u.message),(l=(a=u.response)==null?void 0:a.data)!=null&&l.errors?u.response.data:((c=u.response)==null?void 0:c.data)||u}},hE=async e=>{var t,n,r,s,i;try{const a=await W.delete(`/students/${e}`);if((t=a.data)!=null&&t.success||((n=a.data)==null?void 0:n.status)==="success")return a.data;throw new Error(((r=a.data)==null?void 0:r.message)||"Xóa hồ sơ sinh viên thất bại.")}catch(a){throw console.error(`Lỗi service deleteStudent (${e}):`,((s=a.response)==null?void 0:s.data)||a.message),((i=a.response)==null?void 0:i.data)||a}},Et={getAllStudents:aE,getStudentById:oE,getStudentByUserId:lE,getStudentByProfileId:cE,createStudent:uE,updateStudent:dE,deleteStudent:hE};var fE={lessThanXSeconds:{one:"dưới 1 giây",other:"dưới {{count}} giây"},xSeconds:{one:"1 giây",other:"{{count}} giây"},halfAMinute:"nửa phút",lessThanXMinutes:{one:"dưới 1 phút",other:"dưới {{count}} phút"},xMinutes:{one:"1 phút",other:"{{count}} phút"},aboutXHours:{one:"khoảng 1 giờ",other:"khoảng {{count}} giờ"},xHours:{one:"1 giờ",other:"{{count}} giờ"},xDays:{one:"1 ngày",other:"{{count}} ngày"},aboutXWeeks:{one:"khoảng 1 tuần",other:"khoảng {{count}} tuần"},xWeeks:{one:"1 tuần",other:"{{count}} tuần"},aboutXMonths:{one:"khoảng 1 tháng",other:"khoảng {{count}} tháng"},xMonths:{one:"1 tháng",other:"{{count}} tháng"},aboutXYears:{one:"khoảng 1 năm",other:"khoảng {{count}} năm"},xYears:{one:"1 năm",other:"{{count}} năm"},overXYears:{one:"hơn 1 năm",other:"hơn {{count}} năm"},almostXYears:{one:"gần 1 năm",other:"gần {{count}} năm"}},mE=function(t,n,r){var s,i=fE[t];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",String(n)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?s+" nữa":s+" trước":s},gE={full:"EEEE, 'ngày' d MMMM 'năm' y",long:"'ngày' d MMMM 'năm' y",medium:"d MMM 'năm' y",short:"dd/MM/y"},pE={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},xE={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},yE={date:rs({formats:gE,defaultWidth:"full"}),time:rs({formats:pE,defaultWidth:"full"}),dateTime:rs({formats:xE,defaultWidth:"full"})},vE={lastWeek:"eeee 'tuần trước vào lúc' p",yesterday:"'hôm qua vào lúc' p",today:"'hôm nay vào lúc' p",tomorrow:"'ngày mai vào lúc' p",nextWeek:"eeee 'tới vào lúc' p",other:"P"},bE=function(t,n,r,s){return vE[t]},wE={narrow:["TCN","SCN"],abbreviated:["trước CN","sau CN"],wide:["trước Công Nguyên","sau Công Nguyên"]},jE={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["Quý 1","Quý 2","Quý 3","Quý 4"]},NE={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["quý I","quý II","quý III","quý IV"]},SE={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["Thg 1","Thg 2","Thg 3","Thg 4","Thg 5","Thg 6","Thg 7","Thg 8","Thg 9","Thg 10","Thg 11","Thg 12"],wide:["Tháng Một","Tháng Hai","Tháng Ba","Tháng Tư","Tháng Năm","Tháng Sáu","Tháng Bảy","Tháng Tám","Tháng Chín","Tháng Mười","Tháng Mười Một","Tháng Mười Hai"]},CE={narrow:["01","02","03","04","05","06","07","08","09","10","11","12"],abbreviated:["thg 1","thg 2","thg 3","thg 4","thg 5","thg 6","thg 7","thg 8","thg 9","thg 10","thg 11","thg 12"],wide:["tháng 01","tháng 02","tháng 03","tháng 04","tháng 05","tháng 06","tháng 07","tháng 08","tháng 09","tháng 10","tháng 11","tháng 12"]},kE={narrow:["CN","T2","T3","T4","T5","T6","T7"],short:["CN","Th 2","Th 3","Th 4","Th 5","Th 6","Th 7"],abbreviated:["CN","Thứ 2","Thứ 3","Thứ 4","Thứ 5","Thứ 6","Thứ 7"],wide:["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"]},EE={narrow:{am:"am",pm:"pm",midnight:"nửa đêm",noon:"tr",morning:"sg",afternoon:"ch",evening:"tối",night:"đêm"},abbreviated:{am:"AM",pm:"PM",midnight:"nửa đêm",noon:"trưa",morning:"sáng",afternoon:"chiều",evening:"tối",night:"đêm"},wide:{am:"SA",pm:"CH",midnight:"nửa đêm",noon:"trưa",morning:"sáng",afternoon:"chiều",evening:"tối",night:"đêm"}},_E={narrow:{am:"am",pm:"pm",midnight:"nửa đêm",noon:"tr",morning:"sg",afternoon:"ch",evening:"tối",night:"đêm"},abbreviated:{am:"AM",pm:"PM",midnight:"nửa đêm",noon:"trưa",morning:"sáng",afternoon:"chiều",evening:"tối",night:"đêm"},wide:{am:"SA",pm:"CH",midnight:"nửa đêm",noon:"giữa trưa",morning:"vào buổi sáng",afternoon:"vào buổi chiều",evening:"vào buổi tối",night:"vào ban đêm"}},TE=function(t,n){var r=Number(t),s=n==null?void 0:n.unit;if(s==="quarter")switch(r){case 1:return"I";case 2:return"II";case 3:return"III";case 4:return"IV"}else if(s==="day")switch(r){case 1:return"thứ 2";case 2:return"thứ 3";case 3:return"thứ 4";case 4:return"thứ 5";case 5:return"thứ 6";case 6:return"thứ 7";case 7:return"chủ nhật"}else{if(s==="week")return r===1?"thứ nhất":"thứ "+r;if(s==="dayOfYear")return r===1?"đầu tiên":"thứ "+r}return String(r)},PE={ordinalNumber:TE,era:Qt({values:wE,defaultWidth:"wide"}),quarter:Qt({values:jE,defaultWidth:"wide",formattingValues:NE,defaultFormattingWidth:"wide",argumentCallback:function(t){return t-1}}),month:Qt({values:SE,defaultWidth:"wide",formattingValues:CE,defaultFormattingWidth:"wide"}),day:Qt({values:kE,defaultWidth:"wide"}),dayPeriod:Qt({values:EE,defaultWidth:"wide",formattingValues:_E,defaultFormattingWidth:"wide"})},ME=/^(\d+)/i,IE=/\d+/i,RE={narrow:/^(tcn|scn)/i,abbreviated:/^(trước CN|sau CN)/i,wide:/^(trước Công Nguyên|sau Công Nguyên)/i},DE={any:[/^t/i,/^s/i]},AE={narrow:/^([1234]|i{1,3}v?)/i,abbreviated:/^q([1234]|i{1,3}v?)/i,wide:/^quý ([1234]|i{1,3}v?)/i},LE={any:[/(1|i)$/i,/(2|ii)$/i,/(3|iii)$/i,/(4|iv)$/i]},OE={narrow:/^(0?[2-9]|10|11|12|0?1)/i,abbreviated:/^thg[ _]?(0?[1-9](?!\d)|10|11|12)/i,wide:/^tháng ?(Một|Hai|Ba|Tư|Năm|Sáu|Bảy|Tám|Chín|Mười|Mười ?Một|Mười ?Hai|0?[1-9](?!\d)|10|11|12)/i},$E={narrow:[/0?1$/i,/0?2/i,/3/,/4/,/5/,/6/,/7/,/8/,/9/,/10/,/11/,/12/],abbreviated:[/^thg[ _]?0?1(?!\d)/i,/^thg[ _]?0?2/i,/^thg[ _]?0?3/i,/^thg[ _]?0?4/i,/^thg[ _]?0?5/i,/^thg[ _]?0?6/i,/^thg[ _]?0?7/i,/^thg[ _]?0?8/i,/^thg[ _]?0?9/i,/^thg[ _]?10/i,/^thg[ _]?11/i,/^thg[ _]?12/i],wide:[/^tháng ?(Một|0?1(?!\d))/i,/^tháng ?(Hai|0?2)/i,/^tháng ?(Ba|0?3)/i,/^tháng ?(Tư|0?4)/i,/^tháng ?(Năm|0?5)/i,/^tháng ?(Sáu|0?6)/i,/^tháng ?(Bảy|0?7)/i,/^tháng ?(Tám|0?8)/i,/^tháng ?(Chín|0?9)/i,/^tháng ?(Mười|10)/i,/^tháng ?(Mười ?Một|11)/i,/^tháng ?(Mười ?Hai|12)/i]},FE={narrow:/^(CN|T2|T3|T4|T5|T6|T7)/i,short:/^(CN|Th ?2|Th ?3|Th ?4|Th ?5|Th ?6|Th ?7)/i,abbreviated:/^(CN|Th ?2|Th ?3|Th ?4|Th ?5|Th ?6|Th ?7)/i,wide:/^(Chủ ?Nhật|Chúa ?Nhật|thứ ?Hai|thứ ?Ba|thứ ?Tư|thứ ?Năm|thứ ?Sáu|thứ ?Bảy)/i},BE={narrow:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],short:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],abbreviated:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],wide:[/(Chủ|Chúa) ?Nhật/i,/Hai/i,/Ba/i,/Tư/i,/Năm/i,/Sáu/i,/Bảy/i]},zE={narrow:/^(a|p|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i,abbreviated:/^(am|pm|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i,wide:/^(ch[^i]*|sa|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i},UE={any:{am:/^(a|sa)/i,pm:/^(p|ch[^i]*)/i,midnight:/nửa đêm/i,noon:/trưa/i,morning:/sáng/i,afternoon:/chiều/i,evening:/tối/i,night:/^đêm/i}},HE={ordinalNumber:fx({matchPattern:ME,parsePattern:IE,valueCallback:function(t){return parseInt(t,10)}}),era:Gt({matchPatterns:RE,defaultMatchWidth:"wide",parsePatterns:DE,defaultParseWidth:"any"}),quarter:Gt({matchPatterns:AE,defaultMatchWidth:"wide",parsePatterns:LE,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Gt({matchPatterns:OE,defaultMatchWidth:"wide",parsePatterns:$E,defaultParseWidth:"wide"}),day:Gt({matchPatterns:FE,defaultMatchWidth:"wide",parsePatterns:BE,defaultParseWidth:"wide"}),dayPeriod:Gt({matchPatterns:zE,defaultMatchWidth:"wide",parsePatterns:UE,defaultParseWidth:"any"})},dt={code:"vi",formatDistance:mE,formatLong:yE,formatRelative:bE,localize:PE,match:HE,options:{weekStartsOn:1,firstWeekContainsDate:1}};function ms(e,t){const[n,r]=v.useState(e);return v.useEffect(()=>{const s=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(s)}},[e,t]),n}const WE=e=>{if(!e)return"-";try{return Ce(De(e),"dd/MM/yyyy",{locale:dt})}catch{return e}},VE=e=>{switch(e==null?void 0:e.toUpperCase()){case"ACTIVE":return"green";case"INACTIVE":return"gray";case"PENDING_APPROVAL":return"yellow";case"GRADUATED":return"blue";case"SUSPENDED":return"red";case"RENTING":return"purple";default:return"gray"}},YE=()=>{const[e,t]=v.useState([]),[n,r]=v.useState(!0),[s,i]=v.useState(null),[a,l]=v.useState({currentPage:1,totalPages:1,limit:10,total:0}),[c,u]=v.useState(1),[d,h]=v.useState(""),m=ms(d,500),x=se(),{user:f}=bt(),w=v.useCallback(async(p=1,j="")=>{r(!0),i(null);try{const N={keyword:void 0};console.log("Fetching all students with params:",N);const C=await Et.getAllStudents(N);console.log("Students data received:",C);const E=C.students||C.data||C;let S=Array.isArray(E)?E:[];if(j&&j.trim()!==""){const Y=j.trim().toLowerCase();S=S.filter(A=>(A.studentId||"").toLowerCase().includes(Y)),console.log(`Filtered to ${S.length} students with student ID containing "${Y}"`)}const k=S.length,_=Math.max(1,Math.ceil(k/10)),T=(p-1)*10,O=Math.min(T+10,k),$=S.slice(T,O);console.log("Client-side pagination:",{total:k,currentPage:p,totalPages:_,showing:`${T+1}-${O} of ${k}`}),t($),l({currentPage:p,totalPages:_,limit:10,total:k}),u(p)}catch(N){console.error("Error fetching students:",N),i("Không thể tải danh sách sinh viên."),P.error("Không thể tải danh sách sinh viên.")}finally{r(!1)}},[]);v.useEffect(()=>{w(c,m)},[w,c,m]);const b=async(p,j)=>{if(window.confirm(`Bạn có chắc chắn muốn xóa hồ sơ sinh viên "${j}" không? Hành động này có thể không thể hoàn tác.`))try{await Et.deleteStudent(p),P.success(`Đã xóa hồ sơ sinh viên "${j}" thành công!`),w(c,m)}catch(N){P.error((N==null?void 0:N.message)||`Xóa hồ sơ sinh viên "${j}" thất bại.`)}},g=p=>{p>0&&p<=a.totalPages&&(console.log(`Chuyển đến trang ${p}`),u(p),window.scrollTo({top:0,behavior:"smooth"}))},y=v.useMemo(()=>[{Header:"Ảnh",accessor:"avatar",Cell:({value:p,row:j})=>{var E,S,k;const N="http://localhost:5002/uploads";let C="src/assets/default-avatar.png";try{const _=j==null?void 0:j.original;(S=(E=_==null?void 0:_.user)==null?void 0:E.avatar)!=null&&S.path?C=_.user.avatar.path.startsWith("http")?_.user.avatar.path:`${N}${_.user.avatar.path.startsWith("/")?"":"/"}${_.user.avatar.path}`:(k=_==null?void 0:_.user)!=null&&k.avatarUrl&&(C=_.user.avatarUrl)}catch(_){console.log("Avatar rendering error:",_)}return o.jsx("img",{src:C,alt:"Avatar",className:"h-8 w-8 rounded-full object-cover mx-auto",onError:_=>{_.target.onerror=null,_.target.src="src/assets/default-avatar.png"}})}},{Header:"Mã SV",accessor:"studentId",Cell:({value:p})=>o.jsx("span",{className:"font-mono",children:p||"-"})},{Header:"Họ và tên",accessor:"fullName",Cell:({value:p})=>p||"-"},{Header:"Email",accessor:"email",Cell:({row:p})=>{var j,N;return((N=(j=p==null?void 0:p.original)==null?void 0:j.user)==null?void 0:N.email)||"-"}},{Header:"Số điện thoại",accessor:"phoneNumber",Cell:({value:p})=>p||"-"},{Header:"Phòng",accessor:"room",Cell:({row:p})=>{var N,C;const j=(N=p==null?void 0:p.original)==null?void 0:N.room;if(!j)return"-";try{const E=((C=j.building)==null?void 0:C.name)||"",S=j.number||j.roomNumber||j.name||j.id;return E?`${E} - Phòng ${S}`:`Phòng ${S}`}catch(E){return console.log("Room rendering error:",E),"-"}}},{Header:"Ngày sinh",accessor:"birthDate",Cell:({value:p})=>WE(p)},{Header:"Trạng thái",accessor:"status",Cell:({value:p})=>{const N={ACTIVE:"Đang học",INACTIVE:"Không hoạt động",PENDING_APPROVAL:"Chờ duyệt",GRADUATED:"Đã tốt nghiệp",SUSPENDED:"Đình chỉ",RENTING:"Đang thuê"}[p]||p||"N/A";return o.jsx($t,{color:VE(p),children:N})}},{Header:"Hành động",accessor:"actions",Cell:({row:p})=>{var N;const j=(N=p==null?void 0:p.original)==null?void 0:N.userId;return j?o.jsxs("div",{className:"flex space-x-2 justify-center",children:[o.jsx(U,{variant:"icon",onClick:()=>x(`/students/${j}`),tooltip:"Xem chi tiết",children:o.jsx(Md,{className:"h-5 w-5 text-blue-600 hover:text-blue-800"})}),o.jsx(U,{variant:"icon",onClick:()=>{var C;return x(`/students/${(C=p==null?void 0:p.original)==null?void 0:C.id}/edit`)},tooltip:"Chỉnh sửa",children:o.jsx(Pt,{className:"h-5 w-5 text-yellow-600 hover:text-yellow-800"})}),(f==null?void 0:f.role)==="ADMIN"&&o.jsx(U,{variant:"icon",onClick:()=>{var C;return b((C=p==null?void 0:p.original)==null?void 0:C.id,p.original.fullName||"Sinh viên này")},tooltip:"Xóa",children:o.jsx(Mt,{className:"h-5 w-5 text-red-600 hover:text-red-800"})})]}):null}}],[x,f,b]);return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[o.jsx("h1",{className:"text-2xl font-semibold",children:"Quản lý Sinh viên"}),(f==null?void 0:f.role)==="ADMIN"&&o.jsxs(U,{onClick:()=>x("/students/new"),className:"flex items-center gap-2",children:[o.jsx(qi,{className:"h-5 w-5"}),"Thêm tài khoản sinh viên"]})]}),o.jsx("div",{className:"max-w-sm",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tìm kiếm sinh viên"}),o.jsx(D,{placeholder:"Nhập mã số sinh viên...",value:d,onChange:p=>h(p.target.value)})]})}),n?o.jsx("div",{className:"flex justify-center items-center py-8",children:o.jsx(ee,{})}):s?o.jsx("div",{className:"text-red-600 bg-red-50 p-4 rounded text-center",children:s}):e.length?o.jsx(Bt,{columns:y,data:e,currentPage:a.currentPage,totalPages:a.totalPages,onPageChange:g,totalRecords:a.total,recordsPerPage:a.limit,showingText:`Hiển thị sinh viên ${(a.currentPage-1)*a.limit+1} - ${Math.min(a.currentPage*a.limit,a.total)}`,recordsText:"sinh viên",pageText:"Trang"}):o.jsx("div",{className:"text-gray-600 bg-gray-100 p-4 rounded text-center",children:"Không tìm thấy sinh viên nào."})]})},qE=async(e={})=>{var t,n,r,s,i;try{const a=await W.get("/rooms",{params:e});if(((t=a.data)==null?void 0:t.status)==="success"&&Array.isArray((n=a.data)==null?void 0:n.data))return console.log("Room data from API:",a.data.data[0]),{rooms:a.data.data,meta:{total:a.data.total||a.data.results||a.data.data.length,currentPage:parseInt(e.page)||1,totalPages:Math.ceil((a.data.total||a.data.results||a.data.data.length)/(e.limit||10)),limit:parseInt(e.limit)||10}};throw new Error(((r=a.data)==null?void 0:r.message)||"Lấy danh sách phòng thất bại.")}catch(a){throw console.error("Lỗi service getAllRooms:",((s=a.response)==null?void 0:s.data)||a.message),((i=a.response)==null?void 0:i.data)||a}},KE=async e=>{var t,n,r,s,i;try{const a=await W.get(`/rooms/${e}`);if(((t=a.data)==null?void 0:t.status)==="success"&&((n=a.data)!=null&&n.data))return a.data.data;throw new Error(((r=a.data)==null?void 0:r.message)||`Không tìm thấy phòng với ID ${e}.`)}catch(a){throw console.error(`Lỗi service getRoomById (${e}):`,((s=a.response)==null?void 0:s.data)||a.message),((i=a.response)==null?void 0:i.data)||a}},XE=async e=>{var t,n,r,s,i,a,l;try{const c=await W.post("/rooms",e);if(((t=c.data)==null?void 0:t.status)==="success"&&((n=c.data)!=null&&n.data))return c.data.data;throw new Error(((r=c.data)==null?void 0:r.message)||"Tạo phòng mới thất bại.")}catch(c){throw console.error("Lỗi service createRoom:",((s=c.response)==null?void 0:s.data)||c.message),(a=(i=c.response)==null?void 0:i.data)!=null&&a.errors?c.response.data:((l=c.response)==null?void 0:l.data)||c}},QE=async(e,t)=>{var n,r,s,i,a,l,c;try{const u=await W.put(`/rooms/${e}`,t);if(((n=u.data)==null?void 0:n.status)==="success"&&((r=u.data)!=null&&r.data))return u.data.data;throw new Error(((s=u.data)==null?void 0:s.message)||"Cập nhật phòng thất bại.")}catch(u){throw console.error(`Lỗi service updateRoom (${e}):`,((i=u.response)==null?void 0:i.data)||u.message),(l=(a=u.response)==null?void 0:a.data)!=null&&l.errors?u.response.data:((c=u.response)==null?void 0:c.data)||u}},GE=async e=>{var t,n,r,s;try{const i=await W.delete(`/rooms/${e}`);if(((t=i.data)==null?void 0:t.status)==="success")return i.data;throw new Error(((n=i.data)==null?void 0:n.message)||"Xóa phòng thất bại.")}catch(i){throw console.error(`Lỗi service deleteRoom (${e}):`,((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},ZE=async(e,t="room-image")=>{var r,s,i,a,l,c,u,d;const n=new FormData;n.append("file",e);try{const h=await W.post("/media/upload",n,{headers:{"Content-Type":"multipart/form-data"}});if((r=h.data)!=null&&r.success&&((i=(s=h.data)==null?void 0:s.data)!=null&&i.id))return h.data.data;throw new Error(((a=h.data)==null?void 0:a.message)||"Upload file thất bại.")}catch(h){throw console.error("Lỗi service uploadMedia:",((l=h.response)==null?void 0:l.data)||h.message),P.error(((u=(c=h.response)==null?void 0:c.data)==null?void 0:u.message)||"Upload file thất bại."),((d=h.response)==null?void 0:d.data)||h}},Ve={getAllRooms:qE,getRoomById:KE,createRoom:XE,updateRoom:QE,deleteRoom:GE,uploadMedia:ZE},JE=[{value:"MALE",label:"Nam"},{value:"FEMALE",label:"Nữ"}],e_=[{value:"ACTIVE",label:"Đang hoạt động"},{value:"INACTIVE",label:"Không hoạt động"},{value:"PENDING_APPROVAL",label:"Chờ duyệt"},{value:"RENTING",label:"Đang thuê phòng"}],Xm=()=>{const{id:e}=Sn(),t=se(),n=!!e,[r,s]=v.useState({studentId:"",fullName:"",email:"",password:"",confirmPassword:"",phoneNumber:"",gender:"MALE",birthDate:"",identityCardNumber:"",faculty:"",courseYear:"",className:"",personalEmail:"",ethnicity:"",religion:"",priorityObject:"",permanentProvince:"",permanentDistrict:"",permanentAddress:"",status:"PENDING_APPROVAL",startDate:new Date().toISOString().split("T")[0],contractEndDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString().split("T")[0],roomId:"",fatherName:"",fatherDobYear:"",fatherPhone:"",fatherAddress:"",motherName:"",motherDobYear:"",motherPhone:"",motherAddress:"",emergencyContactRelation:"",emergencyContactPhone:"",emergencyContactAddress:""}),[i,a]=v.useState([]),[l,c]=v.useState(n),[u,d]=v.useState(!1),[h,m]=v.useState({});v.useEffect(()=>{(async()=>{var y,p,j,N,C;c(!0);try{const E=await Ve.getAllRooms({status:"AVAILABLE",limit:1e3});if(a(E||[]),n){const S=await Et.getStudentByProfileId(e);s({studentId:S.studentId||"",fullName:S.fullName||"",email:((y=S.user)==null?void 0:y.email)||"",phoneNumber:S.phoneNumber||"",birthDate:S.birthDate?new Date(S.birthDate).toISOString().split("T")[0]:"",gender:S.gender||"MALE",identityCardNumber:S.identityCardNumber||"",faculty:S.faculty||"",courseYear:((p=S.courseYear)==null?void 0:p.toString())||"",className:S.className||"",personalEmail:S.personalEmail||"",ethnicity:S.ethnicity||"",religion:S.religion||"",priorityObject:S.priorityObject||"",permanentProvince:S.permanentProvince||"",permanentDistrict:S.permanentDistrict||"",permanentAddress:S.permanentAddress||"",status:S.status||"PENDING_APPROVAL",startDate:S.startDate?new Date(S.startDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],contractEndDate:S.contractEndDate?new Date(S.contractEndDate).toISOString().split("T")[0]:"",roomId:((j=S.roomId)==null?void 0:j.toString())||"",fatherName:S.fatherName||"",fatherDobYear:((N=S.fatherDobYear)==null?void 0:N.toString())||"",fatherPhone:S.fatherPhone||"",fatherAddress:S.fatherAddress||"",motherName:S.motherName||"",motherDobYear:((C=S.motherDobYear)==null?void 0:C.toString())||"",motherPhone:S.motherPhone||"",motherAddress:S.motherAddress||"",emergencyContactRelation:S.emergencyContactRelation||"",emergencyContactPhone:S.emergencyContactPhone||"",emergencyContactAddress:S.emergencyContactAddress||"",password:"",confirmPassword:""})}}catch(E){console.error("Lỗi tải dữ liệu form sinh viên:",E),P.error("Không thể tải dữ liệu cần thiết."),n&&t("/students")}finally{c(!1)}})()},[e,n,t]);const x=g=>{const{name:y,value:p}=g.target;s(j=>({...j,[y]:p})),h[y]&&m(j=>({...j,[y]:null}))},f=()=>{const g={};return r.studentId.trim()||(g.studentId="Mã sinh viên là bắt buộc"),r.fullName.trim()||(g.fullName="Họ tên là bắt buộc"),r.email.trim()||(g.email="Email là bắt buộc"),r.phoneNumber.trim()||(g.phoneNumber="Số điện thoại là bắt buộc"),r.birthDate||(g.birthDate="Ngày sinh là bắt buộc"),r.identityCardNumber.trim()||(g.identityCardNumber="CMND/CCCD là bắt buộc"),r.faculty.trim()||(g.faculty="Khoa/Viện là bắt buộc"),r.courseYear||(g.courseYear="Khóa học là bắt buộc"),r.startDate||(g.startDate="Ngày bắt đầu ở là bắt buộc"),r.contractEndDate||(g.contractEndDate="Ngày kết thúc hợp đồng là bắt buộc"),n||(r.password?r.password.length<6&&(g.password="Mật khẩu phải có ít nhất 6 ký tự"):g.password="Mật khẩu là bắt buộc",r.confirmPassword?r.password!==r.confirmPassword&&(g.confirmPassword="Mật khẩu xác nhận không khớp"):g.confirmPassword="Xác nhận mật khẩu là bắt buộc"),r.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)&&(g.email="Email không hợp lệ"),r.personalEmail&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.personalEmail)&&(g.personalEmail="Email cá nhân không hợp lệ"),m(g),Object.keys(g).length===0},w=async g=>{if(g.preventDefault(),!f()){P.error("Vui lòng điền đầy đủ thông tin bắt buộc");return}d(!0);const y={...r,roomId:r.roomId?parseInt(r.roomId,10):null,courseYear:r.courseYear?parseInt(r.courseYear,10):null,fatherDobYear:r.fatherDobYear?parseInt(r.fatherDobYear,10):null,motherDobYear:r.motherDobYear?parseInt(r.motherDobYear,10):null};delete y.confirmPassword;try{n?(await Et.updateStudent(e,y),P.success("Cập nhật hồ sơ sinh viên thành công!")):(await Et.createStudent(y),P.success("Thêm sinh viên mới thành công!")),t("/students")}catch(p){console.error("Lỗi lưu sinh viên:",p);const j=(p==null?void 0:p.message)||(n?"Cập nhật thất bại.":"Thêm mới thất bại.");if(p!=null&&p.errors&&Array.isArray(p.errors)){const N={};p.errors.forEach(C=>{C.field?N[C.field]=C.message:N.general=C.message}),m(N),N.general?P.error(N.general):P.error("Vui lòng kiểm tra lại thông tin đã nhập.")}else P.error(j)}finally{d(!1)}},b=[{value:"",label:"-- Chọn phòng --"},...Array.isArray(i)?i.map(g=>{var y;return{value:g.id.toString(),label:`Phòng ${g.number} (${(y=g.building)==null?void 0:y.name}) - ${g.capacity} chỗ`}}):[]];return l?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{})}):o.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto",children:[o.jsxs("div",{children:[o.jsx(U,{variant:"link",onClick:()=>t("/students"),icon:ut,className:"text-sm mb-4",children:"Quay lại danh sách sinh viên"}),o.jsx("h1",{className:"text-2xl font-semibold",children:n?"Chỉnh sửa Hồ sơ Sinh viên":"Thêm Tài khoản Sinh viên Mới"})]}),o.jsxs("form",{onSubmit:w,className:"bg-white shadow sm:rounded-lg p-6 space-y-8 divide-y divide-gray-200",children:[o.jsxs("div",{className:"pt-0",children:[o.jsx("h3",{className:"text-base font-semibold leading-7 text-gray-900",children:"1. Thông tin cơ bản"}),h.general&&o.jsx("p",{className:"text-sm text-red-600 mt-1",children:h.general}),o.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[o.jsx("div",{className:"sm:col-span-2",children:o.jsx(D,{label:"Mã Sinh viên *",id:"studentId",name:"studentId",required:!0,value:r.studentId,onChange:x,disabled:u||n,error:h.studentId})}),o.jsx("div",{className:"sm:col-span-4",children:o.jsx(D,{label:"Họ và tên *",id:"fullName",name:"fullName",required:!0,value:r.fullName,onChange:x,disabled:u,error:h.fullName})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Email liên hệ *",id:"email",name:"email",type:"email",required:!0,value:r.email,onChange:x,disabled:u||n,error:h.email,hint:n?"Email liên kết với tài khoản, không thể sửa.":""})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Số điện thoại *",id:"phoneNumber",name:"phoneNumber",type:"tel",required:!0,value:r.phoneNumber,onChange:x,disabled:u,error:h.phoneNumber})}),!n&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Mật khẩu *",id:"password",name:"password",type:"password",required:!0,value:r.password,onChange:x,disabled:u,error:h.password,hint:"Mật khẩu phải có ít nhất 6 ký tự"})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Xác nhận mật khẩu *",id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:r.confirmPassword,onChange:x,disabled:u,error:h.confirmPassword})})]}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Ngày sinh *",id:"birthDate",name:"birthDate",type:"date",required:!0,value:r.birthDate,onChange:x,disabled:u,error:h.birthDate})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(ce,{label:"Giới tính *",id:"gender",name:"gender",required:!0,value:r.gender,onChange:x,options:JE,disabled:u,error:h.gender})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Số CCCD/CMND *",id:"identityCardNumber",name:"identityCardNumber",required:!0,value:r.identityCardNumber,onChange:x,disabled:u,error:h.identityCardNumber})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(ce,{label:"Trạng thái *",id:"status",name:"status",required:!0,value:r.status,onChange:x,options:e_,disabled:u,error:h.status})})]})]}),o.jsxs("div",{className:"pt-8",children:[o.jsx("h3",{className:"text-base font-semibold leading-7 text-gray-900",children:"2. Thông tin học tập"}),o.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[o.jsx("div",{className:"sm:col-span-2",children:o.jsx(D,{label:"Khoa/Viện *",id:"faculty",name:"faculty",required:!0,value:r.faculty,onChange:x,disabled:u,error:h.faculty})}),o.jsx("div",{className:"sm:col-span-2",children:o.jsx(D,{label:"Khóa học *",id:"courseYear",name:"courseYear",type:"number",required:!0,value:r.courseYear,onChange:x,disabled:u,error:h.courseYear})}),o.jsx("div",{className:"sm:col-span-2",children:o.jsx(D,{label:"Lớp",id:"className",name:"className",value:r.className,onChange:x,disabled:u,error:h.className})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Email cá nhân",id:"personalEmail",name:"personalEmail",type:"email",value:r.personalEmail,onChange:x,disabled:u,error:h.personalEmail})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Dân tộc",id:"ethnicity",name:"ethnicity",value:r.ethnicity,onChange:x,disabled:u,error:h.ethnicity})})]})]}),o.jsxs("div",{className:"pt-8",children:[o.jsx("h3",{className:"text-base font-semibold leading-7 text-gray-900",children:"3. Thông tin Ký túc xá"}),o.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[o.jsx("div",{className:"sm:col-span-3",children:o.jsx(ce,{label:"Phòng ở",id:"roomId",name:"roomId",value:r.roomId,onChange:x,options:b,disabled:u,error:h.roomId})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Ngày bắt đầu ở *",id:"startDate",name:"startDate",type:"date",required:!0,value:r.startDate,onChange:x,disabled:u,error:h.startDate})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Ngày kết thúc hợp đồng *",id:"contractEndDate",name:"contractEndDate",type:"date",required:!0,value:r.contractEndDate,onChange:x,disabled:u,error:h.contractEndDate})})]})]}),o.jsxs("div",{className:"pt-8",children:[o.jsx("h3",{className:"text-base font-semibold leading-7 text-gray-900",children:"4. Địa chỉ thường trú"}),o.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Tỉnh/Thành phố",id:"permanentProvince",name:"permanentProvince",value:r.permanentProvince,onChange:x,disabled:u,error:h.permanentProvince})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Quận/Huyện",id:"permanentDistrict",name:"permanentDistrict",value:r.permanentDistrict,onChange:x,disabled:u,error:h.permanentDistrict})}),o.jsx("div",{className:"sm:col-span-6",children:o.jsx(tn,{label:"Địa chỉ chi tiết",id:"permanentAddress",name:"permanentAddress",rows:2,value:r.permanentAddress,onChange:x,disabled:u,error:h.permanentAddress})})]})]}),o.jsxs("div",{className:"pt-8",children:[o.jsx("h3",{className:"text-base font-semibold leading-7 text-gray-900",children:"5. Thông tin gia đình - Cha"}),o.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Họ tên",id:"fatherName",name:"fatherName",value:r.fatherName,onChange:x,disabled:u,error:h.fatherName})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Năm sinh",id:"fatherDobYear",name:"fatherDobYear",type:"number",value:r.fatherDobYear,onChange:x,disabled:u,error:h.fatherDobYear})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Số điện thoại",id:"fatherPhone",name:"fatherPhone",value:r.fatherPhone,onChange:x,disabled:u,error:h.fatherPhone})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Địa chỉ",id:"fatherAddress",name:"fatherAddress",value:r.fatherAddress,onChange:x,disabled:u,error:h.fatherAddress})})]})]}),o.jsxs("div",{className:"pt-8",children:[o.jsx("h3",{className:"text-base font-semibold leading-7 text-gray-900",children:"6. Thông tin gia đình - Mẹ"}),o.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Họ tên",id:"motherName",name:"motherName",value:r.motherName,onChange:x,disabled:u,error:h.motherName})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Năm sinh",id:"motherDobYear",name:"motherDobYear",type:"number",value:r.motherDobYear,onChange:x,disabled:u,error:h.motherDobYear})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Số điện thoại",id:"motherPhone",name:"motherPhone",value:r.motherPhone,onChange:x,disabled:u,error:h.motherPhone})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Địa chỉ",id:"motherAddress",name:"motherAddress",value:r.motherAddress,onChange:x,disabled:u,error:h.motherAddress})})]})]}),o.jsxs("div",{className:"pt-8",children:[o.jsx("h3",{className:"text-base font-semibold leading-7 text-gray-900",children:"7. Thông tin liên hệ khẩn cấp"}),o.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[o.jsx("div",{className:"sm:col-span-2",children:o.jsx(D,{label:"Quan hệ",id:"emergencyContactRelation",name:"emergencyContactRelation",value:r.emergencyContactRelation,onChange:x,disabled:u,error:h.emergencyContactRelation})}),o.jsx("div",{className:"sm:col-span-2",children:o.jsx(D,{label:"Số điện thoại",id:"emergencyContactPhone",name:"emergencyContactPhone",value:r.emergencyContactPhone,onChange:x,disabled:u,error:h.emergencyContactPhone})}),o.jsx("div",{className:"sm:col-span-2",children:o.jsx(D,{label:"Địa chỉ",id:"emergencyContactAddress",name:"emergencyContactAddress",value:r.emergencyContactAddress,onChange:x,disabled:u,error:h.emergencyContactAddress})})]})]}),o.jsxs("div",{className:"flex items-center justify-end gap-x-3 pt-8 border-t border-gray-200",children:[o.jsx(U,{type:"button",variant:"secondary",onClick:()=>t("/students"),disabled:u,children:"Hủy"}),o.jsx(U,{type:"submit",isLoading:u,disabled:u,children:n?"Lưu thay đổi":"Thêm Sinh viên"})]})]})]})},Fs=e=>{if(!e)return"-";try{return Ce(De(e),"dd/MM/yyyy",{locale:dt})}catch{return e}},Qm=e=>{if(!e)return"-";try{return Ce(De(e),"dd/MM/yyyy HH:mm",{locale:dt})}catch{return e}},t_=e=>!e&&e!==0?"-":parseInt(e).toLocaleString("vi-VN")+" VNĐ",$r=e=>{switch(e){case"ACTIVE":return{color:"green",text:"Đang hoạt động"};case"INACTIVE":return{color:"gray",text:"Không hoạt động"};case"RENTING":return{color:"green",text:"Đang ở"};case"PENDING_APPROVAL":return{color:"yellow",text:"Chờ duyệt"};case"CHECKED_OUT":return{color:"gray",text:"Đã rời đi"};case"EVICTED":return{color:"red",text:"Buộc thôi ở"};case"GRADUATED":return{color:"blue",text:"Đã tốt nghiệp"};case"SUSPENDED":return{color:"red",text:"Đình chỉ"};default:return{color:"gray",text:e||"N/A"}}},n_=({overrideStudent:e=null,hideNavigation:t=!1})=>{var E,S;const{id:n}=Sn(),r=se(),[s,i]=v.useState(null),[a,l]=v.useState(!e),[c,u]=v.useState(null),[d,h]=v.useState("basic"),[m,x]=v.useState(!1);v.useEffect(()=>{if(e){i(e),l(!1);return}if(!n){u("ID không hợp lệ hoặc không được cung cấp."),l(!1);return}(async()=>{l(!0);try{let _;try{_=await Et.getStudentById(n),i(_),x(!1)}catch(T){console.log("Không tìm thấy sinh viên với Profile ID, thử tìm với User ID",T);try{_=await Et.getStudentByUserId(n),i(_),x(!0)}catch{throw new Error(`Không tìm thấy sinh viên với ID ${n}`)}}}catch(_){console.error("Error fetching student profile:",_),u((_==null?void 0:_.message)||"Không thể tải thông tin sinh viên."),P.error("Không thể tải thông tin sinh viên.")}finally{l(!1)}})()},[n,e]);const f=(k,_,T=!1,O="text-gray-900")=>o.jsxs("div",{className:`px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 ${T?"bg-gray-50":"bg-white"}`,children:[o.jsx("dt",{className:"text-sm font-medium text-gray-600",children:k}),o.jsx("dd",{className:`mt-1 text-sm sm:mt-0 sm:col-span-2 ${O}`,children:_!=null&&_!==""?_:o.jsx("span",{className:"text-gray-400",children:"-"})})]}),w=k=>{var T,O;const _="http://localhost:5002/uploads";if((O=(T=k==null?void 0:k.user)==null?void 0:T.avatar)!=null&&O.path){const $=k.user.avatar.path;return $.startsWith("http")?$:`${_}${$.startsWith("/")?"":"/"}${$}`}return"/src/assets/default-avatar.png"},b=k=>{var _;return o.jsxs("dl",{className:"divide-y divide-gray-100",children:[o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Thông tin cơ bản"})}),f("Họ và tên",k.fullName,!1),f("Mã sinh viên",k.studentId,!0,"font-semibold font-mono"),f("Email",(_=k.user)==null?void 0:_.email,!1,"text-gray-700"),f("Số điện thoại",k.phoneNumber,!0),f("Giới tính",k.gender==="MALE"?"Nam":k.gender==="FEMALE"?"Nữ":k.gender,!1),f("Ngày sinh",Fs(k.birthDate),!0),f("Số CCCD/CMND",k.identityCardNumber,!1),o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Địa chỉ thường trú"})}),f("Tỉnh/Thành phố",k.permanentProvince,!1),f("Quận/Huyện",k.permanentDistrict,!0),f("Địa chỉ chi tiết",k.permanentAddress,!1),o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Thông tin hệ thống"})}),f("Trạng thái",o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-${$r(k.status).color}-100 text-${$r(k.status).color}-800`,children:$r(k.status).text}),!1),f("Mã hồ sơ sinh viên",k.id,!0,"font-mono"),f("Mã người dùng",k.userId,!1,"font-mono"),f("Ngày tạo hồ sơ",Qm(k.createdAt),!0),f("Cập nhật lần cuối",Qm(k.updatedAt),!1)]})},g=k=>o.jsxs("dl",{className:"divide-y divide-gray-100",children:[o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Thông tin học tập"})}),f("Khoa/Viện",k.faculty,!1),f("Khóa",k.courseYear,!0),f("Lớp",k.className,!1),f("Email cá nhân",k.personalEmail,!0),f("Dân tộc",k.ethnicity,!1),f("Tôn giáo",k.religion,!0),f("Đối tượng ưu tiên",k.priorityObject,!1)]}),y=k=>{const _=k.room,T=_==null?void 0:_.building;return o.jsxs("dl",{className:"divide-y divide-gray-100",children:[o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Thông tin ký túc xá"})}),f("Tòa nhà",T==null?void 0:T.name,!1),f("Phòng số",_==null?void 0:_.number,!0),f("Tầng",_==null?void 0:_.floor,!1),f("Loại phòng",_==null?void 0:_.type,!0),f("Số lượng người ở",`${(_==null?void 0:_.actualOccupancy)||0}/${(_==null?void 0:_.capacity)||0}`,!1),f("Giá phòng",t_(_==null?void 0:_.price),!0),o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Thời gian lưu trú"})}),f("Ngày bắt đầu ở",Fs(k.startDate),!1),f("Ngày check-in",Fs(k.checkInDate),!0),f("Ngày check-out",Fs(k.checkOutDate),!1),f("Ngày hết hạn hợp đồng",Fs(k.contractEndDate),!0),(_==null?void 0:_.amenities)&&_.amenities.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Tiện nghi phòng"})}),o.jsx("div",{className:"px-4 py-3 sm:px-6",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:_.amenities.map(O=>o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[O.amenity.name," ",O.quantity>1&&`(${O.quantity})`]},O.amenityId))})})]})]})},p=k=>o.jsxs("dl",{className:"divide-y divide-gray-100",children:[o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Thông tin gia đình - Cha"})}),f("Họ tên",k.fatherName,!1),f("Năm sinh",k.fatherDobYear,!0),f("Số điện thoại",k.fatherPhone,!1),f("Địa chỉ",k.fatherAddress,!0),o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Thông tin gia đình - Mẹ"})}),f("Họ tên",k.motherName,!1),f("Năm sinh",k.motherDobYear,!0),f("Số điện thoại",k.motherPhone,!1),f("Địa chỉ",k.motherAddress,!0),o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Liên hệ khẩn cấp"})}),f("Mối quan hệ",k.emergencyContactRelation,!1),f("Số điện thoại",k.emergencyContactPhone,!0),f("Địa chỉ",k.emergencyContactAddress,!1)]});if(a)return o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{size:"lg"})});if(c||!s)return o.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",children:[o.jsx("h2",{className:"font-bold mb-2",children:"Lỗi"}),o.jsx("p",{children:c||"Không thể tải thông tin sinh viên."}),o.jsx("div",{className:"mt-4",children:o.jsx(U,{variant:"primary",onClick:()=>r("/students"),children:"Quay lại danh sách sinh viên"})})]});const j=s,N=w(j),C=`/students/${j.id}/edit`;return o.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto",children:[!t&&o.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[o.jsxs("div",{children:[o.jsx(U,{variant:"link",onClick:()=>r("/students"),icon:ut,className:"text-sm mb-2",children:"Quay lại danh sách sinh viên"}),o.jsx("h1",{className:"text-2xl font-semibold",children:"Hồ sơ sinh viên"})]}),o.jsx("div",{className:"flex gap-2",children:o.jsx(U,{onClick:()=>r(C),icon:Pt,children:"Chỉnh sửa"})})]}),o.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[o.jsx("div",{className:"px-4 py-5 sm:px-6 flex flex-wrap justify-between items-center gap-4 border-b border-gray-200 bg-gray-50",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("img",{src:N,alt:`Avatar của ${j.fullName}`,className:"h-20 w-20 rounded-full object-cover ring-2 ring-offset-2 ring-indigo-500",onError:k=>{k.target.onerror=null,k.target.src="/src/assets/default-avatar.png"}}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:j.fullName}),o.jsxs("p",{className:"text-sm text-gray-500 flex items-center mt-1",children:[o.jsx("span",{className:"font-mono mr-2",children:j.studentId})," |",o.jsx(Yj,{className:"h-4 w-4 mx-1 inline"}),o.jsx("span",{children:j.phoneNumber||"-"})]}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:(E=j.user)==null?void 0:E.email}),o.jsxs("div",{className:"mt-2",children:[o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-${$r(j.status).color}-100 text-${$r(j.status).color}-800`,children:$r(j.status).text}),j.room&&o.jsxs("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[(S=j.room.building)==null?void 0:S.name," - Phòng ",j.room.number]})]})]})]})}),o.jsxs(Dd,{activeTab:d,onChange:h,children:[o.jsx(Zt,{id:"basic",label:"Thông tin cơ bản",icon:ax,children:b(j)}),o.jsx(Zt,{id:"academic",label:"Học tập",icon:hj,children:g(j)}),o.jsx(Zt,{id:"dormitory",label:"Ký túc xá",icon:Id,children:y(j)}),o.jsx(Zt,{id:"family",label:"Gia đình",icon:zj,children:p(j)})]})]})]})},r_=async(e={})=>{var t,n,r,s,i;try{const a=await W.get("/api/buildings",{params:e});if((t=a.data)!=null&&t.success)return a.data.data;throw new Error(((n=a.data)==null?void 0:n.message)||"Lấy danh sách tòa nhà thất bại.")}catch(a){throw console.error("Lỗi service getAllBuildings:",((s=(r=a.response)==null?void 0:r.data)==null?void 0:s.message)||a.message),((i=a.response)==null?void 0:i.data)||a}},s_=async e=>{var t,n,r,s,i,a;try{const l=await W.get(`/api/buildings/${e}`);if((t=l.data)!=null&&t.success&&((n=l.data)!=null&&n.data))return l.data.data;throw new Error(((r=l.data)==null?void 0:r.message)||`Không tìm thấy tòa nhà với ID ${e}.`)}catch(l){throw console.error(`Lỗi service getBuildingById (${e}):`,((i=(s=l.response)==null?void 0:s.data)==null?void 0:i.message)||l.message),((a=l.response)==null?void 0:a.data)||l}},i_=async e=>{var t,n,r,s,i,a,l,c;try{const u=await W.post("/api/buildings",e);if((t=u.data)!=null&&t.success&&((n=u.data)!=null&&n.data))return u.data.data;throw new Error(((r=u.data)==null?void 0:r.message)||"Tạo tòa nhà mới thất bại.")}catch(u){throw console.error("Lỗi service createBuilding:",((i=(s=u.response)==null?void 0:s.data)==null?void 0:i.message)||u.message),(l=(a=u.response)==null?void 0:a.data)!=null&&l.errors?u.response.data:((c=u.response)==null?void 0:c.data)||u}},a_=async(e,t)=>{var n,r,s,i,a,l,c,u;try{const d=await W.put(`/api/buildings/${e}`,t);if((n=d.data)!=null&&n.success&&((r=d.data)!=null&&r.data))return d.data.data;throw new Error(((s=d.data)==null?void 0:s.message)||"Cập nhật tòa nhà thất bại.")}catch(d){throw console.error(`Lỗi service updateBuilding (${e}):`,((a=(i=d.response)==null?void 0:i.data)==null?void 0:a.message)||d.message),(c=(l=d.response)==null?void 0:l.data)!=null&&c.errors?d.response.data:((u=d.response)==null?void 0:u.data)||d}},o_=async e=>{var t,n,r,s,i;try{const a=await W.delete(`/api/buildings/${e}`);if((t=a.data)!=null&&t.success)return a.data;throw new Error(((n=a.data)==null?void 0:n.message)||"Xóa tòa nhà thất bại.")}catch(a){throw console.error(`Lỗi service deleteBuilding (${e}):`,((s=(r=a.response)==null?void 0:r.data)==null?void 0:s.message)||a.message),((i=a.response)==null?void 0:i.data)||a}},nn={getAllBuildings:r_,getBuildingById:s_,createBuilding:i_,updateBuilding:a_,deleteBuilding:o_},l_=()=>{const[e,t]=v.useState([]),[n,r]=v.useState([]),[s,i]=v.useState(!0),[a,l]=v.useState(null),[c,u]=v.useState(""),d=se(),h=v.useCallback(async()=>{i(!0),l(null);try{const w=(await nn.getAllBuildings({})).buildings||[];t(w),r(w)}catch{l("Không thể tải danh sách tòa nhà.")}finally{i(!1)}},[]);v.useEffect(()=>{h()},[h]),v.useEffect(()=>{if(c.trim()===""){r(e);return}const f=c.toLowerCase(),w=e.filter(b=>{var g,y,p;return((g=b.name)==null?void 0:g.toLowerCase().includes(f))||((y=b.address)==null?void 0:y.toLowerCase().includes(f))||((p=b.description)==null?void 0:p.toLowerCase().includes(f))});r(w)},[c,e]);const m=async(f,w)=>{if(window.confirm(`Bạn có chắc chắn muốn xóa tòa nhà "${w}" không? Hành động này có thể ảnh hưởng đến các phòng và sinh viên liên quan.`))try{await nn.deleteBuilding(f),P.success(`Đã xóa tòa nhà "${w}" thành công!`),h()}catch(b){P.error((b==null?void 0:b.message)||`Xóa tòa nhà "${w}" thất bại.`)}},x=Fi.useMemo(()=>[{Header:"Tên Tòa nhà",accessor:"name"},{Header:"Địa chỉ",accessor:"address"},{Header:"Tổng số phòng",accessor:"totalRooms",Cell:({value:f})=>o.jsx("span",{className:"text-center block",children:f??0})},{Header:"Mô tả",accessor:"description",Cell:({value:f})=>o.jsx("p",{className:"text-sm text-gray-600 truncate max-w-xs",children:f||"-"})},{Header:"Hành động",accessor:"actions",Cell:({row:f})=>o.jsxs("div",{className:"flex space-x-2 justify-center",children:[o.jsx(U,{variant:"icon",onClick:()=>d(`/buildings/${f.original.id}/edit`),tooltip:"Chỉnh sửa",children:o.jsx(Pt,{className:"h-5 w-5 text-yellow-600 hover:text-yellow-800"})}),o.jsx(U,{variant:"icon",onClick:()=>m(f.original.id,f.original.name),tooltip:"Xóa",children:o.jsx(Mt,{className:"h-5 w-5 text-red-600 hover:text-red-800"})})]})}],[d]);return s?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{})}):a?o.jsxs("div",{className:"text-red-600 bg-red-100 p-4 rounded",children:["Lỗi: ",a]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-2xl font-semibold",children:"Quản lý Tòa nhà"}),o.jsx(U,{onClick:()=>d("/buildings/new"),icon:qi,children:"Thêm Tòa nhà mới"})]}),o.jsx("div",{className:"flex flex-col space-y-4",children:o.jsx("div",{className:"flex justify-between items-center",children:o.jsxs("div",{className:"relative w-full max-w-md",children:[o.jsx(D,{placeholder:"Tìm kiếm tòa nhà...",value:c,onChange:f=>u(f.target.value)}),c&&o.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Hiển thị ",n.length," kết quả ",n.length!==e.length&&`(trong tổng số ${e.length})`]})]})})}),o.jsx(Rd,{columns:x,data:n})]})},Gm=()=>{const{id:e}=Sn(),t=se(),n=!!e,[r,s]=v.useState({name:"",address:"",description:"",totalRooms:0}),[i,a]=v.useState(n),[l,c]=v.useState(!1),[u,d]=v.useState({}),[h,m]=v.useState([]),[x,f]=v.useState([]),w=v.useRef(null);v.useEffect(()=>{n&&(a(!0),nn.getBuildingById(e).then(y=>{s({name:y.name||"",address:y.address||"",description:y.description||"",totalRooms:y.totalRooms??0}),y.images&&y.images.length>0&&(m(y.images),f(y.images.map(p=>p.id)))}).catch(y=>{P.error(`Không thể tải thông tin tòa nhà (ID: ${e}).`),console.error(y),t("/buildings")}).finally(()=>a(!1)))},[e,n,t]);const b=y=>{const{name:p,value:j,type:N}=y.target;p==="description"?(s(C=>({...C,description:j})),console.log("Description updated to:",j)):s(C=>({...C,[p]:N==="number"?parseInt(j,10)||0:j})),u[p]&&d(C=>({...C,[p]:null}))},g=async y=>{if(y.preventDefault(),c(!0),d({}),!r.name.trim()){d({name:"Tên tòa nhà là bắt buộc."}),c(!1);return}if(!r.address.trim()){d({address:"Địa chỉ là bắt buộc."}),c(!1);return}try{w.current&&typeof w.current.uploadSelectedFiles=="function"&&await w.current.uploadSelectedFiles("building-image");const{totalRooms:p,...j}=r;x.length>0&&(j.imageIds=x),n?(await nn.updateBuilding(e,j),P.success("Cập nhật tòa nhà thành công!")):(await nn.createBuilding(j),P.success("Thêm tòa nhà mới thành công!")),t("/buildings")}catch(p){console.error("Lỗi lưu tòa nhà:",p);const j=(p==null?void 0:p.message)||(n?"Cập nhật thất bại.":"Thêm mới thất bại.");if(p!=null&&p.errors&&Array.isArray(p.errors)){const N={};p.errors.forEach(C=>{C.field&&(N[C.field]=C.message)}),d(N),P.error("Vui lòng kiểm tra lại thông tin đã nhập.",{id:"validation-error"})}else P.error(j)}finally{c(!1)}};return i?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{})}):o.jsxs("div",{className:"space-y-6 max-w-3xl mx-auto",children:[o.jsxs("div",{children:[o.jsx(U,{variant:"link",onClick:()=>t("/buildings"),icon:ut,className:"text-sm mb-4",children:"Quay lại danh sách"}),o.jsx("h1",{className:"text-2xl font-semibold",children:n?"Chỉnh sửa Tòa nhà":"Thêm Tòa nhà mới"})]}),o.jsxs("form",{onSubmit:g,className:"bg-white shadow sm:rounded-lg p-6 space-y-6",children:[o.jsx(D,{label:"Tên Tòa nhà *",id:"name",name:"name",value:r.name,onChange:b,required:!0,disabled:l,error:u.name}),o.jsx(D,{label:"Địa chỉ *",id:"address",name:"address",value:r.address,onChange:b,required:!0,disabled:l,error:u.address}),o.jsx(D,{label:"Tổng số phòng",id:"totalRooms",name:"totalRooms",type:"number",value:r.totalRooms,disabled:!0,readOnly:!0,helpText:"Số phòng được tính tự động dựa trên số lượng phòng trong cơ sở dữ liệu."}),o.jsx(tn,{label:"Mô tả",id:"description",name:"description",rows:4,value:r.description,onChange:b,disabled:l,error:u.description}),o.jsx(mN,{ref:w,label:"Ảnh tòa nhà",multiple:!0,maxFiles:10,maxSizeMB:5,initialImageUrls:h.map(y=>y.path),disabled:l,onUploadComplete:y=>{f(y.map(p=>p.id).filter(Boolean))}}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[o.jsx(U,{variant:"secondary",onClick:()=>t("/buildings"),disabled:l,children:"Hủy"}),o.jsx(U,{type:"submit",isLoading:l,disabled:l,children:n?"Lưu thay đổi":"Thêm Tòa nhà"})]})]})]})},Zm=[{value:"",label:"Tất cả trạng thái",color:"gray"},{value:"AVAILABLE",label:"Còn chỗ",color:"green"},{value:"FULL",label:"Đủ người",color:"indigo"},{value:"UNDER_MAINTENANCE",label:"Đang sửa chữa",color:"yellow"}],c_=[{value:"",label:"Tất cả loại phòng"},{value:"MALE",label:"Phòng Nam"},{value:"FEMALE",label:"Phòng Nữ"},{value:"MANAGEMENT",label:"Phòng quản lý"}],u_=e=>{switch(e){case"AVAILABLE":return"green";case"FULL":return"indigo";case"UNDER_MAINTENANCE":return"yellow";default:return"gray"}},d_=()=>{var E;const{user:e}=bt(),[t,n]=v.useState([]),[r,s]=v.useState([]),[i,a]=v.useState(!0),[l,c]=v.useState(null),[u,d]=v.useState({currentPage:1,totalPages:1,limit:10,total:0}),[h,m]=v.useState(1),[x,f]=v.useState({buildingId:"",status:"",type:"",search:""}),w=se(),b=v.useCallback(async()=>{var S,k,_,T,O;a(!0),c(null);try{const $={page:h,limit:u.limit};Object.keys(x).forEach(R=>{x[R]&&($[R]=x[R])});const Y=await Ve.getAllRooms($),A=Array.isArray(Y.rooms)?Y.rooms:[];A.length>0&&console.log("First room building data:",(S=A[0])==null?void 0:S.building),n(A),d({currentPage:((k=Y.meta)==null?void 0:k.currentPage)||1,totalPages:((_=Y.meta)==null?void 0:_.totalPages)||1,limit:((T=Y.meta)==null?void 0:T.limit)||10,total:((O=Y.meta)==null?void 0:O.total)||A.length})}catch{c("Không thể tải danh sách phòng.")}finally{a(!1)}},[x,h,u.limit]),g=v.useCallback(async()=>{try{const k=(await nn.getAllBuildings({limit:1e3})).buildings||[];console.log("Fetched buildings:",k),s(k)}catch(S){console.error("Lỗi tải danh sách tòa nhà cho bộ lọc:",S)}},[]);v.useEffect(()=>{b()},[b]),v.useEffect(()=>{g()},[g]);const y=S=>{const{name:k,value:_}=S.target;f(T=>({...T,[k]:_}))},p=async(S,k,_)=>{if(window.confirm(`Bạn có chắc chắn muốn xóa phòng ${k} (Tòa nhà ${_}) không?`))try{await Ve.deleteRoom(S),P.success(`Đã xóa phòng ${k} thành công!`),b()}catch(T){P.error((T==null?void 0:T.message)||`Xóa phòng ${k} thất bại.`)}},j=e&&(e.role==="ADMIN"||e.role==="STAFF"),N=v.useMemo(()=>[{Header:"Số phòng",accessor:"number",Cell:({value:S})=>o.jsx("span",{className:"font-semibold",children:S})},{Header:"Tòa nhà",accessor:"building.name"},{Header:"Tầng",accessor:"floor"},{Header:"Loại phòng",accessor:"type",Cell:({value:S})=>{switch(S){case"MALE":return"Phòng Nam";case"FEMALE":return"Phòng Nữ";case"MANAGEMENT":return"Phòng quản lý";default:return S}}},{Header:"Sức chứa",accessor:"capacity",Cell:({row:S})=>`${S.original.actualOccupancy||0} / ${S.original.capacity}`},{Header:"Giá phòng (VND)",accessor:"roomFee",Cell:({value:S})=>S?parseFloat(S).toLocaleString("vi-VN"):"-"},{Header:"Trạng thái",accessor:"status",Cell:({value:S})=>o.jsxs($t,{color:u_(S),children:[S," "]})},{Header:"Hành động",accessor:"actions",Cell:({row:S})=>o.jsx("div",{className:"flex space-x-1 justify-center",children:j&&o.jsxs(o.Fragment,{children:[o.jsx(U,{variant:"icon",onClick:()=>w(`/rooms/${S.original.id}/edit`),tooltip:"Chỉnh sửa",children:o.jsx(Pt,{className:"h-5 w-5 text-yellow-600 hover:text-yellow-800"})}),o.jsx(U,{variant:"icon",onClick:()=>{var k;return p(S.original.id,S.original.number,(k=S.original.building)==null?void 0:k.name)},tooltip:"Xóa",children:o.jsx(Mt,{className:"h-5 w-5 text-red-600 hover:text-red-800"})})]})})}],[w,j]),C=[{value:"",label:"Tất cả tòa nhà"},...r.map(S=>({value:S.id.toString(),label:S.name}))];return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[o.jsx("h1",{className:"text-2xl font-semibold",children:"Quản lý Phòng ở"}),j&&o.jsx(U,{onClick:()=>w("/rooms/new"),icon:qi,children:"Thêm phòng mới"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-md shadow-sm",children:[o.jsx(D,{label:"Tìm số phòng",id:"search",name:"search",placeholder:"Nhập số phòng...",value:x.search,onChange:y}),o.jsx(ce,{label:"Tòa nhà",id:"buildingId",name:"buildingId",value:x.buildingId,onChange:y,options:C,className:"w-full"}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{htmlFor:"status",className:"text-sm font-medium text-gray-700",children:"Trạng thái"}),o.jsxs("div",{className:"relative",children:[o.jsx("select",{id:"status",name:"status",value:x.status,onChange:y,className:`w-full rounded-md border border-gray-300 px-3 py-2 text-sm shadow-sm
                focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500
                bg-white appearance-none`,children:Zm.map(S=>o.jsx("option",{value:S.value,children:S.label},S.value))}),o.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:o.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})}),x.status&&o.jsx("span",{className:"absolute left-3 top-2 flex h-2 w-2",children:o.jsx("span",{className:`animate-none opacity-100 rounded-full h-2 w-2 bg-${((E=Zm.find(S=>S.value===x.status))==null?void 0:E.color)||"gray"}-500`})})]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{htmlFor:"type",className:"text-sm font-medium text-gray-700",children:"Loại phòng"}),o.jsxs("div",{className:"relative",children:[o.jsx("select",{id:"type",name:"type",value:x.type,onChange:y,className:`w-full rounded-md border border-gray-300 px-3 py-2 text-sm shadow-sm
                focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500
                bg-white appearance-none`,children:c_.map(S=>o.jsx("option",{value:S.value,children:S.label},S.value))}),o.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:o.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]})]}),i?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{})}):l?o.jsxs("div",{className:"text-red-600 bg-red-100 p-4 rounded",children:["Lỗi: ",l]}):o.jsx(Bt,{columns:N,data:t,currentPage:u.currentPage,totalPages:u.totalPages,onPageChange:S=>m(S),totalRecords:u.total,recordsPerPage:u.limit})]})},h_=async(e={})=>{var t,n,r,s;try{const i=await W.get("/api/amenities",{params:e});if((t=i.data)!=null&&t.success)return i.data.data;throw new Error(((n=i.data)==null?void 0:n.message)||"Lấy danh sách tiện nghi thất bại.")}catch(i){throw console.error("Lỗi service getAllAmenities:",((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},f_=async e=>{var t,n,r,s,i;try{const a=await W.get(`/api/amenities/${e}`);if((t=a.data)!=null&&t.success&&((n=a.data)!=null&&n.data))return a.data.data;throw new Error(((r=a.data)==null?void 0:r.message)||`Không tìm thấy tiện nghi với ID ${e}.`)}catch(a){throw console.error(`Lỗi service getAmenityById (${e}):`,((s=a.response)==null?void 0:s.data)||a.message),((i=a.response)==null?void 0:i.data)||a}},m_=async e=>{var t,n,r,s,i,a,l;try{const c=await W.post("/api/amenities",e);if((t=c.data)!=null&&t.success&&((n=c.data)!=null&&n.data))return c.data.data;throw new Error(((r=c.data)==null?void 0:r.message)||"Tạo tiện nghi mới thất bại.")}catch(c){throw console.error("Lỗi service createAmenity:",((s=c.response)==null?void 0:s.data)||c.message),(a=(i=c.response)==null?void 0:i.data)!=null&&a.errors?c.response.data:((l=c.response)==null?void 0:l.data)||c}},g_=async(e,t)=>{var n,r,s,i,a,l,c;try{const u=await W.put(`/api/amenities/${e}`,t);if((n=u.data)!=null&&n.success&&((r=u.data)!=null&&r.data))return u.data.data;throw new Error(((s=u.data)==null?void 0:s.message)||"Cập nhật tiện nghi thất bại.")}catch(u){throw console.error(`Lỗi service updateAmenity (${e}):`,((i=u.response)==null?void 0:i.data)||u.message),(l=(a=u.response)==null?void 0:a.data)!=null&&l.errors?u.response.data:((c=u.response)==null?void 0:c.data)||u}},p_=async e=>{var t,n,r,s;try{const i=await W.delete(`/api/amenities/${e}`);if((t=i.data)!=null&&t.success)return i.data;throw new Error(((n=i.data)==null?void 0:n.message)||"Xóa tiện nghi thất bại.")}catch(i){throw console.error(`Lỗi service deleteAmenity (${e}):`,((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},is={getAllAmenities:h_,getAmenityById:f_,createAmenity:m_,updateAmenity:g_,deleteAmenity:p_},x_=[{value:"AVAILABLE",label:"Còn chỗ"},{value:"FULL",label:"Đủ người"},{value:"UNDER_MAINTENANCE",label:"Đang sửa chữa"}],y_=[{value:"MALE",label:"Phòng Nam"},{value:"FEMALE",label:"Phòng Nữ"},{value:"MANAGEMENT",label:"Phòng quản lý"}],Jm=()=>{const{id:e}=Sn(),t=se(),n=!!e,[r,s]=v.useState({buildingId:"",number:"",type:"MALE",capacity:2,floor:1,status:"AVAILABLE",roomFee:0,description:"",amenities:[],images:[]}),[i,a]=v.useState([]),[l,c]=v.useState([]),[u,d]=v.useState({}),[h,m]=v.useState([]),[x,f]=v.useState([]),[w,b]=v.useState([]),[g,y]=v.useState(!0),[p,j]=v.useState(!1),[N,C]=v.useState({});v.useEffect(()=>{(async()=>{var R;y(!0);try{const[H,L,B]=await Promise.allSettled([nn.getAllBuildings({limit:1e3}),is.getAllAmenities({limit:1e3}),n?Ve.getRoomById(e):Promise.resolve(null)]);if(H.status==="fulfilled"?(a(H.value.buildings||[]),console.log("Loaded buildings:",H.value.buildings)):(console.error("Lỗi tải tòa nhà:",H.reason),P.error("Không thể tải danh sách tòa nhà.")),L.status==="fulfilled"?c(L.value.amenities||[]):(console.error("Lỗi tải tiện nghi:",L.reason),P.error("Không thể tải danh sách tiện nghi.")),n)if(B.status==="fulfilled"&&B.value){const z=B.value;console.log("Room data loaded:",z),s({buildingId:((R=z.buildingId)==null?void 0:R.toString())||"",number:z.number||"",type:z.type||"MALE",capacity:z.capacity??2,floor:z.floor??1,status:z.status||"AVAILABLE",roomFee:parseFloat(z.roomFee)||0,description:z.description||"",images:z.images||[],amenities:z.amenities||[]});const G={};(z.amenities||[]).forEach(X=>{G[X.amenityId]={quantity:X.quantity||1,notes:X.notes||""}}),d(G),f((z.images||[]).map(X=>X.id)),b((z.images||[]).map(X=>X.path))}else console.error("Lỗi tải phòng:",B.reason),P.error(`Không thể tải thông tin phòng (ID: ${e}).`),t("/rooms")}catch(H){console.error("Lỗi fetch data form phòng:",H),P.error("Đã xảy ra lỗi khi tải dữ liệu."),n&&t("/rooms")}finally{y(!1)}})()},[e,n,t]);const E=A=>{const{name:R,value:H,type:L}=A.target;s(B=>({...B,[R]:L==="number"?parseFloat(H)||0:H})),N[R]&&C(B=>({...B,[R]:null}))},S=A=>{const R={...u};Object.keys(R).forEach(H=>{A.includes(parseInt(H))||delete R[H]}),A.forEach(H=>{R[H]||(R[H]={quantity:1,notes:""})}),d(R)},k=(A,R,H)=>{d(L=>({...L,[A]:{...L[A],[R]:R==="quantity"?parseInt(H,10)||1:H}}))},_=A=>{const R=Array.from(A.target.files);if(!R.length)return;const H=[...h],L=[...w];let B=!1;R.forEach(z=>{if(z.size>5*1024*1024){P.error(`Ảnh "${z.name}" vượt quá 5MB.`),B=!0;return}H.some(G=>G.name===z.name&&G.size===z.size)||(H.push(z),L.push(URL.createObjectURL(z)))}),B||(m(H),b(L)),A.target.value=null},T=A=>{const R=w.filter((L,B)=>B!==A);b(R);const H=x.length;if(A<H){const L=x[A];f(B=>B.filter(z=>z!==L))}else{const L=A-H;m(B=>B.filter((z,G)=>G!==L))}},O=async A=>{if(A.preventDefault(),j(!0),C({}),!r.buildingId){C({buildingId:"Vui lòng chọn tòa nhà."}),j(!1);return}if(!r.number.trim()){C({number:"Vui lòng nhập số phòng."}),j(!1);return}if(r.capacity<=0){C({capacity:"Sức chứa phải lớn hơn 0."}),j(!1);return}if(r.roomFee<0){C({roomFee:"Giá phòng không thể âm."}),j(!1);return}try{const R=[];if(h.length>0){P.loading("Đang tải ảnh lên...",{id:"uploading-images"});const z=h.map(X=>Ve.uploadMedia(X,"room-image"));(await Promise.allSettled(z)).forEach((X,Be)=>{var I,q,Z;if(X.status==="fulfilled"&&((I=X.value)!=null&&I.id))R.push(X.value.id);else throw console.error(`Lỗi upload ảnh ${(q=h[Be])==null?void 0:q.name}:`,X.reason),new Error(`Tải ảnh ${(Z=h[Be])==null?void 0:Z.name} thất bại.`)}),P.dismiss("uploading-images"),P.success("Tải ảnh thành công!")}const H=[...x,...R],L=Object.entries(u).map(([z,G])=>({amenityId:parseInt(z),quantity:G.quantity,notes:G.notes||null})),B={...r,buildingId:parseInt(r.buildingId),capacity:parseInt(r.capacity),floor:parseInt(r.floor),roomFee:parseFloat(r.roomFee),amenities:L,imageIds:H};delete B.images,delete B.amenities,n?(await Ve.updateRoom(e,B),P.success("Cập nhật phòng thành công!")):(await Ve.createRoom(B),P.success("Thêm phòng mới thành công!")),t("/rooms")}catch(R){P.dismiss("uploading-images"),console.error("Lỗi lưu phòng:",R);const H=(R==null?void 0:R.message)||(n?"Cập nhật thất bại.":"Thêm mới thất bại.");if(R!=null&&R.errors&&Array.isArray(R.errors)){const L={};R.errors.forEach(B=>{B.field&&(L[B.field]=B.message)}),C(L),P.error("Vui lòng kiểm tra lại thông tin.",{id:"validation-error"})}else P.error(H)}finally{j(!1)}},$=i.map(A=>({value:A.id.toString(),label:`${A.name} (${A.address})`})),Y=l.map(A=>({value:A.id,label:A.name}));return g?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{})}):o.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[" ",o.jsxs("div",{children:[o.jsx(U,{variant:"link",onClick:()=>t("/rooms"),icon:ut,className:"text-sm mb-4",children:"Quay lại danh sách phòng"}),o.jsx("h1",{className:"text-2xl font-semibold",children:n?"Chỉnh sửa thông tin Phòng":"Thêm Phòng mới"})]}),o.jsxs("form",{onSubmit:O,className:"bg-white shadow sm:rounded-lg",children:[o.jsxs("div",{className:"px-4 py-5 sm:p-6 space-y-8 divide-y divide-gray-200",children:[o.jsxs("div",{className:"pt-0",children:[" ",o.jsx("h3",{className:"text-base font-semibold leading-7 text-gray-900",children:"Thông tin cơ bản"}),o.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[o.jsx("div",{className:"sm:col-span-3",children:o.jsx(ce,{label:"Tòa nhà *",id:"buildingId",name:"buildingId",required:!0,value:r.buildingId,onChange:E,options:[{value:"",label:"-- Chọn tòa nhà --"},...$],disabled:p,error:N.buildingId})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Số phòng *",id:"number",name:"number",required:!0,value:r.number,onChange:E,disabled:p,error:N.number,placeholder:"Ví dụ: A101"})}),o.jsx("div",{className:"sm:col-span-2",children:o.jsx(ce,{label:"Loại phòng *",id:"type",name:"type",required:!0,value:r.type,onChange:E,options:y_,disabled:p,error:N.type})}),o.jsx("div",{className:"sm:col-span-2",children:o.jsx(D,{label:"Sức chứa (người) *",id:"capacity",name:"capacity",type:"number",min:"1",required:!0,value:r.capacity,onChange:E,disabled:p,error:N.capacity})}),o.jsx("div",{className:"sm:col-span-2",children:o.jsx(D,{label:"Tầng *",id:"floor",name:"floor",type:"number",min:"1",required:!0,value:r.floor,onChange:E,disabled:p,error:N.floor})}),o.jsxs("div",{className:"sm:col-span-3",children:[o.jsx(D,{label:"Giá phòng (VND/tháng) *",id:"roomFee",name:"roomFee",type:"number",min:"0",step:"1000",required:!0,value:r.roomFee,onChange:E,disabled:p,error:N.roomFee})," "]}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(ce,{label:"Trạng thái *",id:"status",name:"status",required:!0,value:r.status,onChange:E,options:x_,disabled:p,error:N.status})}),o.jsx("div",{className:"sm:col-span-full",children:o.jsx(tn,{label:"Mô tả thêm",id:"description",name:"description",rows:3,value:r.description,onChange:E,disabled:p,error:N.description})})]})]}),o.jsxs("div",{className:"pt-8",children:[o.jsx("h3",{className:"text-base font-semibold leading-7 text-gray-900",children:"Tiện nghi trong phòng"}),o.jsx("div",{className:"mt-4",children:o.jsx(gN,{label:"Chọn các tiện nghi",options:Y,selectedValues:Object.keys(u).map(A=>parseInt(A)),onChange:S,disabled:p})}),Object.keys(u).length>0&&o.jsxs("div",{className:"mt-6 space-y-4 border-t pt-4",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Chi tiết tiện nghi đã chọn:"}),Object.entries(u).map(([A,R])=>{const H=l.find(L=>L.id===parseInt(A));return o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 p-3 border rounded-md bg-gray-50",children:[o.jsx("div",{className:"sm:col-span-1",children:o.jsx("p",{className:"text-sm font-medium",children:(H==null?void 0:H.name)||`Tiện nghi ID: ${A}`})}),o.jsx("div",{className:"sm:col-span-1",children:o.jsx(D,{label:"Số lượng",type:"number",min:"1",id:`amenity-qty-${A}`,value:R.quantity,onChange:L=>k(A,"quantity",L.target.value),disabled:p,size:"sm"})}),o.jsx("div",{className:"sm:col-span-1",children:o.jsx(D,{label:"Ghi chú",id:`amenity-notes-${A}`,value:R.notes,onChange:L=>k(A,"notes",L.target.value),disabled:p,size:"sm"})})]},A)})]})]}),o.jsxs("div",{className:"pt-8",children:[o.jsx("h3",{className:"text-base font-semibold leading-7 text-gray-900",children:"Hình ảnh phòng"}),o.jsxs("div",{className:"mt-4",children:[o.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer inline-flex items-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:[o.jsx(_d,{className:"-ml-0.5 h-5 w-5 text-gray-500","aria-hidden":"true"}),"Tải ảnh lên"]}),o.jsx("input",{id:"image-upload",name:"images",type:"file",multiple:!0,className:"sr-only",onChange:_,accept:"image/*"}),o.jsx("p",{className:"mt-2 text-xs leading-5 text-gray-500",children:"Cho phép JPG, GIF, PNG. Tối đa 5MB mỗi ảnh."})]}),w.length>0&&o.jsx("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:w.map((A,R)=>o.jsxs("div",{className:"relative group aspect-square",children:[o.jsx("img",{src:A.startsWith("blob:")?A:`/uploads/${A}`,alt:`Preview ${R+1}`,className:"object-cover w-full h-full rounded-md border",onError:H=>{H.target.onerror=null,H.target.src="/default-room.png"}}),o.jsx("button",{type:"button",onClick:()=>T(R),className:"absolute top-1 right-1 bg-red-600/80 hover:bg-red-700 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",title:"Xóa ảnh",disabled:p,children:o.jsx(Mt,{className:"h-4 w-4"})})]},R))})]})]}),o.jsxs("div",{className:"flex items-center justify-end gap-x-3 border-t border-gray-900/10 px-4 py-4 sm:px-6",children:[o.jsx(U,{type:"button",variant:"secondary",onClick:()=>t("/rooms"),disabled:p,children:"Hủy"}),o.jsx(U,{type:"submit",isLoading:p,disabled:p,children:n?"Lưu thay đổi":"Thêm Phòng"})]})]})]})},v_=()=>{const[e,t]=v.useState([]),[n,r]=v.useState(!0),[s,i]=v.useState(null),[a,l]=v.useState({currentPage:1,totalPages:1,limit:10,total:0}),[c,u]=v.useState(1),[d,h]=v.useState(""),m=ms(d,500),x=se(),f=v.useCallback(async(y=1,p="")=>{var j;r(!0),i(null);try{const N={page:y,limit:a.limit,search:p||void 0},C=await is.getAllAmenities(N);t(C.amenities||[]),l(E=>({...E,...C.meta})),u(((j=C.meta)==null?void 0:j.page)||1)}catch{i("Không thể tải danh sách tiện nghi.")}finally{r(!1)}},[a.limit]);v.useEffect(()=>{f(c,m)},[f,c,m]);const w=async(y,p)=>{if(window.confirm(`Bạn có chắc chắn muốn xóa tiện nghi "${p}" không?`))try{await is.deleteAmenity(y),P.success(`Đã xóa tiện nghi "${p}" thành công!`),f(c,m)}catch(j){P.error((j==null?void 0:j.message)||`Xóa tiện nghi "${p}" thất bại. Có thể tiện nghi này đang được sử dụng.`)}},b=y=>{u(y)},g=v.useMemo(()=>[{Header:"Icon",accessor:"icon",Cell:({value:y})=>y?o.jsx("img",{src:y,alt:"Icon",className:"h-8 w-8 object-contain mx-auto",onError:p=>p.target.style.display="none"}):o.jsx("span",{className:"text-gray-400 text-xs",children:"Không có"})},{Header:"Tên Tiện nghi",accessor:"name",Cell:({value:y})=>o.jsx("span",{className:"font-medium",children:y})},{Header:"Mô tả",accessor:"description",Cell:({value:y})=>o.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:y||"-"})},{Header:"Hành động",accessor:"actions",Cell:({row:y})=>o.jsxs("div",{className:"flex space-x-2 justify-center",children:[o.jsx(U,{variant:"icon",onClick:()=>x(`/amenities/${y.original.id}/edit`),tooltip:"Chỉnh sửa",children:o.jsx(Pt,{className:"h-5 w-5 text-yellow-600 hover:text-yellow-800"})}),o.jsx(U,{variant:"icon",onClick:()=>w(y.original.id,y.original.name),tooltip:"Xóa",children:o.jsx(Mt,{className:"h-5 w-5 text-red-600 hover:text-red-800"})})]})}],[x,c,m]);return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[o.jsx("h1",{className:"text-2xl font-semibold",children:"Quản lý Tiện nghi"}),o.jsx(U,{onClick:()=>x("/amenities/new"),icon:qi,children:"Thêm Tiện nghi mới"})]}),o.jsx("div",{className:"max-w-sm",children:o.jsx(D,{placeholder:"Tìm theo tên tiện nghi...",value:d,onChange:y=>h(y.target.value)})}),n?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{})}):s?o.jsxs("div",{className:"text-red-600 bg-red-100 p-4 rounded",children:["Lỗi: ",s]}):o.jsxs(o.Fragment,{children:[o.jsx(Rd,{columns:g,data:e}),a.totalPages>1&&o.jsx(Bt,{currentPage:c,totalPages:a.totalPages,onPageChange:b})]})]})},eg=()=>{const{id:e}=Sn(),t=se(),n=!!e,[r,s]=v.useState({name:"",description:"",icon:""}),[i,a]=v.useState(n),[l,c]=v.useState(!1),[u,d]=v.useState({});v.useEffect(()=>{n?(a(!0),is.getAmenityById(e).then(x=>{s({name:x.name||"",description:x.description||"",icon:x.icon||""})}).catch(x=>{P.error(`Không thể tải thông tin tiện nghi (ID: ${e}).`),console.error(x),t("/amenities")}).finally(()=>a(!1))):a(!1)},[e,n,t]);const h=x=>{const{name:f,value:w}=x.target;s(b=>({...b,[f]:w})),u[f]&&d(b=>({...b,[f]:null}))},m=async x=>{if(x.preventDefault(),c(!0),d({}),!r.name.trim()){d({name:"Tên tiện nghi là bắt buộc."}),c(!1);return}try{const f={name:r.name,description:r.description||null,icon:r.icon||null};n?(await is.updateAmenity(e,f),P.success("Cập nhật tiện nghi thành công!")):(await is.createAmenity(f),P.success("Thêm tiện nghi mới thành công!")),t("/amenities")}catch(f){console.error("Lỗi lưu tiện nghi:",f);const w=(f==null?void 0:f.message)||(n?"Cập nhật thất bại.":"Thêm mới thất bại.");if(f!=null&&f.errors&&Array.isArray(f.errors)){const b={};f.errors.forEach(g=>{g.field&&(b[g.field]=g.message)}),d(b),P.error("Vui lòng kiểm tra lại thông tin.",{id:"validation-error"})}else P.error(w)}finally{c(!1)}};return i?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{})}):o.jsxs("div",{className:"space-y-6 max-w-lg mx-auto",children:[" ",o.jsxs("div",{children:[o.jsx(U,{variant:"link",onClick:()=>t("/amenities"),icon:ut,className:"text-sm mb-4",children:"Quay lại danh sách tiện nghi"}),o.jsx("h1",{className:"text-2xl font-semibold",children:n?"Chỉnh sửa Tiện nghi":"Thêm Tiện nghi mới"})]}),o.jsxs("form",{onSubmit:m,className:"bg-white shadow sm:rounded-lg p-6 space-y-6",children:[o.jsx(D,{label:"Tên Tiện nghi *",id:"name",name:"name",value:r.name,onChange:h,required:!0,disabled:l,error:u.name}),o.jsx(tn,{label:"Mô tả",id:"description",name:"description",rows:3,value:r.description,onChange:h,disabled:l,error:u.description}),o.jsx(D,{label:"URL Icon (Tùy chọn)",id:"icon",name:"icon",type:"url",value:r.icon,onChange:h,disabled:l,error:u.icon,placeholder:"https://example.com/icon.png",hint:"Dán đường dẫn URL đến hình ảnh icon."}),r.icon&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Xem trước Icon"}),o.jsx("img",{src:r.icon,alt:"Icon Preview",className:"h-16 w-16 object-contain border rounded",onError:x=>x.target.style.display="none"})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-5 border-t border-gray-200",children:[o.jsx(U,{variant:"secondary",onClick:()=>t("/amenities"),disabled:l,children:"Hủy"}),o.jsx(U,{type:"submit",isLoading:l,disabled:l,children:n?"Lưu thay đổi":"Thêm Tiện nghi"})]})]})]})},b_=async(e={})=>{var t,n,r,s;try{e.status&&typeof e.status=="string"&&(e.status=e.status.toUpperCase());const i=await W.get("/api/maintenances",{params:e});if(((t=i.data)==null?void 0:t.status)==="success")return{maintenanceRequests:i.data.data,meta:{total:i.data.total,count:i.data.results,page:e.page||1,limit:e.limit||10}};throw new Error(((n=i.data)==null?void 0:n.message)||"Lấy danh sách yêu cầu bảo trì thất bại.")}catch(i){throw console.error("Lỗi service getAllMaintenanceRequests:",((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},w_=async e=>{var t,n,r,s,i;try{const a=await W.get(`/api/maintenances/${e}`);if(((t=a.data)==null?void 0:t.status)==="success"&&((n=a.data)!=null&&n.data))return a.data.data;throw new Error(((r=a.data)==null?void 0:r.message)||`Không tìm thấy yêu cầu bảo trì với ID ${e}.`)}catch(a){throw console.error(`Lỗi service getMaintenanceRequestById (${e}):`,((s=a.response)==null?void 0:s.data)||a.message),((i=a.response)==null?void 0:i.data)||a}},j_=async e=>{var t,n,r,s,i,a,l;try{const c=await W.post("/api/maintenances",e);if(((t=c.data)==null?void 0:t.status)==="success"&&((n=c.data)!=null&&n.data))return c.data.data;throw new Error(((r=c.data)==null?void 0:r.message)||"Gửi yêu cầu bảo trì thất bại.")}catch(c){throw console.error("Lỗi service createMaintenanceRequest:",((s=c.response)==null?void 0:s.data)||c.message),(a=(i=c.response)==null?void 0:i.data)!=null&&a.errors?c.response.data:((l=c.response)==null?void 0:l.data)||c}},N_=async(e,t)=>{var n,r,s,i,a,l,c;try{const u=await W.put(`/api/maintenances/${e}`,t);if(((n=u.data)==null?void 0:n.status)==="success"&&((r=u.data)!=null&&r.data))return u.data.data;throw new Error(((s=u.data)==null?void 0:s.message)||"Cập nhật yêu cầu bảo trì thất bại.")}catch(u){throw console.error(`Lỗi service updateMaintenanceRequest (${e}):`,((i=u.response)==null?void 0:i.data)||u.message),(l=(a=u.response)==null?void 0:a.data)!=null&&l.errors?u.response.data:((c=u.response)==null?void 0:c.data)||u}},S_=async e=>{var t,n,r,s;try{const i=await W.delete(`/api/maintenances/${e}`);if(((t=i.data)==null?void 0:t.status)==="success")return i.data;throw new Error(((n=i.data)==null?void 0:n.message)||"Xóa yêu cầu bảo trì thất bại.")}catch(i){throw console.error(`Lỗi service deleteMaintenanceRequest (${e}):`,((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},Oi={getAllMaintenanceRequests:b_,getMaintenanceRequestById:w_,createMaintenanceRequest:j_,updateMaintenanceRequest:N_,deleteMaintenanceRequest:S_},C_=e=>{if(!e)return"N/A";try{return Ce(De(e),"dd/MM/yyyy HH:mm",{locale:dt})}catch(t){return console.error("Lỗi format date:",t),e||"N/A"}},k_=[{value:"",label:"Tất cả trạng thái"},{value:"pending",label:"Chờ xử lý"},{value:"assigned",label:"Đã phân công"},{value:"in_progress",label:"Đang xử lý"},{value:"completed",label:"Đã hoàn thành"},{value:"cancelled",label:"Đã hủy"}],E_=e=>{switch(e==null?void 0:e.toLowerCase()){case"pending":return"yellow";case"assigned":return"purple";case"in_progress":return"blue";case"completed":return"green";case"cancelled":return"gray";default:return"gray"}},__=()=>{const[e,t]=v.useState([]),[n,r]=v.useState([]),[s,i]=v.useState([]),[a,l]=v.useState(!0),[c,u]=v.useState(null),[d,h]=v.useState({currentPage:1,totalPages:1,limit:10,total:0}),[m,x]=v.useState(1),[f,w]=v.useState({status:"",id:"",roomId:""}),b=se(),g=v.useCallback(async(C=1,E)=>{var S;l(!0),u(null);try{const k={page:C,limit:d.limit,status:E.status||void 0,id:E.id||void 0,roomId:E.roomId||void 0};console.log("Maintenance request params:",k);const _=await Oi.getAllMaintenanceRequests(k);console.log("Maintenance response:",_),t(_.maintenanceRequests||[]),h(T=>({...T,..._.meta})),x(((S=_.meta)==null?void 0:S.page)||1)}catch(k){console.error("Error fetching maintenance requests:",k),u("Không thể tải danh sách yêu cầu bảo trì.")}finally{l(!1)}},[d.limit]);v.useEffect(()=>{(async()=>{try{const[E,S]=await Promise.allSettled([Et.getAllStudents({limit:1e3,fields:"id,fullName,userId"}),Ve.getAllRooms({limit:1e3,fields:"id,number,building.name"})]);E.status==="fulfilled"&&r(E.value.students||[]),S.status==="fulfilled"&&(S.value&&Array.isArray(S.value.rooms)?i(S.value.rooms):S.value&&Array.isArray(S.value)?i(S.value):(console.error("Dữ liệu phòng không phải là mảng:",S.value),i([])))}catch(E){console.error("Lỗi tải dữ liệu liên quan:",E),i([])}})()},[]),v.useEffect(()=>{g(m,f)},[g,m,f]);const y=C=>{const{name:E,value:S}=C.target;w(k=>({...k,[E]:S})),x(1)},p=async(C,E)=>{if(window.confirm(`Bạn có chắc muốn xóa yêu cầu "${E}" không?`))try{await Oi.deleteMaintenanceRequest(C),P.success(`Đã xóa yêu cầu "${E}" thành công!`),g(m,f)}catch(S){P.error((S==null?void 0:S.message)||`Xóa yêu cầu "${E}" thất bại.`)}},j=C=>{x(C)},N=v.useMemo(()=>[{Header:"ID",accessor:"id",Cell:({value:C})=>o.jsx("span",{className:"font-mono text-sm",children:C})},{Header:"Nội dung",accessor:"issue",Cell:({value:C})=>o.jsx("span",{className:"font-medium",children:C})},{Header:"Sinh viên YC",accessor:"reportedBy",Cell:({value:C,row:E})=>{if(C&&typeof C=="object")return C.fullName?C.fullName:C.user&&C.user.email?C.user.email:`ID: ${C.id||C.userId||"N/A"}`;const S=E.original.reportedById;if(S){const k=n.find(_=>_.userId===S);return k?k.fullName:E.original.reportedByUser?E.original.reportedByUser.email||`User ID: ${S}`:`User ID: ${S}`}return"N/A"}},{Header:"Phòng",accessor:"room",Cell:({value:C})=>{var E;return C?`${C.number} (${((E=C.building)==null?void 0:E.name)||"N/A"})`:"N/A"}},{Header:"Ngày YC",accessor:"reportDate",Cell:({value:C})=>C_(C)},{Header:"Trạng thái",accessor:"status",Cell:({value:C})=>o.jsx($t,{color:E_(C),children:(C==null?void 0:C.toUpperCase())||"N/A"})},{Header:"Hành động",accessor:"actions",Cell:({row:C})=>o.jsxs("div",{className:"flex space-x-2 justify-center",children:[o.jsx(U,{variant:"icon",onClick:()=>b(`/maintenance/${C.original.id}/edit`),tooltip:"Xem chi tiết / Cập nhật",children:o.jsx(Pt,{className:"h-5 w-5 text-indigo-600 hover:text-indigo-800"})}),o.jsx(U,{variant:"icon",onClick:()=>p(C.original.id,C.original.issue),tooltip:"Xóa",children:o.jsx(Mt,{className:"h-5 w-5 text-red-600 hover:text-red-800"})})]})}],[b,n,s,m,f]);return[...n.map(C=>({value:C.id.toString(),label:C.fullName}))],[...Array.isArray(s)?s.map(C=>{var E;return{value:C.id.toString(),label:`${C.number} (${((E=C.building)==null?void 0:E.name)||"N/A"})`}}):[]],o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex flex-wrap justify-between items-center gap-4",children:o.jsx("h1",{className:"text-2xl font-semibold",children:"Yêu cầu Bảo trì / Sửa chữa"})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-md shadow-sm",children:[o.jsx(D,{label:"ID",id:"id",name:"id",value:f.id,onChange:y,placeholder:"Nhập ID yêu cầu"}),o.jsx(D,{label:"Phòng",id:"roomId",name:"roomId",value:f.roomId,onChange:y,placeholder:"Ví dụ: 203 (B3), B3-203, hoặc B3",helpText:"Tìm theo số phòng, tòa nhà hoặc cả hai"}),o.jsx(ce,{label:"Trạng thái",id:"status",name:"status",value:f.status,onChange:y,options:k_})]}),a?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{})}):c?o.jsxs("div",{className:"text-red-600 bg-red-100 p-4 rounded",children:["Lỗi: ",c]}):o.jsxs(o.Fragment,{children:[o.jsx(Rd,{columns:N,data:e}),d.totalPages>1&&o.jsx(Bt,{currentPage:m,totalPages:d.totalPages,onPageChange:j})]})]})},T_=e=>{if(!e)return"-";try{return Ce(De(e),"dd/MM/yyyy HH:mm",{locale:dt})}catch(t){return console.error("DateTime format error:",t),e}},P_=e=>{switch(e==null?void 0:e.toLowerCase()){case"pending":return"yellow";case"assigned":return"purple";case"in_progress":return"blue";case"completed":return"green";case"cancelled":return"gray";default:return"gray"}},M_=e=>{switch(e==null?void 0:e.toLowerCase()){case"completed":return o.jsx(Td,{className:"h-5 w-5 text-green-500 mr-1 inline-block"});case"pending":return o.jsx(Pd,{className:"h-5 w-5 text-yellow-500 mr-1 inline-block"});case"assigned":return o.jsx(ax,{className:"h-5 w-5 text-purple-500 mr-1 inline-block"});case"in_progress":return o.jsx(Pt,{className:"h-5 w-5 text-blue-500 mr-1 inline-block"});case"cancelled":return o.jsx(pu,{className:"h-5 w-5 text-gray-500 mr-1 inline-block"});default:return null}},I_=[{value:"pending",label:"Chờ xử lý"},{value:"assigned",label:"Đã phân công"},{value:"in_progress",label:"Đang xử lý"},{value:"completed",label:"Đã hoàn thành"},{value:"cancelled",label:"Đã hủy"}],R_=()=>{var j,N,C;const{id:e}=Sn(),t=se(),[n,r]=v.useState(null),[s,i]=v.useState(null),[a,l]=v.useState(null),[c,u]=v.useState(!0),[d,h]=v.useState(!1),[m,x]=v.useState(null),[f,w]=v.useState({status:"",staffNotes:""}),b=v.useCallback(async()=>{u(!0),x(null);try{const E=await Oi.getMaintenanceRequestById(e);r(E),w({status:E.status||"",staffNotes:E.staffNotes||""});const S=[];E.studentId?S.push(Et.getStudentById(E.studentId)):S.push(Promise.resolve(null)),E.roomId?S.push(Ve.getRoomById(E.roomId)):S.push(Promise.resolve(null));const[k,_]=await Promise.allSettled(S);k.status==="fulfilled"&&k.value?i(k.value):k.status==="rejected"&&console.warn("Lỗi tải thông tin sinh viên:",k.reason),_.status==="fulfilled"&&_.value?l(_.value):_.status==="rejected"&&console.warn("Lỗi tải thông tin phòng:",_.reason)}catch(E){x("Không thể tải chi tiết yêu cầu bảo trì."),P.error("Yêu cầu không tồn tại hoặc có lỗi xảy ra."),console.error("Fetch maintenance detail error:",E)}finally{u(!1)}},[e]);v.useEffect(()=>{b()},[b]);const g=E=>{const{name:S,value:k}=E.target;w(_=>({..._,[S]:k}))},y=async E=>{if(E.preventDefault(),!(!n||d)){h(!0);try{const S={status:f.status,staffNotes:f.notes||null},k=await Oi.updateMaintenanceRequest(e,S);r(k),w({status:k.status||"",staffNotes:k.staffNotes||""}),P.success("Cập nhật yêu cầu thành công!")}catch(S){P.error((S==null?void 0:S.message)||"Cập nhật yêu cầu thất bại."),console.error("Update maintenance error:",S)}finally{h(!1)}}};if(c)return o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{})});if(m)return o.jsxs("div",{className:"text-red-600 bg-red-100 p-4 rounded text-center",children:["Lỗi: ",m]});if(!n)return o.jsx("div",{className:"text-center p-6 text-gray-500",children:"Không tìm thấy thông tin yêu cầu bảo trì."});const p="http://localhost:5002/uploads";return o.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[o.jsxs("div",{children:[o.jsx(U,{variant:"link",onClick:()=>t("/maintenance"),icon:ut,className:"text-sm mb-4",children:"Quay lại danh sách yêu cầu"}),o.jsxs("h1",{className:"text-2xl font-semibold text-gray-900",children:["Chi tiết Yêu cầu Bảo trì #",e]})]}),o.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[o.jsxs("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:[o.jsxs("div",{className:"flex flex-wrap justify-between items-start gap-2",children:[o.jsx("h3",{className:"text-lg leading-6 font-semibold text-gray-900",children:n.title}),o.jsx("div",{className:"flex-shrink-0",children:o.jsxs($t,{color:P_(n.status),children:[M_(n.status),((j=n.status)==null?void 0:j.toUpperCase())||"N/A"]})})]}),o.jsxs("p",{className:"mt-2 max-w-2xl text-sm text-gray-500",children:["Yêu cầu bởi: ",o.jsx("span",{className:"font-medium",children:((N=n.reportedBy)==null?void 0:N.fullName)||n.studentId||"-"}),o.jsx("br",{}),"Phòng: ",o.jsx("span",{className:"font-medium",children:(a==null?void 0:a.number)||`ID: ${n.roomId}`})," (",((C=a==null?void 0:a.building)==null?void 0:C.name)||"N/A",")",o.jsx("br",{}),"Ngày yêu cầu: ",o.jsx("span",{className:"font-medium",children:T_(n.createdAt)})]})]}),o.jsxs("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6 space-y-5",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:"Mô tả sự cố:"}),o.jsx("p",{className:"text-sm text-gray-800 whitespace-pre-wrap bg-gray-50 p-3 rounded border",children:n.issue||"-"})]}),n.images&&n.images.length>0&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Hình ảnh đính kèm:"}),o.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:n.images.map((E,S)=>{const k=E.url||E.path,_=k?k.startsWith("http")?k:`${p}${k.startsWith("/")?"":"/"}${k}`:"src/assets/default-avatar.png";return o.jsxs("a",{href:_,target:"_blank",rel:"noopener noreferrer",className:"relative block aspect-square group border rounded-md overflow-hidden bg-gray-100",children:[o.jsx("img",{src:_,alt:`Ảnh ${S+1}`,className:"object-contain w-full h-full",onError:T=>{T.target.onerror=null,T.target.src="src/assets/default-avatar.png"}}),o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-opacity flex items-center justify-center",children:o.jsx(Md,{className:"h-6 w-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]},E.id||S)})})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:"Ghi chú xử lý (Nhân viên):"}),o.jsx("p",{className:"text-sm text-gray-800 whitespace-pre-wrap bg-yellow-50 p-3 rounded border border-yellow-200",children:n.staffNotes||o.jsx("span",{className:"italic text-gray-500",children:"Chưa có ghi chú"})})]})]})]}),o.jsxs("form",{onSubmit:y,className:"bg-white shadow sm:rounded-lg",children:[o.jsx("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:o.jsx("h3",{className:"text-base font-semibold leading-6 text-gray-900",children:"Cập nhật Trạng thái & Ghi chú"})}),o.jsxs("div",{className:"px-4 py-5 sm:p-6 space-y-4",children:[o.jsx(ce,{label:"Trạng thái mới *",id:"status",name:"status",value:f.status,onChange:g,options:I_,disabled:d,required:!0}),o.jsx(tn,{label:"Ghi chú xử lý",id:"notes",name:"notes",rows:4,value:f.staffNotes,onChange:g,disabled:d,placeholder:"Thêm ghi chú về quá trình xử lý, kết quả, vật tư sử dụng,..."})]}),o.jsx("div",{className:"flex items-center justify-end gap-x-3 border-t border-gray-900/10 px-4 py-4 sm:px-6",children:o.jsx(U,{type:"submit",isLoading:d,disabled:d,children:"Lưu cập nhật"})})]})]})},D_=()=>{var g;const{user:e}=bt(),t=se(),[n,r]=v.useState({title:"",description:""}),[s,i]=v.useState([]),[a,l]=v.useState([]),[c,u]=v.useState(!1),[d,h]=v.useState({}),m=v.useRef(null),x=y=>{const{name:p,value:j}=y.target;r(N=>({...N,[p]:j})),d[p]&&h(N=>({...N,[p]:null}))},f=y=>{const p=Array.from(y.target.files);if(!p.length)return;const j=[...s],N=[...a];let C=!1;p.forEach(E=>{if(j.length+p.length>5){P.error("Chỉ được tải lên tối đa 5 ảnh."),C=!0;return}if(E.size>5*1024*1024){P.error(`Ảnh "${E.name}" vượt quá 5MB.`),C=!0;return}j.some(S=>S.name===E.name&&S.size===E.size)||(j.push(E),N.push(URL.createObjectURL(E)))}),C||(i(j),l(N)),m.current&&(m.current.value=null)},w=y=>{i(p=>p.filter((j,N)=>N!==y)),l(p=>p.filter((j,N)=>N!==y))},b=async y=>{if(y.preventDefault(),u(!0),h({}),!n.title.trim()){h({title:"Vui lòng nhập tiêu đề."}),u(!1);return}if(!n.description.trim()){h({description:"Vui lòng mô tả sự cố."}),u(!1);return}try{let p=[];if(s.length>0){P.loading("Đang tải ảnh lên...",{id:"upload-maintenance"});const N=s.map(E=>Ve.uploadMedia(E,"maintenance-request"));p=(await Promise.allSettled(N)).filter(E=>{var S;return E.status==="fulfilled"&&((S=E.value)==null?void 0:S.id)}).map(E=>E.value.id),p.length!==s.length?(P.dismiss("upload-maintenance"),P.error("Có lỗi xảy ra khi tải lên một số ảnh.")):P.dismiss("upload-maintenance")}const j={...n,images:p};await Oi.createMaintenanceRequest(j),P.success("Đã gửi yêu cầu sửa chữa thành công!"),t("/profile")}catch(p){P.dismiss("upload-maintenance"),console.error("Lỗi gửi yêu cầu bảo trì:",p);const j=(p==null?void 0:p.message)||"Gửi yêu cầu thất bại.";if(p!=null&&p.errors&&Array.isArray(p.errors)){const N={};p.errors.forEach(C=>{C.field&&(N[C.field]=C.message)}),h(N),P.error("Vui lòng kiểm tra lại thông tin.",{id:"validation-error"})}else P.error(j)}finally{u(!1)}};return o.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto",children:[o.jsxs("div",{children:[o.jsx(U,{variant:"link",onClick:()=>t(-1),icon:ut,className:"text-sm mb-4",children:"Quay lại"}),o.jsx("h1",{className:"text-2xl font-semibold",children:"Gửi yêu cầu Sửa chữa / Bảo trì"}),o.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Mô tả sự cố bạn đang gặp phải trong phòng."})]}),o.jsxs("form",{onSubmit:b,className:"bg-white shadow sm:rounded-lg p-6 space-y-6",children:[o.jsxs("div",{className:"p-4 bg-indigo-50 rounded-md border border-indigo-200",children:[o.jsx("p",{className:"text-sm font-medium text-indigo-800",children:"Yêu cầu cho phòng:"}),o.jsxs("p",{className:"text-lg font-semibold text-indigo-900",children:["Phòng ",(g=e==null?void 0:e.profile)!=null&&g.roomId?"XXX (Tòa YYY)":"Chưa xác định"," "]}),o.jsx("p",{className:"text-xs text-indigo-700",children:"Nếu thông tin phòng không đúng, vui lòng liên hệ quản lý."})]}),o.jsx(D,{label:"Tiêu đề sự cố *",id:"title",name:"title",value:n.title,onChange:x,required:!0,disabled:c,error:d.title,placeholder:"Ví dụ: Vòi nước bị rò rỉ, Bóng đèn cháy, Điều hòa không lạnh,..."}),o.jsx(tn,{label:"Mô tả chi tiết *",id:"description",name:"description",rows:5,value:n.description,onChange:x,required:!0,disabled:c,error:d.description,placeholder:"Mô tả rõ ràng vấn đề bạn gặp phải, vị trí cụ thể (nếu có), thời điểm phát hiện,..."}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium leading-6 text-gray-900",children:"Hình ảnh minh họa (Tối đa 5 ảnh, 5MB/ảnh)"}),o.jsxs("div",{className:"mt-2",children:[o.jsxs("label",{htmlFor:"image-upload-maintenance",className:"cursor-pointer relative inline-flex items-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:[o.jsx(_d,{className:"-ml-0.5 h-5 w-5 text-gray-500","aria-hidden":"true"}),"Chọn ảnh"]}),o.jsx("input",{id:"image-upload-maintenance",name:"images",type:"file",multiple:!0,className:"sr-only",onChange:f,accept:"image/*",ref:m})]}),a.length>0&&o.jsx("div",{className:"mt-4 grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:a.map((y,p)=>o.jsxs("div",{className:"relative group aspect-square",children:[o.jsx("img",{src:y,alt:`Preview ${p+1}`,className:"object-cover w-full h-full rounded-md border"}),o.jsx("button",{type:"button",onClick:()=>w(p),className:"absolute top-0.5 right-0.5 bg-red-600/80 hover:bg-red-700 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",title:"Xóa ảnh",disabled:c,children:o.jsx(Mt,{className:"h-3.5 w-3.5"})})]},p))})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-5 border-t border-gray-200",children:[o.jsx(U,{variant:"secondary",onClick:()=>t(-1),disabled:c,children:"Hủy"}),o.jsx(U,{type:"submit",isLoading:c,disabled:c,children:"Gửi yêu cầu"})]})]})]})},A_=async(e={})=>{var t,n,r,s;try{const i={...e};i.studentId&&(i.studentProfileId=i.studentId,delete i.studentId);const a=await W.get("/api/invoices",{params:i});if(((t=a.data)==null?void 0:t.status)==="success")return{invoices:a.data.data||[],meta:{total:a.data.total||0,count:a.data.results||0,page:e.page||1,limit:e.limit||10,totalPages:Math.ceil((a.data.total||0)/(e.limit||10))}};throw new Error(((n=a.data)==null?void 0:n.message)||"Lấy danh sách hóa đơn thất bại.")}catch(i){throw console.error("Lỗi service getAllInvoices:",((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},L_=async e=>{var t,n,r,s;try{const i=await W.get(`/api/invoices/${e}`);if(((t=i.data)==null?void 0:t.status)==="success")return i.data.data;throw new Error(((n=i.data)==null?void 0:n.message)||`Không tìm thấy hóa đơn với ID ${e}.`)}catch(i){throw console.error(`Lỗi service getInvoiceById (${e}):`,((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},O_=async e=>{var t,n,r,s,i,a;try{const l={...e};l.studentId&&!l.studentProfileId&&(l.studentProfileId=l.studentId,delete l.studentId),l.items&&Array.isArray(l.items)&&(l.items=l.items.map(u=>({...u,amount:parseFloat(u.amount)||0})));const c=await W.post("/api/invoices",l);if(((t=c.data)==null?void 0:t.status)==="success")return c.data.data;throw new Error(((n=c.data)==null?void 0:n.message)||"Tạo hóa đơn mới thất bại.")}catch(l){throw console.error("Lỗi service createInvoice:",((r=l.response)==null?void 0:r.data)||l.message),(i=(s=l.response)==null?void 0:s.data)!=null&&i.errors?l.response.data:((a=l.response)==null?void 0:a.data)||l}},$_=async(e,t)=>{var n,r,s,i,a,l;try{const c=await W.put(`/api/invoices/${e}`,t);if(((n=c.data)==null?void 0:n.status)==="success")return c.data.data;throw new Error(((r=c.data)==null?void 0:r.message)||"Cập nhật hóa đơn thất bại.")}catch(c){throw console.error(`Lỗi service updateInvoice (${e}):`,((s=c.response)==null?void 0:s.data)||c.message),(a=(i=c.response)==null?void 0:i.data)!=null&&a.errors?c.response.data:((l=c.response)==null?void 0:l.data)||c}},F_=async e=>{var t,n,r,s;try{const i=await W.delete(`/api/invoices/${e}`);if(((t=i.data)==null?void 0:t.status)==="success")return i.data;throw new Error(((n=i.data)==null?void 0:n.message)||"Xóa hóa đơn thất bại.")}catch(i){throw console.error(`Lỗi service deleteInvoice (${e}):`,((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},Fo={getAllInvoices:A_,getInvoiceById:L_,createInvoice:O_,updateInvoice:$_,deleteInvoice:F_},B_=e=>{if(!e)return"-";try{return Ce(De(e),"dd/MM/yyyy",{locale:dt})}catch{return e}},z_=e=>e==null?"-":e.toLocaleString("vi-VN",{style:"currency",currency:"VND"}),U_=[{value:"",label:"Tất cả trạng thái"},{value:"UNPAID",label:"Chờ thanh toán"},{value:"PAID",label:"Đã thanh toán"},{value:"PARTIALLY_PAID",label:"Thanh toán một phần"},{value:"OVERDUE",label:"Quá hạn"},{value:"CANCELLED",label:"Đã hủy"}],H_=e=>{switch(e==null?void 0:e.toLowerCase()){case"paid":return"green";case"pending":return"yellow";case"overdue":return"red";case"cancelled":return"gray";default:return"gray"}},W_=()=>{const[e,t]=v.useState([]),[n,r]=v.useState([]),[s,i]=v.useState({}),[a,l]=v.useState(!0),[c,u]=v.useState(null),[d,h]=v.useState({currentPage:1,totalPages:1,limit:10,total:0}),[m,x]=v.useState(1),[f,w]=v.useState({status:"",search:"",identifier:""}),b=ms(f.search,500),g=ms(f.identifier,500),y=se(),p=v.useCallback(async(k=1,_)=>{var T;l(!0),u(null);try{const O={page:k,limit:d.limit,status:_.status||void 0,invoiceNumber:b||void 0,identifier:g||void 0},$=await Fo.getAllInvoices(O),Y=$.invoices||[];t(Y),h(R=>({...R,...$.meta})),x(((T=$.meta)==null?void 0:T.page)||1);const A=[...new Set(Y.filter(R=>R.roomId&&!R.studentProfileId).map(R=>R.roomId).filter(R=>R&&!s[R]))];if(A.length>0){const R=A.map(L=>Ve.getRoomById(L).catch(()=>null)),H=await Promise.all(R);i(L=>{const B={...L};return H.forEach(z=>{z&&(B[z.id]=z)}),B})}}catch{u("Không thể tải danh sách hóa đơn.")}finally{l(!1)}},[d.limit,s,b,g]),j=v.useCallback(async()=>{try{const k=await Et.getAllStudents({limit:1e3,fields:"id,fullName"});r(k.students||[])}catch(k){console.error("Lỗi tải danh sách sinh viên:",k)}},[]);v.useEffect(()=>{p(m,f)},[p,m,f]),v.useEffect(()=>{j()},[j]);const N=k=>{const{name:_,value:T}=k.target;w(O=>({...O,[_]:T})),x(1)},C=async(k,_)=>{if(window.confirm(`Bạn có chắc chắn muốn xóa hóa đơn "${_}" không?`))try{await Fo.deleteInvoice(k),P.success(`Đã xóa hóa đơn "${_}" thành công!`),p(m,f)}catch(T){P.error((T==null?void 0:T.message)||`Xóa hóa đơn "${_}" thất bại.`)}},E=k=>{k>0&&k<=d.totalPages&&(x(k),window.scrollTo({top:0,behavior:"smooth"}))},S=v.useMemo(()=>[{Header:"Số hợp đồng",accessor:"id",Cell:({value:k})=>o.jsx("span",{className:"font-mono",children:k||"N/A"})},{Header:"Mã SV/Phòng",accessor:"studentProfileId",Cell:({value:k,row:_})=>{var O;const T=_.original;if(T.studentProfileId){const $=n.find(Y=>Y.id===T.studentProfileId);return($==null?void 0:$.studentId)||`SV-${T.studentProfileId}`}else if(T.roomId){const $=s[T.roomId];return $?`${$.number} (${((O=$.building)==null?void 0:O.name)||""})`:`P-${T.roomId}`}return"N/A"}},{Header:"Tổng tiền",accessor:"totalAmount",Cell:({value:k})=>z_(k)},{Header:"Ngày hết hạn",accessor:"dueDate",Cell:({value:k})=>B_(k)},{Header:"Trạng thái",accessor:"status",Cell:({value:k})=>o.jsx($t,{color:H_(k),children:(k==null?void 0:k.toUpperCase())||"N/A"})},{Header:"Hành động",accessor:"actions",Cell:({row:k})=>o.jsxs("div",{className:"flex space-x-2 justify-center",children:[o.jsx(U,{variant:"icon",onClick:()=>y(`/invoices/${k.original.id}`),tooltip:"Xem chi tiết",children:o.jsx(Md,{className:"h-5 w-5 text-gray-500 hover:text-gray-700"})}),o.jsx(U,{variant:"icon",onClick:()=>C(k.original.id,k.original.invoiceNumber),tooltip:"Xóa/Hủy hóa đơn",children:o.jsx(Mt,{className:"h-5 w-5 text-red-600 hover:text-red-800"})})]})}],[y,n,s,m,f]);return[...n.map(k=>({value:k.id.toString(),label:`${k.fullName} (${k.studentId||"N/A"})`}))],o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex flex-wrap justify-between items-center gap-4",children:o.jsx("h1",{className:"text-2xl font-semibold",children:"Quản lý Hóa đơn"})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-md shadow-sm",children:[o.jsx(D,{label:"Số hợp đồng",id:"search",name:"search",value:f.search,onChange:N,placeholder:"Nhập số hợp đồng..."}),o.jsx(D,{label:"Mã SV/Phòng",id:"identifier",name:"identifier",value:f.identifier,onChange:N,placeholder:"Nhập mã SV hoặc phòng (VD: B3-105)",helpText:"Tìm theo mã sinh viên hoặc phòng"}),o.jsx(ce,{label:"Trạng thái",id:"status",name:"status",value:f.status,onChange:N,options:U_})]}),a?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{})}):c?o.jsxs("div",{className:"text-red-600 bg-red-100 p-4 rounded",children:["Lỗi: ",c]}):e.length===0?o.jsx("div",{className:"text-gray-600 bg-gray-100 p-4 rounded text-center",children:"Không tìm thấy hóa đơn nào."}):o.jsx(Bt,{columns:S,data:e,currentPage:m,totalPages:d.totalPages,onPageChange:E,totalRecords:d.total,recordsPerPage:d.limit,showingText:`Hiển thị hóa đơn ${(m-1)*d.limit+1} - ${Math.min(m*d.limit,d.total)}`,recordsText:"hóa đơn",pageText:"Trang"})]})},ac=e=>{},oc=e=>{},V_=e=>{},Y_=e=>{switch(e==null?void 0:e.toLowerCase()){case"paid":return o.jsx(Td,{className:"h-5 w-5 text-green-500 mr-1 inline-block"});case"pending":return o.jsx(Pd,{className:"h-5 w-5 text-yellow-500 mr-1 inline-block"});case"overdue":return o.jsx(pu,{className:"h-5 w-5 text-red-500 mr-1 inline-block"});case"cancelled":return o.jsx(pu,{className:"h-5 w-5 text-gray-500 mr-1 inline-block"});default:return null}},q_=()=>{var x;const{id:e}=Sn(),t=se(),[n,r]=v.useState(null),[s,i]=v.useState(""),[a,l]=v.useState(!0),[c,u]=v.useState(null),[d,h]=v.useState(!1);v.useEffect(()=>{(async()=>{l(!0),u(null);try{const w=await Fo.getInvoiceById(e);if(r(w),w.studentId)try{const b=await Et.getStudentById(w.studentId);i((b==null?void 0:b.fullName)||`ID: ${w.studentId}`)}catch(b){console.warn("Không thể lấy tên sinh viên:",b),i(`ID: ${w.studentId}`)}}catch{u("Không thể tải chi tiết hóa đơn."),P.error("Hóa đơn không tồn tại hoặc có lỗi xảy ra."),t("/invoices")}finally{l(!1)}})()},[e,t]);const m=async f=>{if(n&&window.confirm(`Bạn có chắc muốn cập nhật trạng thái hóa đơn #${n.invoiceNumber} thành "${f.toUpperCase()}" không?`)){h(!0);try{const w=await Fo.updateInvoice(e,{status:f});r(w),P.success("Cập nhật trạng thái hóa đơn thành công!")}catch(w){P.error((w==null?void 0:w.message)||"Cập nhật trạng thái thất bại.")}finally{h(!1)}}};return a?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{})}):c?o.jsxs("div",{className:"text-red-600 bg-red-100 p-4 rounded",children:["Lỗi: ",c]}):n?o.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[o.jsxs("div",{children:[o.jsx(U,{variant:"link",onClick:()=>t("/invoices"),icon:ut,className:"text-sm mb-4",children:"Quay lại danh sách hóa đơn"}),o.jsxs("div",{className:"flex flex-wrap justify-between items-start gap-4",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-semibold text-gray-900",children:["Chi tiết Hóa đơn #",n.invoiceNumber||e]}),o.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Ngày tạo: ",ac(n.createdAt)||"-"," | Hạn thanh toán: ",o.jsx("span",{className:new Date(n.dueDate)<new Date&&n.status==="pending"?"text-red-600 font-semibold":"",children:ac(n.dueDate)||"-"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3 mt-2 sm:mt-0",children:[n.status==="pending"&&o.jsx(U,{variant:"success",onClick:()=>m("paid"),isLoading:d,disabled:d,icon:Td,children:"Đánh dấu Đã thanh toán"}),n.status==="paid"&&o.jsx(U,{variant:"warning",onClick:()=>m("pending"),isLoading:d,disabled:d,children:"Đánh dấu Chờ thanh toán"}),o.jsxs(U,{variant:"outline",icon:Qj,onClick:()=>window.print(),children:[" ","In hóa đơn"]})]})]})]}),o.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:o.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-0",children:o.jsxs("dl",{className:"sm:divide-y sm:divide-gray-200",children:[o.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Sinh viên"}),o.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:s})]}),o.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 bg-gray-50",children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Số hóa đơn"}),o.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 font-mono",children:n.invoiceNumber||"-"})]}),o.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Tổng tiền"}),o.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 font-semibold text-lg",children:oc(n.amount)})]}),o.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 bg-gray-50",children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Trạng thái"}),o.jsxs("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 flex items-center",children:[Y_(n.status),o.jsx($t,{color:V_(n.status),children:((x=n.status)==null?void 0:x.toUpperCase())||"N/A"})]})]}),o.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Ngày hết hạn"}),o.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:ac(n.dueDate)})]}),o.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 bg-gray-50",children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Chi tiết khoản phí"}),o.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:n.items&&n.items.length>0?o.jsxs("ul",{role:"list",className:"border border-gray-200 rounded-md divide-y divide-gray-200",children:[n.items.map((f,w)=>o.jsxs("li",{className:"pl-3 pr-4 py-3 flex items-center justify-between text-sm",children:[o.jsx("div",{className:"w-0 flex-1 flex items-center",children:o.jsx("span",{className:"ml-2 flex-1 w-0 truncate",children:f.description||"Khoản phí không tên"})}),o.jsx("div",{className:"ml-4 flex-shrink-0",children:oc(f.amount)})]},w)),o.jsxs("li",{className:"pl-3 pr-4 py-3 flex items-center justify-between text-sm bg-gray-100 font-semibold",children:[o.jsx("div",{className:"w-0 flex-1 flex items-center",children:o.jsx("span",{className:"ml-2 flex-1 w-0 truncate",children:"Tổng cộng"})}),o.jsx("div",{className:"ml-4 flex-shrink-0",children:oc(n.amount)})]})]}):o.jsx("p",{className:"text-gray-500",children:"Không có chi tiết khoản phí."})})]})]})})})]}):o.jsx("div",{className:"text-center p-6",children:"Không tìm thấy thông tin hóa đơn."})},K_=async(e={})=>{var t,n,r,s;try{const i=await W.get("/api/payments",{params:e});if(((t=i.data)==null?void 0:t.status)==="success")return{payments:i.data.payments||[],meta:i.data.meta||{page:e.page||1,limit:e.limit||10,totalPages:1,total:0}};throw new Error(((n=i.data)==null?void 0:n.message)||"Lấy lịch sử thanh toán thất bại.")}catch(i){throw console.error("Lỗi service getAllPayments:",((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},X_=async e=>{var t,n,r,s;try{const i=await W.get(`/api/payments/${e}`);if(((t=i.data)==null?void 0:t.status)==="success")return i.data.data;throw new Error(((n=i.data)==null?void 0:n.message)||`Không tìm thấy giao dịch với ID ${e}.`)}catch(i){throw console.error(`Lỗi service getPaymentById (${e}):`,((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},Q_=async e=>{var t,n,r,s,i,a;try{const l={...e,amount:parseFloat(e.amount)||0},c=await W.post("/api/payments",l);if(((t=c.data)==null?void 0:t.status)==="success")return c.data.data;throw new Error(((n=c.data)==null?void 0:n.message)||"Tạo giao dịch thanh toán thất bại.")}catch(l){throw console.error("Lỗi service createPayment:",((r=l.response)==null?void 0:r.data)||l.message),(i=(s=l.response)==null?void 0:s.data)!=null&&i.errors?l.response.data:((a=l.response)==null?void 0:a.data)||l}},G_=async(e,t)=>{var n,r,s,i,a,l;try{const c=await W.put(`/api/payments/${e}`,t);if(((n=c.data)==null?void 0:n.status)==="success")return c.data.data;throw new Error(((r=c.data)==null?void 0:r.message)||"Cập nhật giao dịch thanh toán thất bại.")}catch(c){throw console.error(`Lỗi service updatePayment (${e}):`,((s=c.response)==null?void 0:s.data)||c.message),(a=(i=c.response)==null?void 0:i.data)!=null&&a.errors?c.response.data:((l=c.response)==null?void 0:l.data)||c}},Z_=async e=>{var t,n,r,s;try{const i=await W.delete(`/api/payments/${e}`);if(((t=i.data)==null?void 0:t.status)==="success")return i.data;throw new Error(((n=i.data)==null?void 0:n.message)||"Xóa giao dịch thanh toán thất bại.")}catch(i){throw console.error(`Lỗi service deletePayment (${e}):`,((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},tg={getAllPayments:K_,getPaymentById:X_,createPayment:Q_,updatePayment:G_,deletePayment:Z_},J_=e=>{if(!e)return"-";try{return Ce(De(e),"dd/MM/yyyy HH:mm",{locale:dt})}catch{return e}},eT=e=>e==null?"-":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),tT=[{value:"",label:"Tất cả phương thức"},{value:"Chuyển khoản",label:"Chuyển khoản"},{value:"Tiền mặt",label:"Tiền mặt"}],nT=e=>{switch(e){case"Chuyển khoản":return o.jsx(If,{className:"h-5 w-5 text-blue-500 inline-block mr-1"});case"Tiền mặt":return o.jsx(xj,{className:"h-5 w-5 text-green-600 inline-block mr-1"});default:return o.jsx(If,{className:"h-5 w-5 text-gray-500 inline-block mr-1"})}},rT=()=>{const[e,t]=v.useState([]),[n,r]=v.useState(!0),[s,i]=v.useState(null),[a,l]=v.useState({currentPage:1,totalPages:1,limit:10,total:0}),[c,u]=v.useState(1),[d,h]=v.useState({id:"",method:"",studentId:"",transactionCode:""});se();const m=v.useCallback(async(g=1,y)=>{var p;r(!0),i(null);try{const j={page:g,limit:a.limit};y.id&&(j.id=y.id),y.method&&(j.method=y.method),y.studentId&&(j.studentId=y.studentId),y.transactionCode&&(j.transactionCode=y.transactionCode);const N=await tg.getAllPayments(j),C=N.payments||[];t(C),l(E=>({...E,...N.meta})),u(((p=N.meta)==null?void 0:p.page)||1)}catch(j){console.error("Lỗi khi tải lịch sử thanh toán:",j),i("Không thể tải lịch sử thanh toán.")}finally{r(!1)}},[a.limit]);v.useEffect(()=>{m(c,d)},[m,c,d]);const x=g=>{h(y=>({...y,[g.target.name]:g.target.value})),u(1)},f=g=>u(g),w=async g=>{if(window.confirm("Bạn có chắc muốn xóa giao dịch thanh toán này không? Hành động này thường không được khuyến khích."))try{await tg.deletePayment(g),P.success("Đã xóa giao dịch!"),m(c,d)}catch(y){P.error((y==null?void 0:y.message)||"Xóa giao dịch thất bại.")}},b=v.useMemo(()=>[{Header:"ID",accessor:"id",Cell:({value:g})=>o.jsxs("span",{className:"font-mono text-xs text-center",children:["#",g]}),className:"text-center"},{Header:"Ngày GD",accessor:"paymentDate",Cell:({value:g})=>J_(g),className:"text-center"},{Header:"Mã SV",accessor:"studentProfile",Cell:({value:g})=>g?o.jsx("span",{className:"text-xs font-mono text-center",children:g.studentId}):"-",className:"text-center"},{Header:"Số tiền",accessor:"amount",Cell:({value:g})=>eT(g),className:"text-center"},{Header:"Hóa đơn",accessor:"invoiceId",Cell:({value:g})=>g?o.jsxs(Le,{to:`/invoices/${g}`,className:"text-indigo-600 hover:underline font-mono text-center",children:["#",g]}):"-",className:"text-center"},{Header:"Phương thức",accessor:"paymentMethod",Cell:({value:g})=>g?o.jsxs("span",{className:"flex items-center justify-center",children:[nT(g),g]}):"-",className:"text-center"},{Header:"Mã GD",accessor:"transactionCode",Cell:({value:g})=>g?o.jsx("span",{className:"text-xs font-mono text-center",children:g}):"-",className:"text-center"},{Header:"Hành động",accessor:"actions",Cell:({row:g})=>o.jsx("div",{className:"flex space-x-2 justify-center",children:o.jsx(U,{variant:"icon",onClick:()=>w(g.original.id),tooltip:"Xóa giao dịch",children:o.jsx(Mt,{className:"h-5 w-5 text-red-500 hover:text-red-700"})})}),className:"text-center"}],[]);return o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex flex-wrap justify-between items-center gap-4",children:o.jsx("h1",{className:"text-2xl font-semibold",children:"Lịch sử Thanh toán"})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-md shadow-sm",children:[o.jsx(D,{label:"ID Thanh toán",id:"id",name:"id",placeholder:"Nhập ID thanh toán...",value:d.id,onChange:x}),o.jsx(D,{label:"Mã sinh viên",id:"studentId",name:"studentId",placeholder:"Nhập mã SV...",value:d.studentId,onChange:x}),o.jsx(ce,{label:"Phương thức",id:"method",name:"method",value:d.method,onChange:x,options:tT}),o.jsx(D,{label:"Mã GD",id:"transactionCode",name:"transactionCode",placeholder:"Nhập mã giao dịch...",value:d.transactionCode,onChange:x})]}),n?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{})}):s?o.jsxs("div",{className:"text-red-600 bg-red-100 p-4 rounded",children:["Lỗi: ",s]}):e.length===0?o.jsx("div",{className:"text-gray-600 bg-gray-100 p-4 rounded text-center",children:"Không tìm thấy giao dịch thanh toán nào."}):o.jsx(Bt,{columns:b,data:e,currentPage:a.page||a.currentPage,totalPages:a.totalPages,onPageChange:f,totalRecords:a.total,recordsPerPage:a.limit,showingText:`Hiển thị giao dịch ${((a.page||a.currentPage)-1)*a.limit+1} - ${Math.min((a.page||a.currentPage)*a.limit,a.total)}`,recordsText:"giao dịch",pageText:"Trang"})]})},sT=async(e={})=>{var t,n,r,s;try{const i={...e};i.type&&typeof i.type=="object"&&(console.warn("Type parameter is an object, converting to string",i.type),i.type=i.type.value||""),console.log("Calling utility API with params:",i);const a=await W.get("/api/utilities",{params:i});if(console.log("API response:",a.data),((t=a.data)==null?void 0:t.status)==="success")return{utilities:a.data.data||[],meta:{total:a.data.total||0,count:a.data.results||0,page:i.page||1,limit:i.limit||10,totalPages:Math.ceil((a.data.total||0)/(i.limit||10))}};throw new Error(((n=a.data)==null?void 0:n.message)||"Lấy danh sách ghi điện nước thất bại.")}catch(i){throw console.error("Lỗi service getAllUtilityReadings:",((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},iT=async e=>{var t,n,r,s;try{const i=await W.get(`/api/utilities/${e}`);if(((t=i.data)==null?void 0:t.status)==="success")return i.data.data;throw new Error(((n=i.data)==null?void 0:n.message)||`Không tìm thấy bản ghi điện nước với ID ${e}.`)}catch(i){throw console.error(`Lỗi service getUtilityReadingById (${e}):`,((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},aT=async e=>{var t,n,r,s,i,a;try{const l={...e,roomId:parseInt(e.roomId),indexValue:parseFloat(e.indexValue),billingMonth:parseInt(e.billingMonth),billingYear:parseInt(e.billingYear)};console.log("Creating utility reading with payload:",l);const c=await W.post("/api/utilities",l);if(console.log("Create response:",c.data),((t=c.data)==null?void 0:t.status)==="success")return c.data.data;throw new Error(((n=c.data)==null?void 0:n.message)||"Ghi nhận chỉ số điện nước thất bại.")}catch(l){throw console.error("Lỗi service createUtilityReading:",((r=l.response)==null?void 0:r.data)||l.message),(i=(s=l.response)==null?void 0:s.data)!=null&&i.errors?l.response.data:((a=l.response)==null?void 0:a.data)||l}},oT=async(e,t)=>{var n,r,s,i,a,l;try{const c={...t,indexValue:t.indexValue!==void 0?parseFloat(t.indexValue):void 0};Object.keys(c).forEach(d=>c[d]===void 0&&delete c[d]),console.log(`Updating utility reading ${e} with payload:`,c);const u=await W.put(`/api/utilities/${e}`,c);if(console.log("Update response:",u.data),((n=u.data)==null?void 0:n.status)==="success")return u.data.data;throw new Error(((r=u.data)==null?void 0:r.message)||"Cập nhật bản ghi điện nước thất bại.")}catch(c){throw console.error(`Lỗi service updateUtilityReading (${e}):`,((s=c.response)==null?void 0:s.data)||c.message),(a=(i=c.response)==null?void 0:i.data)!=null&&a.errors?c.response.data:((l=c.response)==null?void 0:l.data)||c}},lT=async e=>{var t,n,r,s;try{console.log(`Deleting utility reading with ID: ${e}`);const i=await W.delete(`/api/utilities/${e}`);if(console.log("Delete response:",i.data),((t=i.data)==null?void 0:t.status)==="success")return i.data;throw new Error(((n=i.data)==null?void 0:n.message)||"Xóa bản ghi điện nước thất bại.")}catch(i){throw console.error(`Lỗi service deleteUtilityReading (${e}):`,((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},cT=async()=>{var e,t,n,r;try{const s=await W.get("/api/fee-rates",{params:{feeType:["ELECTRICITY","WATER"],isActive:!0,current:!0}});if(((e=s.data)==null?void 0:e.status)==="success")return s.data.data||[];throw new Error(((t=s.data)==null?void 0:t.message)||"Không thể lấy biểu phí tiện ích.")}catch(s){throw console.error("Lỗi service getUtilityFeeRates:",((n=s.response)==null?void 0:n.data)||s.message),((r=s.response)==null?void 0:r.data)||s}},Kn={getAllUtilityReadings:sT,getUtilityReadingById:iT,createUtilityReading:aT,updateUtilityReading:oT,deleteUtilityReading:lT,getUtilityFeeRates:cT},Zx=({className:e="h-5 w-5",color:t="#3B82F6"})=>o.jsx("svg",{version:"1.1",viewBox:"0 0 264.564 264.564",className:e,xmlns:"http://www.w3.org/2000/svg",children:o.jsxs("g",{children:[o.jsx("path",{d:"M132.281,264.564c51.24,0,92.931-41.681,92.931-92.918c0-50.18-87.094-164.069-90.803-168.891L132.281,0l-2.128,2.773c-3.704,4.813-90.802,118.71-90.802,168.882C39.352,222.883,81.042,264.564,132.281,264.564z",fill:t}),o.jsx("path",{d:"M132.281,249.564c43.24,0,77.931-34.681,77.931-77.918c0-42.18-72.094-139.069-75.803-143.891L132.281,25l-2.128,2.773c-3.704,4.813-75.802,101.71-75.802,143.882C54.352,214.883,89.042,249.564,132.281,249.564z",fill:"#FFFFFF",fillOpacity:"0.5"})]})}),uT=e=>{switch(e){case"ELECTRICITY":return o.jsx(ix,{className:"h-5 w-5 mr-2 text-yellow-500"});case"WATER":return o.jsx(Zx,{className:"h-5 w-5 mr-2 text-blue-500"});default:return null}},dT=[{value:"",label:"Tất cả loại"},{value:"ELECTRICITY",label:"Điện"},{value:"WATER",label:"Nước"},{value:"OTHER",label:"Khác"}],hT=e=>{switch(e){case"ELECTRICITY":return"Tiền điện";case"WATER":return"Tiền nước";default:return"Khác"}},fT=e=>{switch(e){case"ELECTRICITY":return"kWh";case"WATER":return"m³";default:return""}},mT=e=>{if(!e)return"N/A";try{const t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}catch(t){return console.error("Lỗi format date:",t),e||"N/A"}},gT=()=>{const e=se(),[t,n]=v.useState(!1),[r,s]=v.useState([]),[i,a]=v.useState({currentPage:1,totalPages:1,limit:10,total:0}),[l,c]=v.useState(1),[u,d]=v.useState([]),[h,m]=v.useState([]),[x,f]=v.useState([]),[w,b]=v.useState(null),[g,y]=v.useState({roomNumber:"",type:"",month:"",year:""});ms(g.roomNumber,500);const p=v.useCallback(async()=>{try{const T=await nn.getAllBuildings();d([{id:"",name:"Tất cả tòa nhà"},...Array.isArray(T.data)?T.data:[]])}catch(T){console.error("Failed to load buildings:",T),P.error("Không thể tải danh sách tòa nhà")}},[]),j=v.useCallback(async()=>{try{const O=(await Ve.getAllRooms()).rooms||[];m([{id:"",number:"Tất cả phòng"},...O]),g.roomNumber?f([{id:"",number:"Tất cả phòng"},...O.filter($=>$.number===g.roomNumber)]):f([{id:"",number:"Tất cả phòng"},...O])}catch(T){console.error("Failed to load rooms:",T),P.error("Không thể tải danh sách phòng")}},[g.roomNumber]),N=v.useCallback(async()=>{var T,O,$,Y;n(!0),b(null);try{const A={page:l,limit:10};g.roomNumber&&(A.roomNumber=g.roomNumber),g.type&&(A.type=g.type),g.month&&(A.month=g.month),g.year&&(A.year=g.year),console.log("Sending utility reading request with params:",A);const R=await Kn.getAllUtilityReadings(A);console.log("Received utility readings response:",R),console.log("Utilities array:",R.utilities),console.log("Is utilities an array?",Array.isArray(R.utilities)),console.log("Utilities length:",R.utilities?R.utilities.length:"N/A"),console.log("First utility item:",R.utilities&&R.utilities.length>0?R.utilities[0]:"No items"),s(Array.isArray(R.utilities)?R.utilities:[]),a({currentPage:((T=R.meta)==null?void 0:T.page)||1,totalPages:((O=R.meta)==null?void 0:O.totalPages)||1,limit:(($=R.meta)==null?void 0:$.limit)||10,total:((Y=R.meta)==null?void 0:Y.total)||0})}catch(A){console.error("Failed to load readings:",A),P.error("Không thể tải danh sách chỉ số tiện ích"),b("Không thể tải danh sách chỉ số tiện ích"),s([]),a({currentPage:1,totalPages:1,limit:10,total:0})}finally{n(!1)}},[l,g]);v.useEffect(()=>{p(),j()},[p,j]),v.useEffect(()=>{N()},[N]);const C=(T,O)=>{console.log(`Setting ${T} filter to:`,O),y({...g,[T]:O}),l!==1&&c(1)},E=T=>{const{name:O,value:$}=T.target;C(O,$)};v.useEffect(()=>{g.roomNumber?f([{id:"",number:"Tất cả phòng"},...h.filter(T=>T.number===g.roomNumber)]):f([{id:"",number:"Tất cả phòng"},...h.filter(T=>T.id)])},[g.roomNumber,h]);const S=async T=>{if(window.confirm("Bạn có chắc chắn muốn xóa chỉ số này không?"))try{await Kn.deleteUtilityReading(T),P.success("Xóa chỉ số thành công"),N()}catch(O){console.error("Failed to delete reading:",O),P.error("Không thể xóa chỉ số")}},k=T=>{c(T)},_=v.useMemo(()=>[{Header:"Kỳ",accessor:"billingMonth",Cell:({row:T})=>o.jsx("span",{children:`${T.original.billingMonth}/${T.original.billingYear}`})},{Header:"Loại",accessor:"type",Cell:({value:T})=>o.jsxs("div",{className:"flex items-center justify-center",children:[uT(T),o.jsx("span",{children:hT(T)})]})},{Header:"Phòng",accessor:"room.number",Cell:({row:T})=>{var O,$;return o.jsx("span",{className:"font-medium",children:(O=T.original.room)!=null&&O.number?`${T.original.room.number} (${(($=T.original.room.building)==null?void 0:$.name)||"N/A"})`:"-"})}},{Header:"Chỉ số",accessor:"indexValue",Cell:({value:T,row:O})=>o.jsxs("span",{className:"font-medium",children:[parseFloat(T).toLocaleString("vi-VN")," ",fT(O.original.type)]})},{Header:"Ngày lấy",accessor:"readingDate",Cell:({value:T})=>mT(T)},{Header:"Thao tác",id:"actions",Cell:({row:T})=>o.jsxs("div",{className:"flex space-x-2 justify-center",children:[o.jsx(U,{variant:"icon",onClick:()=>e(`/utilities/readings/edit/${T.original.id}`),tooltip:"Cập nhật",children:o.jsx(Pt,{className:"h-5 w-5 text-indigo-600 hover:text-indigo-800"})}),o.jsx(U,{variant:"icon",onClick:()=>S(T.original.id),tooltip:"Xóa",children:o.jsx(Mt,{className:"h-5 w-5 text-red-600 hover:text-red-800"})})]})}],[e]);return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[o.jsx("h1",{className:"text-2xl font-semibold",children:"Quản lý chỉ số tiện ích"}),o.jsxs(U,{variant:"primary",onClick:()=>e("/utilities/readings/create"),children:[o.jsx(qi,{className:"h-5 w-5 mr-1 inline-block"}),o.jsx("span",{className:"inline-block",children:"Thêm chỉ số mới"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-md shadow-sm",children:[o.jsx(D,{label:"Số phòng",id:"roomNumber",name:"roomNumber",value:g.roomNumber,onChange:E,placeholder:"Nhập số phòng..."}),o.jsx(ce,{label:"Loại tiện ích",id:"type",name:"type",value:g.type,onChange:T=>C("type",T),options:dT}),o.jsxs("div",{children:[o.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Tháng"}),o.jsx(D,{type:"number",id:"month",name:"month",min:"1",max:"12",value:g.month,onChange:E,placeholder:"1-12"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Năm"}),o.jsx(D,{type:"text",id:"year",name:"year",value:g.year,onChange:E,placeholder:"Tất cả"})]})]}),t?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{})}):w?o.jsxs("div",{className:"text-red-600 bg-red-100 p-4 rounded",children:["Lỗi: ",w]}):o.jsxs(o.Fragment,{children:[!1,o.jsx(Bt,{columns:_,data:r||[],currentPage:l,totalPages:i.totalPages,onPageChange:k,totalRecords:i.total,recordsPerPage:i.limit,showingText:`Hiển thị chỉ số ${(l-1)*i.limit+1} - ${Math.min(l*i.limit,i.total)}`,recordsText:"chỉ số",pageText:"Trang"})]})]})},pT=[{value:"ELECTRICITY",label:"Điện"},{value:"WATER",label:"Nước"}],xT=[{value:"pending",label:"Chờ xử lý"},{value:"completed",label:"Hoàn thành"}],ng=()=>{const{id:e}=Sn(),t=se(),n=!!e,[r,s]=v.useState({dormitoryId:"",roomId:"",studentId:"",type:"ELECTRICITY",value:0,month:new Date().getMonth()+1,year:new Date().getFullYear(),readingTime:Ce(new Date,"yyyy-MM-dd'T'HH:mm"),status:"pending"}),[i,a]=v.useState([]),[l,c]=v.useState([]),[u,d]=v.useState([]),[h,m]=v.useState(!0),[x,f]=v.useState(!1),[w,b]=v.useState({});v.useEffect(()=>{(async()=>{var k,_,T;m(!0);try{const O=await nn.getAllBuildings({limit:1e3});if(a(O.dormitories||[]),n){const $=await Kn.getUtilityReadingById(e);if($.dormitoryId){const Y=await Ve.getAllRooms({buildingId:$.dormitoryId,limit:1e3});c(Y||[])}s({dormitoryId:((k=$.dormitoryId)==null?void 0:k.toString())||"",roomId:((_=$.roomId)==null?void 0:_.toString())||"",studentId:((T=$.studentId)==null?void 0:T.toString())||"",type:$.type||"ELECTRICITY",value:$.value??0,month:$.month??new Date().getMonth()+1,year:$.year??new Date().getFullYear(),readingTime:$.readingTime?Ce(De($.readingTime),"yyyy-MM-dd'T'HH:mm"):Ce(new Date,"yyyy-MM-dd'T'HH:mm"),status:$.status||"pending"})}else m(!1)}catch(O){console.error("Lỗi tải dữ liệu form điện nước:",O),P.error("Không thể tải dữ liệu cần thiết."),n&&t("/utilities")}finally{n||m(!1)}})()},[e,n,t]),v.useEffect(()=>{(async()=>{if(r.dormitoryId)try{const k=await Ve.getAllRooms({buildingId:r.dormitoryId,limit:1e3});c(k||[]),(!n||!l.some(_=>_.id.toString()===r.roomId))&&s(_=>({..._,roomId:""}))}catch(k){console.error("Lỗi tải phòng theo tòa nhà:",k),c([])}else c([]),s(k=>({...k,roomId:""}))})()},[r.dormitoryId,n]);const g=S=>{const{name:k,value:_}=S.target;s(T=>({...T,[k]:_})),w[k]&&b(T=>({...T,[k]:null}))},y=S=>{const{value:k}=S.target;s(_=>({..._,dormitoryId:k,roomId:"",studentId:""})),c([]),d([])},p=S=>{const{value:k}=S.target;s(_=>({..._,roomId:k,studentId:""})),d([])},j=async S=>{if(S.preventDefault(),f(!0),b({}),!r.type){b({type:"Vui lòng chọn loại tiện ích."}),f(!1);return}if(!r.dormitoryId){b({dormitoryId:"Vui lòng chọn tòa nhà."}),f(!1);return}if(!r.roomId){b({roomId:"Vui lòng chọn phòng."}),f(!1);return}if(r.value<0){b({value:"Chỉ số không hợp lệ."}),f(!1);return}try{const k={type:r.type,value:parseFloat(r.value)||0,month:parseInt(r.month),year:parseInt(r.year),readingTime:r.readingTime,status:r.status,roomId:r.roomId?parseInt(r.roomId):null,dormitoryId:r.dormitoryId?parseInt(r.dormitoryId):null,studentId:r.studentId?parseInt(r.studentId):null};n?(await Kn.updateUtilityReading(e,k),P.success("Cập nhật chỉ số thành công!")):(await Kn.createUtilityReading(k),P.success("Thêm chỉ số thành công!")),t("/utilities")}catch(k){console.error("Lỗi lưu chỉ số:",k);const _=(k==null?void 0:k.message)||(n?"Cập nhật thất bại.":"Thêm mới thất bại.");P.error(_)}finally{f(!1)}},N=[{value:"",label:"-- Chọn tòa nhà --"},...i.map(S=>({value:S.id.toString(),label:S.name}))],C=[{value:"",label:"-- Chọn phòng --"},...l.map(S=>({value:S.id.toString(),label:S.number}))],E=[{value:"",label:"-- Chọn sinh viên --"},...u.map(S=>({value:S.id.toString(),label:S.name}))];return o.jsxs("div",{className:"space-y-6 max-w-3xl mx-auto",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(U,{onClick:()=>t("/utilities"),icon:ut,variant:"outline",className:"!p-2",children:o.jsx("span",{className:"sr-only",children:"Quay lại"})}),o.jsx("h1",{className:"text-2xl font-semibold",children:n?"Cập nhật chỉ số":"Thêm chỉ số mới"})]}),h?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{})}):o.jsxs("form",{onSubmit:j,className:"bg-white shadow-md rounded-lg p-6 space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(ce,{id:"dormitoryId",name:"dormitoryId",label:"Tòa nhà",value:r.dormitoryId,onChange:y,options:N,placeholder:"Chọn tòa nhà...",error:w.dormitoryId,required:!0}),o.jsx(ce,{id:"roomId",name:"roomId",label:"Phòng",value:r.roomId,onChange:p,options:C,placeholder:"Chọn phòng...",error:w.roomId,disabled:!r.dormitoryId||C.length<=1,required:!0}),o.jsx(ce,{id:"studentId",name:"studentId",label:"Sinh viên",value:r.studentId,onChange:g,options:E,placeholder:"Chọn sinh viên...",error:w.studentId,disabled:!r.roomId||E.length<=1}),o.jsx(ce,{id:"type",name:"type",label:"Loại tiện ích",value:r.type,onChange:g,options:pT,error:w.type,required:!0}),o.jsx(D,{id:"value",name:"value",type:"number",label:`Chỉ số ${r.type==="ELECTRICITY"?"(kWh)":"(m³)"}`,value:r.value,onChange:g,min:"0",step:"0.01",placeholder:"Nhập chỉ số...",error:w.value,required:!0}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx(D,{id:"month",name:"month",type:"number",label:"Tháng",value:r.month,onChange:g,min:"1",max:"12",placeholder:"Tháng...",error:w.month,required:!0}),o.jsx(D,{id:"year",name:"year",type:"number",label:"Năm",value:r.year,onChange:g,min:"2020",max:"2050",placeholder:"Năm...",error:w.year,required:!0})]}),o.jsx(D,{id:"readingTime",name:"readingTime",type:"datetime-local",label:"Thời điểm đọc",value:r.readingTime,onChange:g,error:w.readingTime,required:!0}),o.jsx(ce,{id:"status",name:"status",label:"Trạng thái",value:r.status,onChange:g,options:xT,error:w.status,required:!0})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsx(U,{type:"button",variant:"outline",onClick:()=>t("/utilities"),disabled:x,children:"Hủy"}),o.jsxs(U,{type:"submit",disabled:x,children:[x?o.jsx(ee,{size:"sm",className:"mr-2"}):null,n?"Cập nhật":"Thêm mới"]})]})]})]})},yT=[{value:"ELECTRICITY",label:"Điện"},{value:"WATER",label:"Nước"},{value:"OTHER",label:"Khác"}],vT=()=>{var G,X,Be;const e=se(),[t,n]=v.useState("electricity"),[r,s]=v.useState(!1),[i,a]=v.useState(!0),[l,c]=v.useState([]),[u,d]=v.useState([]),[h,m]=v.useState([]),[x,f]=v.useState([]),w=new Date,b=w.getMonth()+1,g=w.getFullYear(),y=w.toISOString().split("T")[0],[p,j]=v.useState({roomId:"",buildingId:"",type:"ELECTRICITY",indexValue:"",readingDate:y,billingMonth:b,billingYear:g,notes:"",tempRoomNumber:""}),[N,C]=v.useState({roomId:"",buildingId:"",type:"WATER",indexValue:"",readingDate:y,billingMonth:b,billingYear:g,notes:"",tempRoomNumber:""}),[E,S]=v.useState({roomId:"",buildingId:"",type:"OTHER",indexValue:"",readingDate:y,billingMonth:b,billingYear:g,notes:"",reason:"",tempRoomNumber:""}),k=v.useCallback(async()=>{try{const I=await nn.getAllBuildings();c([{id:"",name:"Chọn tòa nhà"},...Array.isArray(I.buildings)?I.buildings:[]])}catch(I){console.error("Failed to load buildings:",I),P.error("Không thể tải danh sách tòa nhà")}},[]),_=v.useCallback(async()=>{a(!0);try{const q=(await Ve.getAllRooms({limit:1e3,includeInactive:!1})).rooms||[];console.log(`Loaded ${q.length} rooms from API`),d(q);const Z={type:"ELECTRICITY",month:b,year:g},ie=await Kn.getAllUtilityReadings(Z),sr=new Set((ie.utilities||[]).map(ir=>ir.roomId)),Jx={type:"WATER",month:b,year:g},ey=await Kn.getAllUtilityReadings(Jx),ty=new Set((ey.utilities||[]).map(ir=>ir.roomId));m(q.filter(ir=>!sr.has(ir.id))),f(q.filter(ir=>!ty.has(ir.id)))}catch(I){console.error("Failed to load rooms with reading status:",I),P.error("Không thể tải danh sách phòng và trạng thái ghi chỉ số")}finally{a(!1)}},[b,g]);v.useEffect(()=>{k(),_()},[k,_]);const T=(I,q)=>{j(Z=>({...Z,[I]:q}))},O=(I,q)=>{C(Z=>({...Z,[I]:q}))},$=(I,q)=>{S(Z=>({...Z,[I]:q}))},Y=I=>{j(q=>({...q,roomId:I.id,buildingId:I.buildingId}))},A=I=>{C(q=>({...q,roomId:I.id,buildingId:I.buildingId}))},R=async I=>{I.preventDefault(),await B(p,"electricity")},H=async I=>{I.preventDefault(),await B(N,"water")},L=async I=>{I.preventDefault();const q={...E,notes:`Lý do: ${E.reason}${E.notes?`
Ghi chú: ${E.notes}`:""}`};await B(q,"other")},B=async(I,q)=>{var Z,ie;if(!I.roomId){P.error("Vui lòng chọn phòng");return}if(!I.type){P.error("Vui lòng chọn loại tiện ích");return}if(!I.indexValue||isNaN(I.indexValue)||parseFloat(I.indexValue)<0){P.error("Vui lòng nhập chỉ số hợp lệ");return}s(!0);try{const sr={roomId:I.roomId,type:I.type,indexValue:parseFloat(I.indexValue),readingDate:I.readingDate,billingMonth:I.billingMonth,billingYear:I.billingYear,notes:I.notes};await Kn.createUtilityReading(sr),P.success("Thêm chỉ số tiện ích thành công"),await _(),q==="electricity"?j({...p,roomId:"",buildingId:"",indexValue:"",notes:"",tempRoomNumber:""}):q==="water"?C({...N,roomId:"",buildingId:"",indexValue:"",notes:"",tempRoomNumber:""}):S({...E,roomId:"",buildingId:"",indexValue:"",notes:"",reason:"",tempRoomNumber:""})}catch(sr){console.error("Failed to create utility reading:",sr),(ie=(Z=sr.response)==null?void 0:Z.data)!=null&&ie.message?P.error(sr.response.data.message):P.error("Không thể thêm chỉ số tiện ích")}finally{s(!1)}},z=I=>{switch(I){case"ELECTRICITY":return"kWh";case"WATER":return"m³";default:return""}};return o.jsxs("div",{className:"container mx-auto px-4 py-6",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("button",{onClick:()=>e("/utilities"),className:"mr-4 p-2 rounded-full hover:bg-gray-200",children:o.jsx(ut,{className:"h-6 w-6"})}),o.jsx("h1",{className:"text-2xl font-bold",children:"Thêm chỉ số tiện ích"})]}),o.jsxs(Dd,{activeTab:t,onChange:n,children:[o.jsx(Zt,{id:"electricity",label:o.jsxs("div",{className:"flex items-center",children:[o.jsx(ix,{className:"h-5 w-5 mr-1 text-yellow-500"}),"Điện"]}),children:o.jsx(Ee,{className:"mt-4",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"border-r pr-4",children:[o.jsxs("h3",{className:"font-medium text-lg mb-3",children:["Phòng chưa ghi chỉ số điện tháng ",b,"/",g]}),i?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx(ee,{})}):h.length>0?o.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:h.map(I=>{var q;return o.jsxs("div",{className:`p-2 border rounded mb-2 cursor-pointer flex justify-between items-center ${p.roomId===I.id?"bg-blue-50 border-blue-500":"hover:bg-gray-50"}`,onClick:()=>Y(I),children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:I.number}),o.jsx("div",{className:"text-sm text-gray-600",children:(q=I.building)==null?void 0:q.name})]}),o.jsx(Rf,{className:"h-5 w-5 text-blue-500"})]},I.id)})}):o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(mu,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),o.jsx("p",{children:"Tất cả phòng đã ghi chỉ số điện cho tháng này!"})]})]}),o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("form",{onSubmit:R,children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block mb-2 font-medium",children:"Tòa nhà"}),o.jsx(ce,{placeholder:"Chọn tòa nhà",value:p.buildingId,onChange:I=>T("buildingId",I),options:l.map(I=>({value:I.id,label:I.name}))})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block mb-2 font-medium",children:["Phòng ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(D,{type:"text",placeholder:"Nhập số phòng",value:p.tempRoomNumber||p.roomId&&((G=u.find(I=>I.id===p.roomId))==null?void 0:G.number)||"",onChange:I=>{const q=I.target.value;j(ie=>({...ie,tempRoomNumber:q})),console.log("Đang tìm phòng:",q),console.log("Tòa nhà đã chọn:",p.buildingId);const Z=p.buildingId?u.find(ie=>String(ie.number).trim()===String(q).trim()&&String(ie.buildingId)===String(p.buildingId)):u.find(ie=>String(ie.number).trim()===String(q).trim());Z?(T("roomId",Z.id),p.buildingId||T("buildingId",Z.buildingId)):T("roomId","")},required:!0}),p.roomId&&o.jsx($t,{color:"green",className:"mt-1",children:"Phòng hợp lệ"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block mb-2 font-medium",children:["Chỉ số điện ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(D,{type:"number",step:"0.01",min:"0",placeholder:"Nhập chỉ số",value:p.indexValue,onChange:I=>T("indexValue",I.target.value),required:!0}),o.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"kWh"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block mb-2 font-medium",children:["Ngày ghi ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(D,{type:"date",value:p.readingDate,onChange:I=>T("readingDate",I.target.value),required:!0})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block mb-2 font-medium",children:"Ghi chú"}),o.jsx(tn,{placeholder:"Nhập ghi chú",value:p.notes,onChange:I=>T("notes",I.target.value),rows:3})]}),o.jsxs("div",{className:"flex justify-end",children:[o.jsx(U,{type:"button",variant:"secondary",className:"mr-2",onClick:()=>e("/utilities"),children:"Quay lại"}),o.jsx(U,{type:"submit",variant:"primary",loading:r,disabled:!p.roomId||!p.indexValue,children:"Lưu chỉ số điện"})]})]})})]})})}),o.jsx(Zt,{id:"water",label:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Zx,{className:"h-5 w-5 mr-1 text-blue-500"}),"Nước"]}),children:o.jsx(Ee,{className:"mt-4",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"border-r pr-4",children:[o.jsxs("h3",{className:"font-medium text-lg mb-3",children:["Phòng chưa ghi chỉ số nước tháng ",b,"/",g]}),i?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx(ee,{})}):x.length>0?o.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:x.map(I=>{var q;return o.jsxs("div",{className:`p-2 border rounded mb-2 cursor-pointer flex justify-between items-center ${N.roomId===I.id?"bg-blue-50 border-blue-500":"hover:bg-gray-50"}`,onClick:()=>A(I),children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:I.number}),o.jsx("div",{className:"text-sm text-gray-600",children:(q=I.building)==null?void 0:q.name})]}),o.jsx(Rf,{className:"h-5 w-5 text-blue-500"})]},I.id)})}):o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(mu,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),o.jsx("p",{children:"Tất cả phòng đã ghi chỉ số nước cho tháng này!"})]})]}),o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("form",{onSubmit:H,children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block mb-2 font-medium",children:"Tòa nhà"}),o.jsx(ce,{placeholder:"Chọn tòa nhà",value:N.buildingId,onChange:I=>O("buildingId",I),options:l.map(I=>({value:I.id,label:I.name}))})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block mb-2 font-medium",children:["Phòng ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(D,{type:"text",placeholder:"Nhập số phòng",value:N.tempRoomNumber||N.roomId&&((X=u.find(I=>I.id===N.roomId))==null?void 0:X.number)||"",onChange:I=>{const q=I.target.value;C(ie=>({...ie,tempRoomNumber:q})),console.log("Đang tìm phòng:",q),console.log("Tòa nhà đã chọn:",N.buildingId);const Z=N.buildingId?u.find(ie=>String(ie.number).trim()===String(q).trim()&&String(ie.buildingId)===String(N.buildingId)):u.find(ie=>String(ie.number).trim()===String(q).trim());Z?(O("roomId",Z.id),N.buildingId||O("buildingId",Z.buildingId)):O("roomId","")},required:!0}),N.roomId&&o.jsx($t,{color:"green",className:"mt-1",children:"Phòng hợp lệ"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block mb-2 font-medium",children:["Chỉ số nước ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(D,{type:"number",step:"0.01",min:"0",placeholder:"Nhập chỉ số",value:N.indexValue,onChange:I=>O("indexValue",I.target.value),required:!0}),o.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"m³"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block mb-2 font-medium",children:["Ngày ghi ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(D,{type:"date",value:N.readingDate,onChange:I=>O("readingDate",I.target.value),required:!0})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block mb-2 font-medium",children:"Ghi chú"}),o.jsx(tn,{placeholder:"Nhập ghi chú",value:N.notes,onChange:I=>O("notes",I.target.value),rows:3})]}),o.jsxs("div",{className:"flex justify-end",children:[o.jsx(U,{type:"button",variant:"secondary",className:"mr-2",onClick:()=>e("/utilities"),children:"Quay lại"}),o.jsx(U,{type:"submit",variant:"primary",loading:r,disabled:!N.roomId||!N.indexValue,children:"Lưu chỉ số nước"})]})]})})]})})}),o.jsx(Zt,{id:"other",label:"Khác",children:o.jsxs(Ee,{className:"mt-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block mb-2 font-medium",children:"Tòa nhà"}),o.jsx(ce,{placeholder:"Chọn tòa nhà",value:E.buildingId,onChange:I=>$("buildingId",I),options:l.map(I=>({value:I.id,label:I.name}))})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block mb-2 font-medium",children:["Phòng ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(D,{type:"text",placeholder:"Nhập số phòng",value:E.tempRoomNumber||E.roomId&&((Be=u.find(I=>I.id===E.roomId))==null?void 0:Be.number)||"",onChange:I=>{const q=I.target.value;S(ie=>({...ie,tempRoomNumber:q})),console.log("Đang tìm phòng:",q),console.log("Tòa nhà đã chọn:",E.buildingId);const Z=E.buildingId?u.find(ie=>String(ie.number).trim()===String(q).trim()&&String(ie.buildingId)===String(E.buildingId)):u.find(ie=>String(ie.number).trim()===String(q).trim());Z?($("roomId",Z.id),E.buildingId||$("buildingId",Z.buildingId)):$("roomId","")},required:!0}),E.roomId&&o.jsx($t,{color:"green",className:"mt-1",children:"Phòng hợp lệ"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block mb-2 font-medium",children:["Loại tiện ích ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(ce,{placeholder:"Chọn loại tiện ích",value:E.type,onChange:I=>$("type",I),options:yT,required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block mb-2 font-medium",children:["Lý do ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(D,{type:"text",placeholder:"Nhập lý do tạo chỉ số",value:E.reason,onChange:I=>$("reason",I.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block mb-2 font-medium",children:["Chỉ số ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(D,{type:"number",step:"0.01",min:"0",placeholder:"Nhập chỉ số",value:E.indexValue,onChange:I=>$("indexValue",I.target.value),required:!0}),o.jsx("span",{className:"text-xs text-gray-500",children:z(E.type)})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block mb-2 font-medium",children:["Ngày ghi ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(D,{type:"date",value:E.readingDate,onChange:I=>$("readingDate",I.target.value),required:!0})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block mb-2 font-medium",children:"Ghi chú thêm"}),o.jsx(tn,{placeholder:"Nhập ghi chú",value:E.notes,onChange:I=>$("notes",I.target.value),rows:3})]})]}),o.jsxs("div",{className:"flex justify-end",children:[o.jsx(U,{type:"button",variant:"secondary",className:"mr-2",onClick:()=>e("/utilities"),children:"Quay lại"}),o.jsx(U,{type:"button",variant:"primary",loading:r,disabled:!E.roomId||!E.indexValue||!E.reason,onClick:L,children:"Lưu"})]})]})})]})]})},bT=async(e={})=>{var t,n,r,s;try{const i=await W.get("/api/vehicles",{params:e});if(((t=i.data)==null?void 0:t.status)==="success")return{vehicles:i.data.data||[],meta:{total:i.data.total||0,count:i.data.results||0,page:e.page||1,limit:e.limit||10,totalPages:Math.ceil((i.data.total||0)/(e.limit||10))}};throw new Error(((n=i.data)==null?void 0:n.message)||"Lấy danh sách xe thất bại.")}catch(i){throw console.error("Lỗi service getAllVehicles:",((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},wT=async e=>{var t,n,r,s;try{const i=await W.get(`/api/vehicles/${e}`);if(((t=i.data)==null?void 0:t.status)==="success")return i.data.data;throw new Error(((n=i.data)==null?void 0:n.message)||`Không tìm thấy xe với ID ${e}.`)}catch(i){throw console.error(`Lỗi service getVehicleById (${e}):`,((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},jT=async e=>{var t,n,r,s,i,a;try{const l=await W.post("/api/vehicles",e);if(((t=l.data)==null?void 0:t.status)==="success")return l.data.data;throw new Error(((n=l.data)==null?void 0:n.message)||"Đăng ký xe mới thất bại.")}catch(l){throw console.error("Lỗi service createVehicle:",((r=l.response)==null?void 0:r.data)||l.message),(i=(s=l.response)==null?void 0:s.data)!=null&&i.errors?l.response.data:((a=l.response)==null?void 0:a.data)||l}},NT=async(e,t)=>{var n,r,s,i,a,l;try{const c={...t};delete c.licensePlate,delete c.ownerId;const u=await W.put(`/api/vehicles/${e}`,c);if(((n=u.data)==null?void 0:n.status)==="success")return u.data.data;throw new Error(((r=u.data)==null?void 0:r.message)||"Cập nhật thông tin xe thất bại.")}catch(c){throw console.error(`Lỗi service updateVehicle (${e}):`,((s=c.response)==null?void 0:s.data)||c.message),(a=(i=c.response)==null?void 0:i.data)!=null&&a.errors?c.response.data:((l=c.response)==null?void 0:l.data)||c}},ST=async e=>{var t,n,r,s;try{const i=await W.delete(`/api/vehicles/${e}`);if(((t=i.data)==null?void 0:t.status)==="success")return i.data;throw new Error(((n=i.data)==null?void 0:n.message)||"Xóa thông tin xe thất bại.")}catch(i){throw console.error(`Lỗi service deleteVehicle (${e}):`,((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},hi={getAllVehicles:bT,getVehicleById:wT,createVehicle:jT,updateVehicle:NT,deleteVehicle:ST},rg=[{value:"",label:"Tất cả loại xe"},{value:"MOTORBIKE",label:"Xe máy"},{value:"BICYCLE",label:"Xe đạp"},{value:"CAR",label:"Ô tô"},{value:"ELECTRIC_SCOOTER",label:"Xe máy điện"}],CT=[{value:"",label:"Tất cả trạng thái"},{value:"active",label:"Đang hoạt động"},{value:"inactive",label:"Không hoạt động"}],kT=()=>{const[e,t]=v.useState([]),[n,r]=v.useState({}),[s,i]=v.useState(!0),[a,l]=v.useState(null),[c,u]=v.useState({currentPage:1,totalPages:1,limit:10,total:0}),[d,h]=v.useState(1),[m,x]=v.useState({type:"",status:"",search:""}),f=ms(m.search,500),w=se(),b=v.useCallback(async(N=1,C,E="")=>{var S;i(!0),l(null);try{console.log("Current filters:",C);const k={page:N,limit:c.limit,vehicleType:C.type||void 0,isActive:C.status==="active"?!0:C.status==="inactive"?!1:void 0,licensePlate:E||void 0};console.log("API params:",k);const _=await hi.getAllVehicles(k),T=_.vehicles||[];t(T),u($=>({...$,..._.meta})),h(((S=_.meta)==null?void 0:S.page)||1);const O=[...new Set(T.map($=>$.ownerId).filter($=>$&&!n[$]))];if(O.length>0){const $=O.map(A=>Et.getStudentById(A).catch(()=>null)),Y=await Promise.all($);r(A=>{const R={...A};return Y.forEach(H=>{H&&(R[H.id]=H.fullName||`ID: ${H.id}`)}),R})}}catch(k){console.error("Error fetching vehicles:",k),l("Không thể tải danh sách xe.")}finally{i(!1)}},[c.limit,n]);v.useEffect(()=>{b(d,m,f)},[b,d,m,f]);const g=N=>{const C=N.target?N.target.name:N.name,E=N.target?N.target.value:N;x(S=>({...S,[C]:E})),h(1)},y=N=>{N>0&&N<=c.totalPages&&(h(N),window.scrollTo({top:0,behavior:"smooth"}))},p=async(N,C)=>{if(window.confirm(`Bạn có chắc muốn xóa thông tin xe có biển số "${C||"N/A"}" không?`))try{await hi.deleteVehicle(N),P.success(`Đã xóa thông tin xe "${C||"N/A"}"!`),b(d,m,f)}catch(E){P.error((E==null?void 0:E.message)||"Xóa thông tin xe thất bại.")}},j=v.useMemo(()=>[{Header:"No.",accessor:"parkingCardNo",Cell:({value:N})=>o.jsx("span",{className:"font-mono font-semibold",children:N||"N/A"})},{Header:"Sinh Viên",accessor:"studentProfile",Cell:({value:N})=>o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:(N==null?void 0:N.studentId)||"N/A"}),o.jsx("div",{className:"text-sm text-gray-600",children:(N==null?void 0:N.phoneNumber)||"N/A"})]})},{Header:"Loại xe",accessor:"vehicleType",Cell:({value:N})=>{var E;const C=((E=rg.find(S=>S.value===N))==null?void 0:E.label)||N;return o.jsx("span",{className:"capitalize",children:C})}},{Header:"Biển số",accessor:"licensePlate",Cell:({value:N})=>o.jsx("span",{className:"font-mono font-semibold",children:N})},{Header:"Hãng(Model)",accessor:"brand",Cell:({value:N,row:C})=>{const E=N||"",S=C.original.model||"";return o.jsxs("span",{children:[E,E&&S?" - ":"",S]})}},{Header:"Màu",accessor:"color"},{Header:"Trạng thái",accessor:"isActive",Cell:({value:N})=>o.jsx($t,{color:N?"green":"gray",children:N?"Active":"Inactive"})},{Header:"Ngày đăng ký",accessor:"registrationDate",Cell:({value:N,row:C})=>{const E=C.original.startDate||N;return E?Ce(De(E),"dd/MM/yyyy"):"N/A"}},{Header:"Hành động",accessor:"actions",Cell:({row:N})=>o.jsxs("div",{className:"flex space-x-2 justify-center",children:[o.jsx(U,{variant:"icon",onClick:()=>w(`/vehicles/${N.original.id}/edit`),tooltip:"Chỉnh sửa",children:o.jsx(Pt,{className:"h-5 w-5 text-yellow-600 hover:text-yellow-800"})}),o.jsx(U,{variant:"icon",onClick:()=>p(N.original.id,N.original.licensePlate),tooltip:"Xóa",children:o.jsx(Mt,{className:"h-5 w-5 text-red-600 hover:text-red-800"})})]})}],[w]);return o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex flex-wrap justify-between items-center gap-4",children:o.jsx("h1",{className:"text-2xl font-semibold",children:"Quản lý Xe đăng ký"})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-md shadow-sm",children:[o.jsx(D,{label:"Tìm biển số",id:"search",name:"search",placeholder:"30-B2-97369",value:m.search,onChange:g}),o.jsx(ce,{label:"Loại xe",id:"type",name:"type",value:m.type,onChange:N=>{console.log("Vehicle type changed:",N),x(C=>({...C,type:N})),h(1)},options:rg}),o.jsx(ce,{label:"Trạng thái",id:"status",name:"status",value:m.status,onChange:N=>{console.log("Status changed:",N),x(C=>({...C,status:N})),h(1)},options:CT})]}),s?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{})}):a?o.jsxs("div",{className:"text-red-600 bg-red-100 p-4 rounded",children:["Lỗi: ",a]}):e.length===0?o.jsx("div",{className:"text-gray-600 bg-gray-100 p-4 rounded text-center",children:"Không tìm thấy xe nào đăng ký."}):o.jsx(Bt,{columns:j,data:e,currentPage:d,totalPages:c.totalPages,onPageChange:y,totalRecords:c.total,recordsPerPage:c.limit,showingText:`Hiển thị xe ${(d-1)*c.limit+1} - ${Math.min(d*c.limit,c.total)}`,recordsText:"xe",pageText:"Trang"})]})},ET=[],_T=[],sg=({mode:e="create"})=>{const{id:t}=Sn();bt();const n=se(),r=e==="edit"&&!!t,[s,i]=v.useState({type:"motorcycle",licensePlate:"",model:"",color:"",status:"active"}),[a,l]=v.useState(r),[c,u]=v.useState(!1),[d,h]=v.useState({}),[m,x]=v.useState("");v.useEffect(()=>{r?(l(!0),hi.getVehicleById(t).then(b=>{i({type:b.type||"motorcycle",licensePlate:b.licensePlate||"",model:b.model||"",color:b.color||"",status:b.status||"active"}),b.ownerId&&x(`ID Chủ xe: ${b.ownerId}`)}).catch(b=>{P.error(`Không thể tải thông tin xe (ID: ${t}).`),n("/vehicles")}).finally(()=>l(!1))):l(!1)},[t,r,n]);const f=b=>{const{name:g,value:y}=b.target;i(p=>({...p,[g]:y})),d[g]&&h(p=>({...p,[g]:null}))},w=async b=>{if(b.preventDefault(),u(!0),h({}),s.type,!s.licensePlate.trim()){h({licensePlate:"Vui lòng nhập biển số xe."}),u(!1);return}if(!s.model.trim()){h({model:"Vui lòng nhập hãng/model xe."}),u(!1);return}if(!s.color.trim()){h({color:"Vui lòng nhập màu xe."}),u(!1);return}try{const g={type:s.type,model:s.model,color:s.color,status:s.status};r?(g.status=s.status,await hi.updateVehicle(t,g),P.success("Cập nhật thông tin xe thành công!"),n("/vehicles")):(g.licensePlate=s.licensePlate,await hi.createVehicle(g),P.success("Đăng ký xe thành công!"),n("/profile"))}catch(g){console.error("Lỗi lưu thông tin xe:",g);const y=(g==null?void 0:g.message)||(r?"Cập nhật thất bại.":"Đăng ký thất bại.");g!=null&&g.errors&&Array.isArray(g.errors)||P.error(y)}finally{u(!1)}};return a?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{})}):o.jsxs("div",{className:"space-y-6 max-w-lg mx-auto",children:[o.jsxs("div",{children:[o.jsx(U,{variant:"link",onClick:()=>n(r?"/vehicles":-1),icon:ut,className:"text-sm mb-4",children:"Quay lại"}),o.jsx("h1",{className:"text-2xl font-semibold",children:r?`Chỉnh sửa Xe (${s.licensePlate})`:"Đăng ký Xe mới"}),r&&m&&o.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Chủ xe: ",m]}),!r&&o.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Điền thông tin xe bạn muốn đăng ký gửi trong ký túc xá."})]}),o.jsxs("form",{onSubmit:w,className:"bg-white shadow sm:rounded-lg p-6 space-y-6",children:[!r&&o.jsx(D,{label:"Biển số xe *",id:"licensePlate",name:"licensePlate",required:!0,value:s.licensePlate,onChange:f,disabled:c,error:d.licensePlate,placeholder:"Ví dụ: 29A-12345",uppercase:!0}),o.jsx(ce,{label:"Loại xe *",id:"type",name:"type",required:!0,value:s.type,onChange:f,options:ET,disabled:c,error:d.type}),o.jsx(D,{label:"Hãng xe / Model *",id:"model",name:"model",required:!0,value:s.model,onChange:f,disabled:c,error:d.model,placeholder:"Ví dụ: Honda Wave Alpha, Vinfast Fadil..."}),o.jsx(D,{label:"Màu sắc *",id:"color",name:"color",required:!0,value:s.color,onChange:f,disabled:c,error:d.color,placeholder:"Ví dụ: Đen, Trắng bạc,..."}),r&&o.jsx(ce,{label:"Trạng thái",id:"status",name:"status",value:s.status,onChange:f,options:_T,disabled:c,error:d.status}),o.jsxs("div",{className:"flex justify-end gap-3 pt-5 border-t border-gray-200",children:[o.jsx(U,{variant:"secondary",onClick:()=>n(r?"/vehicles":-1),disabled:c,children:"Hủy"}),o.jsx(U,{type:"submit",isLoading:c,disabled:c,children:r?"Lưu thay đổi":"Đăng ký xe"})]})]})]})},TT=async(e={})=>{var t,n,r,s;try{e.status&&console.log("Sending status to backend:",e.status);const i=await W.get("/api/transfers",{params:e});if(((t=i.data)==null?void 0:t.status)==="success")return{transfers:i.data.data||[],meta:{total:i.data.total||0,count:i.data.results||0,page:e.page||1,limit:e.limit||10,totalPages:Math.ceil((i.data.total||0)/(e.limit||10))}};throw new Error(((n=i.data)==null?void 0:n.message)||"Lấy danh sách yêu cầu chuyển phòng thất bại.")}catch(i){throw console.error("Lỗi service getAllTransferRequests:",((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},PT=async e=>{var t,n,r,s;try{const i=await W.get(`/api/transfers/${e}`);if(((t=i.data)==null?void 0:t.status)==="success")return i.data.data;throw new Error(((n=i.data)==null?void 0:n.message)||`Không tìm thấy yêu cầu chuyển phòng với ID ${e}.`)}catch(i){throw console.error(`Lỗi service getTransferRequestById (${e}):`,((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},MT=async e=>{var t,n,r,s,i,a;try{const l=await W.post("/api/transfers",e);if(((t=l.data)==null?void 0:t.status)==="success")return l.data.data;throw new Error(((n=l.data)==null?void 0:n.message)||"Gửi yêu cầu chuyển phòng thất bại.")}catch(l){throw console.error("Lỗi service createTransferRequest:",((r=l.response)==null?void 0:r.data)||l.message),(i=(s=l.response)==null?void 0:s.data)!=null&&i.errors?l.response.data:((a=l.response)==null?void 0:a.data)||l}},IT=async(e,t)=>{var n,r,s,i,a,l;try{const c=await W.put(`/api/transfers/${e}`,t);if(((n=c.data)==null?void 0:n.status)==="success")return c.data.data;throw new Error(((r=c.data)==null?void 0:r.message)||"Cập nhật yêu cầu chuyển phòng thất bại.")}catch(c){throw console.error(`Lỗi service updateTransferRequest (${e}):`,((s=c.response)==null?void 0:s.data)||c.message),(a=(i=c.response)==null?void 0:i.data)!=null&&a.errors?c.response.data:((l=c.response)==null?void 0:l.data)||c}},RT=async e=>{var t,n,r,s;try{const i=await W.delete(`/api/transfers/${e}`);if(((t=i.data)==null?void 0:t.status)==="success")return i.data;throw new Error(((n=i.data)==null?void 0:n.message)||"Xóa yêu cầu chuyển phòng thất bại.")}catch(i){throw console.error(`Lỗi service deleteTransferRequest (${e}):`,((r=i.response)==null?void 0:r.data)||i.message),((s=i.response)==null?void 0:s.data)||i}},Cu={getAllTransferRequests:TT,getTransferRequestById:PT,createTransferRequest:MT,updateTransferRequest:IT,deleteTransferRequest:RT},DT=e=>{const t=De(e);return Ce(t,"dd/MM/yyyy HH:mm:ss",{locale:dt})},AT=[{value:"",label:"Tất cả trạng thái"},{value:"PENDING",label:"Chờ duyệt"},{value:"APPROVED",label:"Đã duyệt"},{value:"REJECTED",label:"Đã từ chối"}],LT=e=>{switch(e==null?void 0:e.toLowerCase()){case"pending":return"yellow";case"approved":return"green";case"rejected":return"red";default:return"gray"}},OT=()=>{const[e,t]=v.useState([]),[n,r]=v.useState(!0),[s,i]=v.useState(null),[a,l]=v.useState({currentPage:1,totalPages:1,limit:10,total:0}),[c,u]=v.useState(1),[d,h]=v.useState({status:"",studentId:""});se();const m=v.useCallback(async(b=1,g)=>{var y;r(!0),i(null);try{console.log("Fetching with filters:",g);const p={page:b,limit:a.limit,status:g.status||void 0,studentId:g.studentId||void 0};console.log("API request params:",p);const j=await Cu.getAllTransferRequests(p);t(j.transfers||[]),l(N=>({...N,...j.meta})),u(((y=j.meta)==null?void 0:y.page)||1)}catch(p){console.error("Transfer request fetch error:",p),i("Không thể tải danh sách yêu cầu chuyển phòng.")}finally{r(!1)}},[a.limit]);v.useEffect(()=>{m(c,d)},[m,c,d]);const x=b=>{const{name:g,value:y}=b.target;h(p=>({...p,[g]:y})),u(1)},f=async(b,g)=>{const y=g==="APPROVED"?"phê duyệt":"từ chối";if(window.confirm(`Bạn có chắc muốn ${y} yêu cầu chuyển phòng này?`))try{await Cu.updateTransferRequest(b,{status:g}),P.success(`Đã ${y} yêu cầu!`),m(c,d)}catch(p){P.error((p==null?void 0:p.message)||"Thao tác thất bại.")}},w=v.useMemo(()=>[{Header:"Mã số sinh viên",accessor:"studentProfile",Cell:({value:b})=>(b==null?void 0:b.studentId)||"-"},{Header:"Phòng hiện tại",accessor:"fromRoom",Cell:({value:b})=>{var g;return b?`${b.number} (${((g=b.building)==null?void 0:g.name)||""})`:"-"}},{Header:"Phòng muốn chuyển",accessor:"toRoom",Cell:({value:b})=>{var g;return b?`${b.number} (${((g=b.building)==null?void 0:g.name)||""})`:"-"}},{Header:"Lý do",accessor:"reason",Cell:({value:b})=>o.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:b||"-"})},{Header:"Ngày yêu cầu",accessor:"createdAt",Cell:({value:b})=>DT(b)},{Header:"Trạng thái",accessor:"status",Cell:({value:b})=>o.jsx($t,{color:LT(b),children:(b==null?void 0:b.toUpperCase())||"N/A"})},{Header:"Hành động",accessor:"actions",Cell:({row:b})=>o.jsx("div",{className:"flex space-x-1 justify-center items-center",children:b.original.status==="PENDING"&&o.jsxs(o.Fragment,{children:[o.jsx(U,{variant:"primary",className:"text-sm px-3 py-1",onClick:()=>f(b.original.id,"APPROVED"),children:"Chấp nhận"}),o.jsx(U,{variant:"danger",className:"text-sm px-3 py-1",onClick:()=>f(b.original.id,"REJECTED"),children:"Từ chối"})]})})}],[]);return o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex flex-wrap justify-between items-center gap-4",children:o.jsx("h1",{className:"text-2xl font-semibold",children:"Quản lý Yêu cầu Chuyển phòng"})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-md shadow-sm space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[o.jsx(ce,{label:"Trạng thái",id:"status",name:"status",value:d.status,onChange:x,options:AT}),o.jsx(D,{label:"Mã số sinh viên",id:"studentId",name:"studentId",value:d.studentId,onChange:x,placeholder:"Nhập mã số sinh viên"})]})}),n?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{})}):s?o.jsxs("div",{className:"text-red-600 bg-red-100 p-4 rounded",children:["Lỗi: ",s]}):e.length===0?o.jsx("div",{className:"text-gray-600 bg-gray-100 p-4 rounded text-center",children:"Không tìm thấy yêu cầu chuyển phòng nào."}):o.jsx(Bt,{columns:w,data:e,currentPage:c,totalPages:a.totalPages,onPageChange:u,totalRecords:a.total,recordsPerPage:a.limit})]})},$T=()=>{var w;const{user:e}=bt(),t=se(),[n,r]=v.useState([]),[s,i]=v.useState({targetRoomId:"",reason:""}),[a,l]=v.useState(!0),[c,u]=v.useState(!1),[d,h]=v.useState({});v.useEffect(()=>{const b=async()=>{var g;l(!0);try{const y=await Ve.getAllRooms({status:"AVAILABLE",limit:1e3}),p=(g=e==null?void 0:e.profile)==null?void 0:g.roomId,j=(y||[]).filter(N=>N.id!==p);r(j)}catch(y){console.error("Lỗi tải danh sách phòng trống:",y),P.error("Không thể tải danh sách phòng trống.")}finally{l(!1)}};(e==null?void 0:e.role)==="STUDENT"&&(e!=null&&e.profile)?b():l(!1)},[e]);const m=b=>{const{name:g,value:y}=b.target;i(p=>({...p,[g]:y})),d[g]&&h(p=>({...p,[g]:null}))},x=async b=>{if(b.preventDefault(),u(!0),h({}),!s.targetRoomId){h({targetRoomId:"Vui lòng chọn phòng muốn chuyển đến."}),u(!1);return}if(!s.reason.trim()){h({reason:"Vui lòng nhập lý do chuyển phòng."}),u(!1);return}try{const g={targetRoomId:parseInt(s.targetRoomId),reason:s.reason};await Cu.createTransferRequest(g),P.success("Đã gửi yêu cầu chuyển phòng thành công!"),t("/profile")}catch(g){console.error("Lỗi gửi yêu cầu chuyển phòng:",g);const y=(g==null?void 0:g.message)||"Gửi yêu cầu thất bại.";if(g!=null&&g.errors&&Array.isArray(g.errors)){const p={};g.errors.forEach(j=>{j.field&&(p[j.field]=j.message)}),h(p),P.error("Vui lòng kiểm tra lại thông tin.",{id:"validation-error"})}else h({general:y}),P.error(y)}finally{u(!1)}},f=[{value:"",label:"-- Chọn phòng muốn chuyển đến --"},...n.map(b=>{var g;return{value:b.id.toString(),label:`Phòng ${b.number} (${(g=b.building)==null?void 0:g.name}) - ${b.capacity} chỗ - ${formatCurrency(b.price)}`}})];return(e==null?void 0:e.role)!=="STUDENT"?o.jsx("p",{className:"text-center text-red-600 p-6",children:"Chức năng này chỉ dành cho sinh viên."}):(w=e==null?void 0:e.profile)!=null&&w.roomId?o.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto",children:[o.jsxs("div",{children:[o.jsx(U,{variant:"link",onClick:()=>t(-1),icon:ut,className:"text-sm mb-4",children:"Quay lại"}),o.jsx("h1",{className:"text-2xl font-semibold",children:"Yêu cầu Chuyển phòng"}),o.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Điền thông tin dưới đây để gửi yêu cầu chuyển sang phòng khác."})]}),o.jsxs("form",{onSubmit:x,className:"bg-white shadow sm:rounded-lg p-6 space-y-6",children:[o.jsxs("div",{className:"p-4 bg-gray-50 rounded-md border",children:[o.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Phòng hiện tại của bạn:"}),o.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"Phòng XXX (Tòa YYY) "})]}),d.general&&o.jsx("p",{className:"text-sm text-red-600",children:d.general}),o.jsx(ce,{label:"Phòng muốn chuyển đến *",id:"targetRoomId",name:"targetRoomId",required:!0,value:s.targetRoomId,onChange:m,options:f,disabled:c||a,error:d.targetRoomId,loading:a}),o.jsx(tn,{label:"Lý do chuyển phòng *",id:"reason",name:"reason",rows:4,required:!0,value:s.reason,onChange:m,disabled:c,error:d.reason,placeholder:"Nêu rõ lý do bạn muốn chuyển phòng..."}),o.jsxs("div",{className:"flex justify-end gap-3 pt-5 border-t border-gray-200",children:[o.jsx(U,{variant:"secondary",onClick:()=>t(-1),disabled:c,children:"Hủy"}),o.jsx(U,{type:"submit",isLoading:c,disabled:c||a,children:"Gửi yêu cầu"})]})]})]}):o.jsx("p",{className:"text-center text-gray-600 p-6",children:"Bạn cần đang ở trong một phòng để thực hiện yêu cầu chuyển phòng."})},FT=()=>o.jsx("div",{className:"min-h-screen bg-gray-100 flex flex-col justify-center items-center p-4",children:o.jsxs("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg overflow-hidden",children:[o.jsxs("div",{className:"bg-indigo-600 px-4 py-8 flex flex-col items-center",children:[o.jsx("h1",{className:"text-white text-6xl font-bold mb-2",children:"404"}),o.jsx("div",{className:"flex items-center justify-center w-24 h-24 bg-white rounded-full",children:o.jsx("svg",{className:"w-16 h-16 text-indigo-600",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M10 2a8 8 0 100 16 8 8 0 000-16zm0 14a6 6 0 110-12 6 6 0 010 12zm0-9a1 1 0 00-1 1v3a1 1 0 002 0V8a1 1 0 00-1-1zm0 6a1 1 0 100 2 1 1 0 000-2z"})})}),o.jsx("p",{className:"text-white text-xl font-medium mt-4",children:"Trang không tìm thấy"})]}),o.jsxs("div",{className:"p-8",children:[o.jsxs("p",{className:"text-gray-600 text-center mb-6",children:["Có vẻ như bạn đã lạc đường trong ký túc xá.",o.jsx("br",{}),"Trang này có vẻ không tồn tại hoặc đã bị xóa."]}),o.jsxs("div",{className:"flex flex-col space-y-3",children:[o.jsxs(Le,{to:"/",className:"flex items-center justify-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:[o.jsx(Id,{className:"h-5 w-5 mr-2"}),"Trở về trang chủ"]}),o.jsx("button",{onClick:()=>window.history.back(),className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Quay lại trang trước"})]})]}),o.jsx("div",{className:"px-8 py-4 bg-gray-50 border-t",children:o.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["Mọi thắc mắc vui lòng liên hệ với ",o.jsx("span",{className:"text-indigo-600",children:"Ban quản lý KTX"})]})})]})}),BT=()=>{const[e,t]=v.useState(""),[n,r]=v.useState(!1),[s,i]=v.useState(!1),a=async l=>{if(l.preventDefault(),!n){r(!0),i(!1);try{const c=await Qe.requestPasswordReset(e);P.success(c.message||"Liên kết đặt lại mật khẩu đã được gửi đến email của bạn. Vui lòng kiểm tra hộp thư (kể cả mục Spam)."),i(!0),t("")}catch(c){console.error("Lỗi quên mật khẩu:",c)}finally{r(!1)}}};return o.jsxs("div",{className:"min-h-screen bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900",children:"Quên mật khẩu"}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Nhập địa chỉ email đã đăng ký của bạn."})]}),o.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:s?o.jsxs("div",{className:"rounded-md bg-green-50 p-4 text-center",children:[o.jsx("h3",{className:"text-sm font-medium text-green-800 mb-2",children:"Yêu cầu đã được gửi!"}),o.jsx("p",{className:"text-sm text-green-700",children:"Vui lòng kiểm tra hộp thư email của bạn (bao gồm cả mục Spam/Junk) để tìm liên kết đặt lại mật khẩu."}),o.jsx("div",{className:"mt-4",children:o.jsx(Le,{to:"/login",className:"text-sm font-medium text-indigo-600 hover:text-indigo-500",children:"Quay lại trang đăng nhập"})})]}):o.jsxs("form",{className:"space-y-6",onSubmit:a,children:[o.jsx("div",{children:o.jsx(D,{label:"Địa chỉ Email",id:"email",type:"email",name:"email",autoComplete:"email",required:!0,value:e,onChange:l=>t(l.target.value),placeholder:"you@example.com",disabled:n})}),o.jsx("div",{children:o.jsx(U,{type:"submit",className:"w-full",disabled:n,children:n?o.jsx(ee,{size:"sm"}):"Gửi liên kết đặt lại"})}),o.jsx("div",{className:"text-sm text-center",children:o.jsx(Le,{to:"/login",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Quay lại trang đăng nhập"})})]})})})]})},zT=()=>{const e=se(),{register:t,user:n,isLoading:r}=bt(),[s,i]=v.useState({fullName:"",email:"",password:"",confirmPassword:"",studentId:"",phoneNumber:""}),[a,l]=v.useState({}),[c,u]=v.useState(!1);v.useEffect(()=>{!r&&n&&e("/",{replace:!0})},[r,n,e]);const d=x=>{const{name:f,value:w}=x.target;i(b=>({...b,[f]:w})),a[f]&&l(b=>({...b,[f]:null})),f==="confirmPassword"&&a.confirmPassword&&l(b=>({...b,confirmPassword:null}))},h=()=>{const x={};return s.fullName.trim()||(x.fullName="Vui lòng nhập họ tên."),s.email.trim()?/\S+@\S+\.\S+/.test(s.email)||(x.email="Địa chỉ email không hợp lệ."):x.email="Vui lòng nhập email.",s.password?s.password.length<6&&(x.password="Mật khẩu phải có ít nhất 6 ký tự."):x.password="Vui lòng nhập mật khẩu.",s.confirmPassword?s.password&&s.password!==s.confirmPassword&&(x.confirmPassword="Mật khẩu xác nhận không khớp."):x.confirmPassword="Vui lòng xác nhận mật khẩu.",l(x),Object.keys(x).length===0},m=async x=>{if(x.preventDefault(),l({}),!!h()){u(!0);try{const{confirmPassword:f,...w}=s,b=await t(w);P.success((b==null?void 0:b.message)||"Đăng ký tài khoản thành công!"),e("/login")}catch(f){if(console.error("Lỗi đăng ký:",f),f!=null&&f.errors&&Array.isArray(f.errors)){const w={};f.errors.forEach(b=>{b.field?w[b.field]=b.message:w.general=b.message}),l(w),w.general&&P.error(w.general)}else l({general:(f==null?void 0:f.message)||"Đăng ký thất bại. Vui lòng thử lại."})}finally{u(!1)}}};return r?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:o.jsx(ee,{size:"lg"})}):n?null:o.jsxs("div",{className:"min-h-screen flex items-center justify-center relative bg-gray-100 overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 z-0 bg-cover bg-center",style:{backgroundImage:'url("/loginformbackground.jpg")'}}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-600/70 via-purple-700/60 to-black/70"}),o.jsx("div",{className:"w-full max-w-md z-10 px-4 sm:px-0",children:o.jsxs("div",{className:"bg-white/95 backdrop-blur-sm px-6 py-8 sm:px-10 sm:py-10 rounded-xl shadow-2xl border border-white/10",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("img",{className:"mx-auto h-12 w-auto mb-4",src:"/LOGO.svg",alt:"Dormitory Management System"}),o.jsx("h2",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"Đăng ký tài khoản mới"}),o.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Tham gia hệ thống quản lý ký túc xá"})]}),a.general&&o.jsx("div",{role:"alert",className:"mb-4 rounded border-s-4 border-red-500 bg-red-50 p-3",children:o.jsx("p",{className:"text-sm text-red-700",children:a.general})}),o.jsxs("form",{className:"space-y-5",onSubmit:m,children:[o.jsx(D,{label:"Họ và tên *",id:"fullName",name:"fullName",type:"text",required:!0,value:s.fullName,onChange:d,disabled:c,error:a.fullName,autoComplete:"name"}),o.jsx(D,{label:"Địa chỉ Email *",id:"email",name:"email",type:"email",required:!0,value:s.email,onChange:d,disabled:c,error:a.email,autoComplete:"email"}),o.jsx(D,{label:"Mã sinh viên",id:"studentId",name:"studentId",type:"text",value:s.studentId,onChange:d,disabled:c,error:a.studentId,placeholder:"Nhập mã sinh viên (nếu có)"}),o.jsx(D,{label:"Số điện thoại",id:"phoneNumber",name:"phoneNumber",type:"tel",value:s.phoneNumber,onChange:d,disabled:c,error:a.phoneNumber,placeholder:"Nhập số điện thoại của bạn",autoComplete:"tel"}),o.jsx(D,{label:"Mật khẩu *",id:"password",name:"password",type:"password",required:!0,value:s.password,onChange:d,disabled:c,error:a.password,autoComplete:"new-password","aria-describedby":"password-hint"}),o.jsx("p",{className:"text-xs text-gray-500 -mt-3",id:"password-hint",children:"Ít nhất 6 ký tự."}),o.jsx(D,{label:"Xác nhận mật khẩu *",id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s.confirmPassword,onChange:d,disabled:c,error:a.confirmPassword,autoComplete:"new-password"}),o.jsx("div",{children:o.jsx(U,{type:"submit",className:"w-full mt-2",disabled:c,isLoading:c,children:"Đăng ký"})})]}),o.jsxs("div",{className:"mt-6 text-sm text-center",children:[o.jsx("span",{className:"text-gray-600",children:"Đã có tài khoản? "}),o.jsx(Le,{to:"/login",className:"font-semibold text-indigo-600 hover:text-indigo-500",children:"Đăng nhập ngay"})]})]})})]})},Bs=e=>{if(!e)return"-";try{return Ce(De(e),"dd/MM/yyyy",{locale:dt})}catch{return e}},ig=e=>{if(!e)return"-";try{return Ce(De(e),"dd/MM/yyyy HH:mm",{locale:dt})}catch{return e}},UT=(...e)=>e.filter(t=>t&&typeof t=="string"&&t.trim()!=="").join(", ")||"-",HT=e=>{switch(e){case"RENTING":return{color:"green",text:"Đang ở"};case"PENDING_APPROVAL":return{color:"yellow",text:"Chờ duyệt"};case"CHECKED_OUT":return{color:"gray",text:"Đã rời đi"};case"EVICTED":return{color:"red",text:"Buộc thôi ở"};default:return{color:"gray",text:e||"N/A"}}},WT=()=>{var x,f;const e=se(),[t,n]=v.useState(null),[r,s]=v.useState(!0),[i,a]=v.useState(null);v.useEffect(()=>{(async()=>{var b;s(!0);try{const g=await Qe.getMe();(b=g==null?void 0:g.user)!=null&&b.studentProfile?n(g.user.studentProfile):a("Không tìm thấy thông tin hồ sơ sinh viên")}catch(g){console.error("Error fetching profile:",g),a((g==null?void 0:g.message)||"Không thể tải thông tin hồ sơ"),P.error("Không thể tải thông tin hồ sơ")}finally{s(!1)}})()},[]);const l=(w,b,g=!1,y="text-gray-900")=>o.jsxs("div",{className:`px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 ${g?"bg-gray-50":"bg-white"}`,children:[o.jsx("dt",{className:"text-sm font-medium text-gray-600",children:w}),o.jsx("dd",{className:`mt-1 text-sm sm:mt-0 sm:col-span-2 ${y}`,children:b!=null&&b!==""?b:o.jsx("span",{className:"text-gray-400",children:"-"})})]}),c=w=>{var g;const b="http://localhost:5002/uploads";if((g=w==null?void 0:w.avatar)!=null&&g.path){const y=w.avatar.path;return y.startsWith("http")?y:`${b}${y.startsWith("/")?"":"/"}${y}`}return"/src/assets/default-avatar.png"};if(r)return o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{size:"lg"})});if(i||!t)return o.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",children:[o.jsx("h2",{className:"font-bold mb-2",children:"Lỗi"}),o.jsx("p",{children:i||"Không thể tải thông tin hồ sơ."})]});const u=t.room,d=u==null?void 0:u.building,h=HT(t.status),m=c(t.user);return o.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto",children:[o.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[o.jsx("h1",{className:"text-2xl font-semibold",children:"Hồ sơ sinh viên"}),o.jsx(U,{onClick:()=>e("/profile/edit"),icon:Pt,children:"Chỉnh sửa"})]}),o.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[o.jsx("div",{className:"px-4 py-5 sm:px-6 flex flex-wrap justify-between items-center gap-4 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("img",{src:m,alt:`Avatar của ${t.fullName}`,className:"h-16 w-16 rounded-full object-cover ring-2 ring-offset-2 ring-indigo-500",onError:w=>{w.target.onerror=null,w.target.src="/src/assets/default-avatar.png"}}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t.fullName}),o.jsxs("p",{className:"text-sm text-gray-500",children:["MSSV: ",o.jsx("span",{className:"font-mono",children:t.studentId})," | ",(x=t.user)==null?void 0:x.email]}),o.jsx("div",{className:"mt-1",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-${h.color}-100 text-${h.color}-800`,children:h.text})})]})]})}),o.jsx("div",{className:"border-t border-gray-200",children:o.jsxs("dl",{className:"divide-y divide-gray-100",children:[o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Thông tin cơ bản"})}),l("Họ và tên",t.fullName,!1),l("Mã sinh viên",t.studentId,!0,"font-semibold font-mono"),l("Email",(f=t.user)==null?void 0:f.email,!1,"text-gray-700"),l("Số điện thoại",t.phoneNumber,!0),l("Giới tính",t.gender==="MALE"?"Nam":t.gender==="FEMALE"?"Nữ":t.gender,!1),l("Ngày sinh",Bs(t.birthDate),!0),l("Số CCCD/CMND",t.identityCardNumber,!1),o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Thông tin học tập"})}),l("Khoa/Viện",t.faculty,!1),l("Khóa",t.courseYear,!0),l("Lớp",t.className,!1),l("Email cá nhân",t.personalEmail,!0),l("Dân tộc",t.ethnicity,!1),l("Tôn giáo",t.religion,!0),l("Đối tượng ưu tiên",t.priorityObject,!1),l("Địa chỉ thường trú",UT(t.permanentAddress,t.permanentDistrict,t.permanentProvince),!0),o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Thông tin ký túc xá"})}),l("Tòa nhà",d==null?void 0:d.name,!1),l("Phòng số",u==null?void 0:u.number,!0),l("Tầng",u==null?void 0:u.floor,!1),l("Loại phòng",u==null?void 0:u.type,!0),l("Số lượng người ở",`${(u==null?void 0:u.actualOccupancy)||0}/${(u==null?void 0:u.capacity)||0}`,!1),l("Giá phòng",u!=null&&u.price?`${parseInt(u.price).toLocaleString("vi-VN")} VNĐ`:"-",!0),l("Ngày bắt đầu ở",Bs(t.startDate),!1),l("Ngày check-in",Bs(t.checkInDate),!0),l("Ngày check-out",Bs(t.checkOutDate),!1),l("Ngày hết hạn hợp đồng",Bs(t.contractEndDate),!0),o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Thông tin gia đình"})}),o.jsx("div",{className:"px-4 pt-2 pb-1 sm:px-6 bg-gray-50",children:o.jsx("dt",{className:"text-sm font-medium text-gray-600",children:"Thông tin Cha"})}),l("Họ tên",t.fatherName,!0),l("Năm sinh",t.fatherDobYear,!1),l("Số điện thoại",t.fatherPhone,!0),l("Địa chỉ",t.fatherAddress,!1),o.jsx("div",{className:"px-4 pt-2 pb-1 sm:px-6 bg-gray-50",children:o.jsx("dt",{className:"text-sm font-medium text-gray-600",children:"Thông tin Mẹ"})}),l("Họ tên",t.motherName,!0),l("Năm sinh",t.motherDobYear,!1),l("Số điện thoại",t.motherPhone,!0),l("Địa chỉ",t.motherAddress,!1),o.jsx("div",{className:"px-4 pt-2 pb-1 sm:px-6 bg-gray-50",children:o.jsx("dt",{className:"text-sm font-medium text-gray-600",children:"Liên hệ khẩn cấp"})}),l("Người liên hệ",t.emergencyContactRelation,!0),l("Số điện thoại",t.emergencyContactPhone,!1),l("Địa chỉ",t.emergencyContactAddress,!0),o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Thông tin hệ thống"})}),l("Ngày tạo hồ sơ",ig(t.createdAt),!1),l("Cập nhật lần cuối",ig(t.updatedAt),!0)]})})]})]})},VT=()=>{const e=se(),[t,n]=v.useState(null),[r,s]=v.useState(!0),[i,a]=v.useState(!1),[l,c]=v.useState(null),[u,d]=v.useState({fullName:"",studentId:"",phoneNumber:"",gender:"MALE",birthDate:"",identityCardNumber:"",faculty:"",courseYear:"",className:"",personalEmail:"",ethnicity:"",religion:"",priorityObject:"",permanentProvince:"",permanentDistrict:"",permanentAddress:"",fatherName:"",fatherDobYear:"",fatherPhone:"",fatherAddress:"",motherName:"",motherDobYear:"",motherPhone:"",motherAddress:"",emergencyContactRelation:"",emergencyContactPhone:"",emergencyContactAddress:""});v.useEffect(()=>{(async()=>{var f,w,b,g;s(!0);try{const y=await Qe.getMe();if((f=y==null?void 0:y.user)!=null&&f.studentProfile){const p=y.user.studentProfile;n(p),d({fullName:p.fullName||"",studentId:p.studentId||"",phoneNumber:p.phoneNumber||"",gender:p.gender||"MALE",birthDate:p.birthDate?Ce(De(p.birthDate),"yyyy-MM-dd"):"",identityCardNumber:p.identityCardNumber||"",faculty:p.faculty||"",courseYear:((w=p.courseYear)==null?void 0:w.toString())||"",className:p.className||"",personalEmail:p.personalEmail||"",ethnicity:p.ethnicity||"",religion:p.religion||"",priorityObject:p.priorityObject||"",permanentProvince:p.permanentProvince||"",permanentDistrict:p.permanentDistrict||"",permanentAddress:p.permanentAddress||"",fatherName:p.fatherName||"",fatherDobYear:((b=p.fatherDobYear)==null?void 0:b.toString())||"",fatherPhone:p.fatherPhone||"",fatherAddress:p.fatherAddress||"",motherName:p.motherName||"",motherDobYear:((g=p.motherDobYear)==null?void 0:g.toString())||"",motherPhone:p.motherPhone||"",motherAddress:p.motherAddress||"",emergencyContactRelation:p.emergencyContactRelation||"",emergencyContactPhone:p.emergencyContactPhone||"",emergencyContactAddress:p.emergencyContactAddress||""})}else c("Không tìm thấy thông tin hồ sơ sinh viên")}catch(y){console.error("Error fetching profile:",y),c((y==null?void 0:y.message)||"Không thể tải thông tin hồ sơ"),P.error("Không thể tải thông tin hồ sơ")}finally{s(!1)}})()},[]);const h=x=>{const{name:f,value:w}=x.target;d(b=>({...b,[f]:w}))},m=async x=>{x.preventDefault(),a(!0);try{const f={id:t.id,...u,courseYear:u.courseYear?parseInt(u.courseYear):null,fatherDobYear:u.fatherDobYear?parseInt(u.fatherDobYear):null,motherDobYear:u.motherDobYear?parseInt(u.motherDobYear):null,fullName:u.fullName||null,studentId:u.studentId||null,phoneNumber:u.phoneNumber||null,gender:u.gender||"MALE",birthDate:u.birthDate||null,identityCardNumber:u.identityCardNumber||null,faculty:u.faculty||null,className:u.className||null,personalEmail:u.personalEmail||null,ethnicity:u.ethnicity||null,religion:u.religion||null,priorityObject:u.priorityObject||null,permanentProvince:u.permanentProvince||null,permanentDistrict:u.permanentDistrict||null,permanentAddress:u.permanentAddress||null,fatherName:u.fatherName||null,fatherPhone:u.fatherPhone||null,fatherAddress:u.fatherAddress||null,motherName:u.motherName||null,motherPhone:u.motherPhone||null,motherAddress:u.motherAddress||null,emergencyContactRelation:u.emergencyContactRelation||null,emergencyContactPhone:u.emergencyContactPhone||null,emergencyContactAddress:u.emergencyContactAddress||null};console.log("Submit data with ID:",f.id);const w=await Qe.updateProfile(f);if(w!=null&&w.success||(w==null?void 0:w.status)==="success")P.success("Cập nhật thông tin thành công"),e("/profile");else throw new Error((w==null?void 0:w.message)||"Cập nhật thông tin thất bại")}catch(f){console.error("Error updating profile:",f),P.error((f==null?void 0:f.message)||"Cập nhật thông tin thất bại")}finally{a(!1)}};return r?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{size:"lg"})}):l||!t?o.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",children:[o.jsx("h2",{className:"font-bold mb-2",children:"Lỗi"}),o.jsx("p",{children:l||"Không thể tải thông tin hồ sơ."}),o.jsx("div",{className:"mt-4",children:o.jsx(U,{variant:"primary",onClick:()=>e("/profile"),children:"Quay lại trang hồ sơ"})})]}):o.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(U,{variant:"link",onClick:()=>e("/profile"),children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ut,{className:"h-4 w-4"}),o.jsx("span",{children:"Quay lại"})]})}),o.jsx("h1",{className:"text-2xl font-semibold",children:"Chỉnh sửa hồ sơ sinh viên"})]}),o.jsxs("form",{onSubmit:m,className:"space-y-6",children:[o.jsxs(Ee,{title:"Thông tin cơ bản",className:"bg-white shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Thông tin cá nhân cơ bản của sinh viên"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(D,{label:"Họ và tên",name:"fullName",value:u.fullName,onChange:h,required:!0,placeholder:"Nhập họ và tên đầy đủ"}),o.jsx(D,{label:"Mã sinh viên",name:"studentId",value:u.studentId,onChange:h,required:!0,disabled:!0,placeholder:"Mã sinh viên"}),o.jsx(D,{label:"Số điện thoại",name:"phoneNumber",value:u.phoneNumber,onChange:h,required:!0,placeholder:"Nhập số điện thoại"}),o.jsx(ce,{label:"Giới tính",name:"gender",value:u.gender,onChange:h,required:!0,options:[{value:"MALE",label:"Nam"},{value:"FEMALE",label:"Nữ"}]}),o.jsx(D,{type:"date",label:"Ngày sinh",name:"birthDate",value:u.birthDate,onChange:h,required:!0}),o.jsx(D,{label:"Số CCCD/CMND",name:"identityCardNumber",value:u.identityCardNumber,onChange:h,required:!0,placeholder:"Nhập số CCCD/CMND"})]})]}),o.jsxs(Ee,{title:"Thông tin học tập",className:"bg-white shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Thông tin về quá trình học tập tại trường"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(D,{label:"Khoa/Viện",name:"faculty",value:u.faculty,onChange:h,required:!0,placeholder:"Nhập tên khoa/viện"}),o.jsx(D,{type:"number",label:"Khóa",name:"courseYear",value:u.courseYear,onChange:h,required:!0,placeholder:"Nhập khóa học"}),o.jsx(D,{label:"Lớp",name:"className",value:u.className,onChange:h,placeholder:"Nhập tên lớp"}),o.jsx(D,{type:"email",label:"Email cá nhân",name:"personalEmail",value:u.personalEmail,onChange:h,placeholder:"Nhập email cá nhân"}),o.jsx(D,{label:"Dân tộc",name:"ethnicity",value:u.ethnicity,onChange:h,placeholder:"Nhập dân tộc"}),o.jsx(D,{label:"Tôn giáo",name:"religion",value:u.religion,onChange:h,placeholder:"Nhập tôn giáo"}),o.jsx(D,{label:"Đối tượng ưu tiên",name:"priorityObject",value:u.priorityObject,onChange:h,placeholder:"Nhập đối tượng ưu tiên"})]})]}),o.jsxs(Ee,{title:"Địa chỉ thường trú",className:"bg-white shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Địa chỉ nơi sinh viên thường trú"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(D,{label:"Tỉnh/Thành phố",name:"permanentProvince",value:u.permanentProvince,onChange:h,placeholder:"Nhập tỉnh/thành phố"}),o.jsx(D,{label:"Quận/Huyện",name:"permanentDistrict",value:u.permanentDistrict,onChange:h,placeholder:"Nhập quận/huyện"}),o.jsx(D,{label:"Địa chỉ",name:"permanentAddress",value:u.permanentAddress,onChange:h,className:"md:col-span-2",placeholder:"Nhập địa chỉ chi tiết"})]})]}),o.jsxs(Ee,{title:"Thông tin gia đình - Cha",className:"bg-white shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Thông tin về người cha của sinh viên"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(D,{label:"Họ tên",name:"fatherName",value:u.fatherName,onChange:h,placeholder:"Nhập họ tên cha"}),o.jsx(D,{type:"number",label:"Năm sinh",name:"fatherDobYear",value:u.fatherDobYear,onChange:h,placeholder:"Nhập năm sinh"}),o.jsx(D,{label:"Số điện thoại",name:"fatherPhone",value:u.fatherPhone,onChange:h,placeholder:"Nhập số điện thoại"}),o.jsx(D,{label:"Địa chỉ",name:"fatherAddress",value:u.fatherAddress,onChange:h,className:"md:col-span-2",placeholder:"Nhập địa chỉ"})]})]}),o.jsxs(Ee,{title:"Thông tin gia đình - Mẹ",className:"bg-white shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Thông tin về người mẹ của sinh viên"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(D,{label:"Họ tên",name:"motherName",value:u.motherName,onChange:h,placeholder:"Nhập họ tên mẹ"}),o.jsx(D,{type:"number",label:"Năm sinh",name:"motherDobYear",value:u.motherDobYear,onChange:h,placeholder:"Nhập năm sinh"}),o.jsx(D,{label:"Số điện thoại",name:"motherPhone",value:u.motherPhone,onChange:h,placeholder:"Nhập số điện thoại"}),o.jsx(D,{label:"Địa chỉ",name:"motherAddress",value:u.motherAddress,onChange:h,className:"md:col-span-2",placeholder:"Nhập địa chỉ"})]})]}),o.jsxs(Ee,{title:"6. Thông tin liên hệ khẩn cấp",className:"bg-white shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Thông tin người liên hệ trong trường hợp khẩn cấp"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(D,{label:"Quan hệ",name:"emergencyContactRelation",value:u.emergencyContactRelation,onChange:h,placeholder:"Nhập quan hệ"}),o.jsx(D,{label:"Số điện thoại",name:"emergencyContactPhone",value:u.emergencyContactPhone,onChange:h,placeholder:"Nhập số điện thoại"}),o.jsx(D,{label:"Địa chỉ",name:"emergencyContactAddress",value:u.emergencyContactAddress,onChange:h,className:"md:col-span-2",placeholder:"Nhập địa chỉ"})]})]}),o.jsxs("div",{className:"flex justify-end gap-4",children:[o.jsx(U,{type:"button",variant:"secondary",onClick:()=>e("/profile"),children:"Hủy"}),o.jsx(U,{type:"submit",variant:"primary",disabled:i,children:i?"Đang lưu...":"Lưu thay đổi"})]})]})]})},YT=e=>{if(!e)return"-";try{return Ce(De(e),"dd/MM/yyyy",{locale:dt})}catch{return e}},ag=e=>{if(!e)return"-";try{return Ce(De(e),"dd/MM/yyyy HH:mm",{locale:dt})}catch{return e}},qT=()=>{var m,x,f;const e=se(),[t,n]=v.useState(null),[r,s]=v.useState(!0),[i,a]=v.useState(null);v.useEffect(()=>{(async()=>{var b,g,y,p;s(!0);try{const j=await Qe.getMe(),N=((b=j==null?void 0:j.user)==null?void 0:b.staffProfile)||(j==null?void 0:j.profile)||((y=(g=j==null?void 0:j.data)==null?void 0:g.user)==null?void 0:y.staffProfile)||((p=j==null?void 0:j.data)==null?void 0:p.profile);N?(console.log("Staff profile data retrieved:",N),n(N)):(console.error("Staff profile not found in response:",j),a("Không tìm thấy thông tin hồ sơ nhân viên"))}catch(j){console.error("Error fetching profile:",j),a((j==null?void 0:j.message)||"Không thể tải thông tin hồ sơ"),P.error("Không thể tải thông tin hồ sơ")}finally{s(!1)}})()},[]);const l=(w,b,g=!1,y="text-gray-900")=>o.jsxs("div",{className:`px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 ${g?"bg-gray-50":"bg-white"}`,children:[o.jsx("dt",{className:"text-sm font-medium text-gray-600",children:w}),o.jsx("dd",{className:`mt-1 text-sm sm:mt-0 sm:col-span-2 ${y}`,children:b!=null&&b!==""?b:o.jsx("span",{className:"text-gray-400",children:"-"})})]}),c=w=>{var g;const b="http://localhost:5002/uploads";if((g=w==null?void 0:w.avatar)!=null&&g.path){const y=w.avatar.path;return y.startsWith("http")?y:`${b}${y.startsWith("/")?"":"/"}${y}`}return"/src/assets/default-avatar.png"};if(r)return o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{size:"lg"})});if(i||!t)return o.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",children:[o.jsx("h2",{className:"font-bold mb-2",children:"Lỗi"}),o.jsx("p",{children:i||"Không thể tải thông tin hồ sơ."})]});const u=t.managedBuilding,d=c(t.user),h=((m=t.user)==null?void 0:m.role)||"";return o.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto",children:[o.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[o.jsxs("h1",{className:"text-2xl font-semibold",children:["Hồ sơ ",h==="ADMIN"?"Quản trị viên":"Nhân viên"]}),o.jsx(U,{onClick:()=>e("/profile/edit"),icon:Pt,children:"Chỉnh sửa"})]}),o.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[o.jsx("div",{className:"px-4 py-5 sm:px-6 flex flex-wrap justify-between items-center gap-4 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("img",{src:d,alt:`Avatar của ${t.fullName}`,className:"h-16 w-16 rounded-full object-cover ring-2 ring-offset-2 ring-indigo-500",onError:w=>{w.target.onerror=null,w.target.src="/src/assets/default-avatar.png"}}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t.fullName}),o.jsxs("p",{className:"text-sm text-gray-500",children:[t.position||(h==="ADMIN"?"Quản trị viên":"Nhân viên")," | ",(x=t.user)==null?void 0:x.email]}),o.jsx("div",{className:"mt-1",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:h==="ADMIN"?"Quản trị viên":"Nhân viên"})})]})]})}),o.jsx("div",{className:"border-t border-gray-200",children:o.jsxs("dl",{className:"divide-y divide-gray-100",children:[o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Thông tin cơ bản"})}),l("Họ và tên",t.fullName,!1),l("Chức vụ",t.position,!0),l("Email",(f=t.user)==null?void 0:f.email,!1,"text-gray-700"),l("Số điện thoại",t.phoneNumber,!0),l("Giới tính",t.gender==="MALE"?"Nam":t.gender==="FEMALE"?"Nữ":t.gender,!1),l("Ngày sinh",YT(t.birthDate),!0),l("Số CCCD/CMND",t.identityCardNumber,!1),l("Địa chỉ",t.address,!0),u&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Thông tin quản lý"})}),l("Tòa nhà quản lý",u.name,!1),l("Địa chỉ tòa nhà",u.address,!0),l("Mô tả",u.description,!1)]}),o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Thông tin hệ thống"})}),l("Ngày tạo hồ sơ",ag(t.createdAt),!1),l("Cập nhật lần cuối",ag(t.updatedAt),!0)]})})]})]})},KT=()=>{const e=se(),[t,n]=v.useState(null),[r,s]=v.useState(!0),[i,a]=v.useState(!1),[l,c]=v.useState(null),[u,d]=v.useState({fullName:"",phoneNumber:"",gender:"MALE",birthDate:"",identityCardNumber:"",position:"",address:""});v.useEffect(()=>{(async()=>{var f,w,b,g;s(!0);try{const y=await Qe.getMe(),p=((f=y==null?void 0:y.user)==null?void 0:f.staffProfile)||(y==null?void 0:y.profile)||((b=(w=y==null?void 0:y.data)==null?void 0:w.user)==null?void 0:b.staffProfile)||((g=y==null?void 0:y.data)==null?void 0:g.profile);p?(console.log("Staff profile found:",p),n(p),d({fullName:p.fullName||"",phoneNumber:p.phoneNumber||"",gender:p.gender||"MALE",birthDate:p.birthDate?Ce(De(p.birthDate),"yyyy-MM-dd"):"",identityCardNumber:p.identityCardNumber||"",position:p.position||"",address:p.address||""})):(console.error("Staff profile not found in response:",y),c("Không tìm thấy thông tin hồ sơ nhân viên"))}catch(y){console.error("Error fetching profile:",y),c((y==null?void 0:y.message)||"Không thể tải thông tin hồ sơ"),P.error("Không thể tải thông tin hồ sơ")}finally{s(!1)}})()},[]);const h=x=>{const{name:f,value:w}=x.target;d(b=>({...b,[f]:w}))},m=async x=>{x.preventDefault(),a(!0);try{const f={id:t.id,fullName:u.fullName,phoneNumber:u.phoneNumber,gender:u.gender,birthDate:u.birthDate||null,identityCardNumber:u.identityCardNumber||null,position:u.position||null,address:u.address||null};console.log("Submit data with ID:",f.id);const w=await Qe.updateProfile(f);if(w!=null&&w.success||(w==null?void 0:w.status)==="success")P.success("Cập nhật thông tin thành công"),e("/profile");else throw new Error((w==null?void 0:w.message)||"Cập nhật thông tin thất bại")}catch(f){console.error("Error updating profile:",f),P.error((f==null?void 0:f.message)||"Cập nhật thông tin thất bại")}finally{a(!1)}};return r?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{size:"lg"})}):l||!t?o.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",children:[o.jsx("h2",{className:"font-bold mb-2",children:"Lỗi"}),o.jsx("p",{children:l||"Không thể tải thông tin hồ sơ."})]}):o.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(U,{variant:"link",icon:ut,className:"text-sm",onClick:()=>e("/profile"),children:"Quay lại hồ sơ"}),o.jsx("h1",{className:"text-2xl font-semibold",children:"Chỉnh sửa hồ sơ nhân viên"})]}),o.jsx(Ee,{children:o.jsxs("form",{onSubmit:m,className:"space-y-6",children:[o.jsx("div",{className:"bg-white px-4 py-5 sm:p-6",children:o.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Họ và tên",id:"fullName",name:"fullName",value:u.fullName,onChange:h,required:!0})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Số điện thoại",id:"phoneNumber",name:"phoneNumber",value:u.phoneNumber,onChange:h,required:!0})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(ce,{label:"Giới tính",id:"gender",name:"gender",value:u.gender,onChange:h,options:[{value:"MALE",label:"Nam"},{value:"FEMALE",label:"Nữ"},{value:"OTHER",label:"Khác"}],required:!0})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Ngày sinh",type:"date",id:"birthDate",name:"birthDate",value:u.birthDate,onChange:h})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Số CCCD/CMND",id:"identityCardNumber",name:"identityCardNumber",value:u.identityCardNumber,onChange:h,required:!0})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx(D,{label:"Chức vụ",id:"position",name:"position",value:u.position,onChange:h})}),o.jsx("div",{className:"sm:col-span-6",children:o.jsx(D,{label:"Địa chỉ",id:"address",name:"address",value:u.address,onChange:h})})]})}),o.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 flex justify-end space-x-3",children:[o.jsx(U,{type:"button",variant:"secondary",onClick:()=>e("/profile"),disabled:i,children:"Hủy"}),o.jsx(U,{type:"submit",variant:"primary",isLoading:i,disabled:i,children:"Lưu"})]})]})})]})},XT=e=>{if(!e)return"-";try{return Ce(De(e),"dd/MM/yyyy HH:mm:ss",{locale:dt})}catch{return e}},QT=({userId:e})=>{const[t,n]=v.useState([]),[r,s]=v.useState(!0),[i,a]=v.useState(null),[l,c]=v.useState(1),[u,d]=v.useState(1),[h]=v.useState(10);v.useEffect(()=>{(async()=>{s(!0);try{const f=await Qe.getLoginHistory(e,l,h);n(f.data),d(f.meta.totalPages),a(null)}catch(f){console.error("Error fetching login history:",f),a(f.message||"Không thể tải lịch sử đăng nhập"),P.error("Không thể tải lịch sử đăng nhập")}finally{s(!1)}})()},[e,l,h]);const m=x=>{x>0&&x<=u&&c(x)};return r&&l===1?o.jsx("div",{className:"flex justify-center items-center p-8",children:o.jsx(ee,{size:"lg"})}):i?o.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md text-red-600",children:o.jsx("p",{children:i})}):t.length===0?o.jsx("div",{className:"p-8 text-center text-gray-500",children:o.jsx("p",{children:"Không có lịch sử đăng nhập nào được ghi nhận."})}):o.jsxs("div",{className:"overflow-hidden border-t border-gray-200",children:[o.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Lịch sử đăng nhập tài khoản"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Các phiên đăng nhập gần đây của tài khoản này."})]}),r&&o.jsx("div",{className:"flex justify-center items-center h-12 mb-4",children:o.jsx(ee,{size:"sm"})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Thời gian"}),o.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"IP"}),o.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Vị trí"}),o.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Trạng thái"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:t.map(x=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm text-gray-900 sm:pl-6",children:XT(x.timestamp)}),o.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500 font-mono",children:x.ipAddress||"-"}),o.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:x.location||"-"}),o.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm",children:o.jsx("span",{className:`inline-flex rounded-full px-2 text-xs font-semibold leading-5 ${x.status==="SUCCESS"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.status==="SUCCESS"?"Thành công":"Thất bại"})})]},x.id))})]})}),u>1&&o.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6",children:[o.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[o.jsx("button",{onClick:()=>m(l-1),disabled:l===1,className:`relative inline-flex items-center rounded-md px-4 py-2 text-sm font-medium ${l===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Trước"}),o.jsx("button",{onClick:()=>m(l+1),disabled:l===u,className:`relative ml-3 inline-flex items-center rounded-md px-4 py-2 text-sm font-medium ${l===u?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Sau"})]}),o.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[o.jsx("div",{children:o.jsxs("p",{className:"text-sm text-gray-700",children:["Hiển thị ",o.jsx("span",{className:"font-medium",children:(l-1)*h+1})," đến"," ",o.jsx("span",{className:"font-medium",children:Math.min(l*h,(u-1)*h+t.length)})," trong tổng số"," ",o.jsx("span",{className:"font-medium",children:(u-1)*h+t.length})," lượt đăng nhập"]})}),o.jsx("div",{children:o.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[o.jsxs("button",{onClick:()=>m(l-1),disabled:l===1,className:`relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 ${l===1?"cursor-not-allowed":"hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:[o.jsx("span",{className:"sr-only",children:"Trang trước"}),o.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:o.jsx("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"})})]}),Array.from({length:Math.min(u,5)},(x,f)=>{let w;return u<=5||l<=3?w=f+1:l>=u-2?w=u-4+f:w=l-2+f,o.jsx("button",{onClick:()=>m(w),"aria-current":l===w?"page":void 0,className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ${l===w?"z-10 bg-indigo-600 text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:w},w)}),o.jsxs("button",{onClick:()=>m(l+1),disabled:l===u,className:`relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 ${l===u?"cursor-not-allowed":"hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:[o.jsx("span",{className:"sr-only",children:"Trang sau"}),o.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:o.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})})]})]})})]})]})]})},GT=()=>{const[e,t]=v.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[n,r]=v.useState({}),[s,i]=v.useState(!1),a=u=>{const{name:d,value:h}=u.target;t(m=>({...m,[d]:h})),n[d]&&r(m=>({...m,[d]:null})),d==="confirmPassword"&&n.confirmPassword&&r(m=>({...m,confirmPassword:null})),d==="newPassword"&&n.newPassword&&r(m=>({...m,newPassword:null}))},l=()=>{const u={};return e.currentPassword||(u.currentPassword="Vui lòng nhập mật khẩu hiện tại."),e.newPassword?e.newPassword.length<6&&(u.newPassword="Mật khẩu mới phải có ít nhất 6 ký tự."):u.newPassword="Vui lòng nhập mật khẩu mới.",e.confirmPassword?e.newPassword&&e.newPassword!==e.confirmPassword&&(u.confirmPassword="Mật khẩu xác nhận không khớp."):u.confirmPassword="Vui lòng xác nhận mật khẩu mới.",r(u),Object.keys(u).length===0},c=async u=>{if(u.preventDefault(),r({}),!!l()){i(!0);try{const d=await Qe.changePassword(e.currentPassword,e.newPassword);P.success((d==null?void 0:d.message)||"Đổi mật khẩu thành công!"),t({currentPassword:"",newPassword:"",confirmPassword:""})}catch(d){console.error("Lỗi đổi mật khẩu:",d);const h=(d==null?void 0:d.message)||"Đổi mật khẩu thất bại.";if(d!=null&&d.errors&&Array.isArray(d.errors)){const m={};d.errors.forEach(x=>{x.field==="oldPassword"?m.currentPassword=x.message:x.field==="newPassword"?m.newPassword=x.message:m.general=x.message}),r(m),m.general&&P.error(m.general)}else r({general:h}),P.error(h)}finally{i(!1)}}};return o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[o.jsxs("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:[" ",o.jsx("h3",{className:"text-base font-semibold leading-6 text-gray-900",children:"Đổi mật khẩu"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Thay đổi mật khẩu đăng nhập của bạn."})]}),o.jsxs("form",{onSubmit:c,children:[o.jsxs("div",{className:"px-4 py-5 sm:p-6 space-y-4",children:[" ",n.general&&o.jsx("div",{role:"alert",className:"rounded border-s-4 border-red-500 bg-red-50 p-3",children:o.jsx("p",{className:"text-sm text-red-700",children:n.general})}),o.jsx(D,{label:"Mật khẩu hiện tại *",id:"currentPassword",name:"currentPassword",type:"password",required:!0,value:e.currentPassword,onChange:a,disabled:s,autoComplete:"current-password",error:n.currentPassword}),o.jsx(D,{label:"Mật khẩu mới *",id:"newPassword",name:"newPassword",type:"password",required:!0,value:e.newPassword,onChange:a,disabled:s,autoComplete:"new-password","aria-describedby":"password-description",error:n.newPassword}),o.jsx("p",{className:"text-xs text-gray-500",id:"password-description",children:"Phải có ít nhất 6 ký tự. Nên sử dụng kết hợp chữ hoa, chữ thường, số và ký tự đặc biệt."}),o.jsx(D,{label:"Xác nhận mật khẩu mới *",id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:e.confirmPassword,onChange:a,disabled:s,autoComplete:"new-password",error:n.confirmPassword})]}),o.jsx("div",{className:"flex items-center justify-end gap-x-3 border-t border-gray-900/10 px-4 py-4 sm:px-6",children:o.jsx(U,{type:"submit",disabled:s,isLoading:s,children:"Cập nhật mật khẩu"})})]})]})})},og=e=>{if(!e)return"-";try{return Ce(De(e),"dd/MM/yyyy HH:mm",{locale:dt})}catch{return e}},ZT=()=>{se();const[e,t]=v.useState(null),[n,r]=v.useState(!0),[s,i]=v.useState(null),[a,l]=v.useState("basic"),[c,u]=v.useState(null),[d,h]=v.useState(!1);v.useEffect(()=>{(async()=>{var p;r(!0);try{const j=await Qe.getMe();if(((p=j==null?void 0:j.user)==null?void 0:p.role)!=="ADMIN"){i("Bạn không có quyền truy cập trang này.");return}j!=null&&j.user?t(j.user):i("Không tìm thấy thông tin hồ sơ admin")}catch(j){console.error("Error fetching profile:",j),i((j==null?void 0:j.message)||"Không thể tải thông tin hồ sơ"),P.error("Không thể tải thông tin hồ sơ")}finally{r(!1)}})()},[]);const m=(y,p,j=!1,N="text-gray-900")=>o.jsxs("div",{className:`px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 ${j?"bg-gray-50":"bg-white"}`,children:[o.jsx("dt",{className:"text-sm font-medium text-gray-600",children:y}),o.jsx("dd",{className:`mt-1 text-sm sm:mt-0 sm:col-span-2 ${N}`,children:p!=null&&p!==""?p:o.jsx("span",{className:"text-gray-400",children:"-"})})]}),x=y=>{var j;const p="http://localhost:5002/uploads";if((j=y==null?void 0:y.avatar)!=null&&j.path){const N=y.avatar.path;return N.startsWith("http")?N:`${p}${N.startsWith("/")?"":"/"}${N}`}return"/src/assets/default-avatar.png"},f=async y=>{const p=y.target.files[0];if(p){if(!p.type.startsWith("image/")){P.error("Vui lòng chọn file hình ảnh");return}if(p.size>5*1024*1024){P.error("Kích thước file quá lớn (tối đa 5MB)");return}u(p),await w(p)}},w=async y=>{var p;try{h(!0);const j=await fN.uploadMedia(y,"user-avatar","USER_AVATAR");if(j&&j.id){const N={id:(p=e.staffProfile)==null?void 0:p.id,avatarId:j.id};if((await Qe.updateProfile(N)).success){P.success("Avatar đã được cập nhật");const E=await Qe.getMe();t(E.user)}}}catch(j){console.error("Error uploading avatar:",j),P.error("Không thể tải lên avatar")}finally{h(!1)}};if(n)return o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(ee,{size:"lg"})});if(s||!e)return o.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",children:[o.jsx("h2",{className:"font-bold mb-2",children:"Lỗi"}),o.jsx("p",{children:s||"Không thể tải thông tin hồ sơ."})]});const b=e.staffProfile||{},g=x(e);return o.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto",children:[o.jsx("div",{className:"flex flex-wrap justify-between items-center gap-4",children:o.jsx("h1",{className:"text-2xl font-semibold",children:"Hồ sơ Quản trị viên"})}),o.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[o.jsx("div",{className:"px-4 py-5 sm:px-6 flex flex-wrap justify-between items-center gap-4 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative group",children:[o.jsx("img",{src:g,alt:`Avatar của ${b.fullName||e.email}`,className:"h-20 w-20 rounded-full object-cover ring-2 ring-offset-2 ring-indigo-500",onError:y=>{y.target.onerror=null,y.target.src="/src/assets/default-avatar.png"}}),o.jsxs("div",{className:"absolute inset-0 flex items-center justify-center rounded-full bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:[o.jsxs("label",{htmlFor:"avatar-upload",className:"cursor-pointer w-full h-full flex items-center justify-center text-white",children:[o.jsx(Pt,{className:"h-6 w-6"}),o.jsx("span",{className:"sr-only",children:"Thay đổi avatar"})]}),o.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:f,disabled:d})]}),d&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-full bg-black bg-opacity-70",children:o.jsx(ee,{size:"sm",color:"white"})})]}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:b.fullName||"Admin"}),o.jsx("p",{className:"text-sm text-gray-500",children:e.email}),o.jsx("div",{className:"mt-1",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Quản trị viên"})})]})]})}),o.jsxs(Dd,{activeTab:a,onChange:l,children:[o.jsx(Zt,{id:"basic",label:"Thông tin cơ bản",icon:nN,children:o.jsx("div",{className:"border-t border-gray-200",children:o.jsxs("dl",{className:"divide-y divide-gray-100",children:[o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Thông tin cá nhân"})}),m("Email",e.email,!1,"text-gray-700"),m("Chức vụ",b.position||"Quản trị viên",!0),o.jsx("div",{className:"px-4 pt-4 pb-2 sm:px-6",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Thông tin hệ thống"})}),m("Ngày tạo tài khoản",og(e.createdAt),!1),m("Cập nhật lần cuối",og(b.updatedAt),!0)]})})}),o.jsx(Zt,{id:"login-history",label:"Lịch sử đăng nhập",icon:Pd,children:o.jsx(QT,{userId:e.id})}),o.jsx(Zt,{id:"security",label:"Bảo mật",icon:Hj,children:o.jsx(GT,{})})]})]})]})};function JT(){return o.jsxs(Sb,{children:[o.jsx(K,{path:"/login",element:o.jsx(L5,{})}),o.jsx(K,{path:"/register",element:o.jsx(zT,{})}),o.jsx(K,{path:"/forgot-password",element:o.jsx(BT,{})}),o.jsxs(K,{element:o.jsx(uN,{}),children:[" ",o.jsx(K,{index:!0,element:o.jsx(rl,{to:"/dashboard",replace:!0})}),o.jsx(K,{path:"/dashboard",element:o.jsx(iE,{})}),o.jsx(K,{path:"/profile",element:o.jsx(Km,{studentComponent:o.jsx(WT,{}),staffComponent:o.jsx(qT,{}),adminComponent:o.jsx(ZT,{})})}),o.jsx(K,{path:"/profile/edit",element:o.jsx(Km,{studentComponent:o.jsx(VT,{}),staffComponent:o.jsx(KT,{})})}),o.jsxs(K,{path:"/students",children:[o.jsx(K,{index:!0,element:o.jsx(Je,{children:o.jsx(YE,{})})}),o.jsx(K,{path:"new",element:o.jsx(Is,{children:o.jsx(Xm,{})})}),o.jsx(K,{path:":id",element:o.jsx(Je,{children:o.jsx(n_,{})})})," ",o.jsx(K,{path:":id/edit",element:o.jsx(Je,{children:o.jsx(Xm,{})})})]}),o.jsxs(K,{path:"/buildings",element:o.jsx(Je,{}),children:[o.jsx(K,{index:!0,element:o.jsx(l_,{})}),o.jsx(K,{path:"new",element:o.jsx(Is,{children:o.jsx(Gm,{})})}),o.jsx(K,{path:":id/edit",element:o.jsx(Is,{children:o.jsx(Gm,{})})})]}),o.jsxs(K,{path:"/rooms",children:[o.jsx(K,{index:!0,element:o.jsx(d_,{})})," ",o.jsxs(K,{element:o.jsx(Je,{}),children:[" ",o.jsx(K,{path:"new",element:o.jsx(Jm,{})}),o.jsx(K,{path:":id/edit",element:o.jsx(Jm,{})})]})]}),o.jsxs(K,{path:"/amenities",element:o.jsx(Je,{}),children:[o.jsx(K,{index:!0,element:o.jsx(v_,{})}),o.jsx(K,{path:"new",element:o.jsx(Is,{children:o.jsx(eg,{})})}),o.jsx(K,{path:":id/edit",element:o.jsx(Is,{children:o.jsx(eg,{})})})]}),o.jsxs(K,{path:"/maintenance",children:[o.jsx(K,{index:!0,element:o.jsx(Je,{children:o.jsx(__,{})})}),o.jsx(K,{path:"request",element:o.jsx(D_,{})}),o.jsx(K,{path:":id/edit",element:o.jsx(Je,{children:o.jsx(R_,{})})})]}),o.jsxs(K,{path:"/invoices",element:o.jsx(Je,{}),children:[o.jsx(K,{index:!0,element:o.jsx(W_,{})}),o.jsx(K,{path:":id",element:o.jsx(q_,{})})]}),o.jsx(K,{path:"/payments",element:o.jsx(Je,{}),children:o.jsx(K,{index:!0,element:o.jsx(rT,{})})}),o.jsxs(K,{path:"/utilities",element:o.jsx(Je,{}),children:[o.jsx(K,{index:!0,element:o.jsx(gT,{})}),o.jsx(K,{path:"new",element:o.jsx(ng,{})}),o.jsx(K,{path:":id/edit",element:o.jsx(ng,{})}),o.jsx(K,{path:"readings/create",element:o.jsx(vT,{})})]}),o.jsxs(K,{path:"/vehicles",children:[o.jsx(K,{index:!0,element:o.jsx(Je,{children:o.jsx(kT,{})})}),o.jsx(K,{path:"register",element:o.jsx(sg,{mode:"create"})}),o.jsx(K,{path:":id/edit",element:o.jsx(Je,{children:o.jsx(sg,{mode:"edit"})})})]}),o.jsxs(K,{path:"/transfers",children:[o.jsx(K,{index:!0,element:o.jsx(Je,{children:o.jsx(OT,{})})}),o.jsx(K,{path:"request",element:o.jsx($T,{})})]})]})," ",o.jsx(K,{path:"*",element:o.jsx(FT,{})})]})}const eP={success:{style:{background:"#10B981",color:"white",padding:"16px",borderRadius:"8px"},iconTheme:{primary:"white",secondary:"#10B981"},duration:3e3},error:{style:{background:"#EF4444",color:"white",padding:"16px",borderRadius:"8px"},iconTheme:{primary:"white",secondary:"#EF4444"},duration:4e3}};lc.createRoot(document.getElementById("root")).render(o.jsx(Fi.StrictMode,{children:o.jsx(Mb,{children:o.jsxs(cj,{children:[o.jsx(JT,{}),o.jsx(Sw,{position:"top-right",reverseOrder:!1,toastOptions:eP})]})})}));
